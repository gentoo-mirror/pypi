<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># aliyunpan[![Build Status](https://github.com/wxy1343/aliyunpan/workflows/CI/badge.svg)](https://github.com/wxy1343/aliyunpan/actions)[![GitHub](https://img.shields.io/github/license/wxy1343/aliyunpan)](https://github.com/wxy1343/aliyunpan/blob/main/LICENSE)[![PyPI](https://img.shields.io/pypi/v/aliyunpan)](https://pypi.org/project/aliyunpan/)[![GitHub all releases](https://img.shields.io/github/downloads/wxy1343/aliyunpan/total)](https://github.com/wxy1343/aliyunpan/releases/latest/)[![wiki](https://img.shields.io/badge/-wiki-ff69b4)](https://github.com/wxy1343/aliyunpan/wiki)---阿里云盘cli  环境要求： python 3.7 通过测试  ~~低版本环境运行报错参考~~[~~issue9~~](https://github.com/wxy1343/aliyunpan/issues/9)## 安装```shellpip install aliyunpan```## 更新```shellpip install aliyunpan --upgrade```## 运行```shellaliyunpan-cli```## pyinstaller打包[最新版下载](https://github.com/wxy1343/aliyunpan/releases/latest) (GitHubActions打包，glibc版本较高 [#42](https://github.com/wxy1343/aliyunpan/issues/42))  [第三方下载](https://media.cooluc.com/source/aliyunDrive-cli) (更新较慢)## 克隆项目* `--recurse-submodules` 用于克隆子模块，部分功能需要(可选)```shellgit clone https://github.com/wxy1343/aliyunpan --recurse-submodules```## 获取refresh_token![token](https://github.com/wxy1343/aliyunpan/raw/main/token.png)### 注意* web端获取的refresh_token有防盗链检测1. 可以指定账号密码登入2. 可以通过手机端查找日志获取refresh_token&gt; /sdcard/Android/data/com.alicloud.databox/files/logs/trace/userId/yunpan/latest.log* ~~登录api加入了ua检测，需要运行混淆的js代码来获取ua~~* ~~推荐安装 [node.js](https://nodejs.org) 和 [jsdom](https://github.com/jsdom/jsdom) 模块来运行js代码~~* 目前阿里云盘修改了ua的算法,加入了鼠标移动之类的信息,如果有解决方法的欢迎来[pr](https://github.com/wxy1343/aliyunpan/pulls)```shellnpm install jsdom```### 配置refresh_token```shellecho &quot;refresh_token: 'xxxxx'&quot;  &gt;  ~/.config/aliyunpan.yaml```### 配置账号(可选)```shellecho &quot;username: 'xxxxx'&quot;  &gt;  ~/.config/aliyunpan.yamlecho &quot;password: 'xxxxx'&quot;  &gt;&gt;  ~/.config/aliyunpan.yaml```### 配置aria2(可选)```shellcat &gt;&gt; ~/.config/aliyunpan.yaml &lt;&lt;EOFaria2:  'host': 'http://localhost'  'port': 6800  'secret': ''EOF```## 功能介绍|指令                    |描述                           ||-----------------------|------------------------------||download (d)           |下载文件/文件夹                  ||ls (dir,l,list)        |列目录                         ||mv (move)              |移动文件/文件夹                  ||rm (del,delete)        |删除文件/文件夹                  ||rename (r)             |重命名文件/文件夹                ||tree (show,t)          |查看文件树                      ||upload (u)             |上传文件/文件夹                  ||share (s)              |分享文件                        ||mkdir (m)              |创建文件夹                      ||cat (c)                |显示文件内容                    ||tui                    |文本用户界面                    ||search                 |搜索文件/文件夹                 ||sync                   |同步文件夹                     ||token (r,refresh_token)|查看refresh_token             |## 使用指南* 查看帮助```shellaliyunpan-cli -h```&lt;details&gt;    &lt;summary&gt;查看详情&lt;/summary&gt;    &lt;table&gt;        &lt;tbody&gt;            &lt;tr&gt;                &lt;td&gt;参数&lt;/td&gt;                &lt;td&gt;描述&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-h, --help&lt;/td&gt;                &lt;td&gt;查看帮助&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;--version&lt;/td&gt;                &lt;td&gt;查看版本&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-c, --config-file&lt;/td&gt;                &lt;td&gt;指定配置文件&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-t, --refresh-token&lt;/td&gt;                &lt;td&gt;指定REFRESH_TOKEN&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-u, --username&lt;/td&gt;                &lt;td&gt;指定账号&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-p, --password&lt;/td&gt;                &lt;td&gt;指定密码&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-d, --depth&lt;/td&gt;                &lt;td&gt;文件递归深度&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-T, --timeout&lt;/td&gt;                &lt;td&gt;请求超时时间(秒)&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-id, --drive-id&lt;/td&gt;                &lt;td&gt;指定drive_id&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-a, --album&lt;/td&gt;                &lt;td&gt;是否访问相册&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-s, --share-id&lt;/td&gt;                &lt;td&gt;指定分享id&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-sp, --share-pwd&lt;/td&gt;                &lt;td&gt;指定分享密码&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-f, --filter-file&lt;/td&gt;                &lt;td&gt;过滤文件(多个)&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-w, --whitelist&lt;/td&gt;                &lt;td&gt;使用白名单过滤文件&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;-m, --match&lt;/td&gt;                &lt;td&gt;指定使用正则匹配文件&lt;/td&gt;            &lt;/tr&gt;        &lt;/tbody&gt;    &lt;/table&gt;&lt;/details&gt;* 查看指令参数```shellaliyunpan-cli COMMAND -h```&lt;details&gt;    &lt;summary&gt;查看详情&lt;/summary&gt;    &lt;table&gt;        &lt;tbody&gt;            &lt;tr&gt;                &lt;td&gt;指令&lt;/td&gt;                &lt;td&gt;参数&lt;/td&gt;                &lt;td&gt;描述&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;download&lt;/td&gt;                &lt;td&gt;-p, --file&lt;/td&gt;                &lt;td&gt;选择文件(多个)&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;download&lt;/td&gt;                &lt;td&gt;-s, --share&lt;/td&gt;                &lt;td&gt;指定分享的序列文件&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;download&lt;/td&gt;                &lt;td&gt;-cs, --chunk-size&lt;/td&gt;                &lt;td&gt;分块大小(字节)&lt;/td&gt;            &lt;/tr&gt;             &lt;tr&gt;                &lt;td&gt;download&lt;/td&gt;                &lt;td&gt;-a, --aria2&lt;/td&gt;                &lt;td&gt;发送到aria2&lt;/td&gt;            &lt;/tr&gt;             &lt;tr&gt;                &lt;td&gt;ls,search&lt;/td&gt;                &lt;td&gt;-l&lt;/td&gt;                &lt;td&gt;查看详情&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;share&lt;/td&gt;                &lt;td&gt;-p, --file&lt;/td&gt;                &lt;td&gt;指定文件(多个)&lt;/td&gt;            &lt;/tr&gt;             &lt;tr&gt;                &lt;td&gt;share&lt;/td&gt;                &lt;td&gt;-f, --file-id&lt;/td&gt;                &lt;td&gt;指定file_id(多个)&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;share&lt;/td&gt;                &lt;td&gt;-t, --expire-sec&lt;/td&gt;                &lt;td&gt;分享过期时间(秒)，默认最大14400&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;share&lt;/td&gt;                &lt;td&gt;-l, --share-link&lt;/td&gt;                &lt;td&gt;输出分享链接&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;share&lt;/td&gt;                &lt;td&gt;-d, --download-link&lt;/td&gt;                &lt;td&gt;输出下载链接&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;share&lt;/td&gt;                &lt;td&gt;-s, --save&lt;/td&gt;                &lt;td&gt;保存序列文件到云盘和本地&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;share&lt;/td&gt;                &lt;td&gt;-S, --share-official&lt;/td&gt;                &lt;td&gt;官方分享功能(需要账号支持)&lt;/td&gt;            &lt;/tr&gt;                     &lt;tr&gt;                &lt;td&gt;upload&lt;/td&gt;                &lt;td&gt;-p, --file&lt;/td&gt;                &lt;td&gt;选择文件(多个)&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;upload,sync&lt;/td&gt;                &lt;td&gt;-t, --time-out&lt;/td&gt;                &lt;td&gt;分块上传超时时间(秒)&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;upload,sync&lt;/td&gt;                &lt;td&gt;-r, --retry&lt;/td&gt;                &lt;td&gt;上传失败重试次数&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;upload&lt;/td&gt;                &lt;td&gt;-f, --force&lt;/td&gt;                &lt;td&gt;强制覆盖文件&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;upload&lt;/td&gt;                &lt;td&gt;-s, --share&lt;/td&gt;                &lt;td&gt;指定分享的序列文件&lt;/td&gt;            &lt;/tr&gt;             &lt;tr&gt;                &lt;td&gt;upload,sync&lt;/td&gt;                &lt;td&gt;-cs, --chunk-size&lt;/td&gt;                &lt;td&gt;分块大小(字节)&lt;/td&gt;            &lt;/tr&gt;             &lt;tr&gt;                &lt;td&gt;upload&lt;/td&gt;                &lt;td&gt;-c&lt;/td&gt;                &lt;td&gt;断点续传&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;cat&lt;/td&gt;                &lt;td&gt;-e, --encoding&lt;/td&gt;                &lt;td&gt;文件编码&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;sync&lt;/td&gt;                &lt;td&gt;-st, --sync-time&lt;/td&gt;                &lt;td&gt;同步间隔时间&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;sync&lt;/td&gt;                &lt;td&gt;--no-delete, -n&lt;/td&gt;                &lt;td&gt;不删除(云盘/本地)文件(默认)&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;sync&lt;/td&gt;                &lt;td&gt;-d, --delete&lt;/td&gt;                &lt;td&gt;允许删除(云盘/本地)文件&lt;/td&gt;            &lt;/tr&gt;                     &lt;tr&gt;                &lt;td&gt;sync&lt;/td&gt;                &lt;td&gt;-l, --local&lt;/td&gt;                &lt;td&gt;同步云盘文件到本地&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;token&lt;/td&gt;                &lt;td&gt;--refresh, -r&lt;/td&gt;                &lt;td&gt;刷新配置文件token&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;token&lt;/td&gt;                &lt;td&gt;--refresh-time, -t&lt;/td&gt;                &lt;td&gt;自动刷新token间隔时间(秒)&lt;/td&gt;            &lt;/tr&gt;                    &lt;tr&gt;                &lt;td&gt;token&lt;/td&gt;                &lt;td&gt;--change, -c&lt;/td&gt;                &lt;td&gt;设置新的refresh_token&lt;/td&gt;            &lt;/tr&gt;        &lt;/tbody&gt;    &lt;/table&gt;&lt;/details&gt;### 断点续传* 将文件分成多块顺序上传* 文件上传进度保存在当前目录下的tasks.yaml* 格式  ```yaml  文件sha1:    path: 绝对路径    upload_id: 上传id    file_id: 文件id    chunk_size: 分块大小    part_number: 最后上传的分块编号  ```* 文件未上传成功时，CTRL+C会自动保存* 断点续传需带上参数-c### 分享* 由于官方修改秒传接口导致该功能失效* 暂时采用在秒传链接中加入直链的方法用以获取proof_code* 分享秒传文件时需要通过直链获取文件随机8字节，导致速度较慢* 由于直链的局限，秒传链接有效期为4小时1.分享链接格式```aliyunpan://文件名|sha1|url_base64|文件大小|相对路径```例如* 以下秒传链接均已失效，仅供参考```aliyunpan://示例文件.txt|F61851825609372B3D7F802E600B35A497CFC38E|url_base64|24|root```2.文件分享```shellaliyunpan-cli share 示例文件.txt ```导入```shellaliyunpan-cli upload &quot;aliyunpan://示例文件.txt|F61851825609372B3D7F802E600B35A497CFC38E|url_base64|24|root&quot;```3.文件夹分享```shellaliyunpan-cli share 示例文件夹```导入```shellaliyunpan-cli upload -s &quot;aliyunpan://示例文件夹|80E7E25109D4246653B600FDFEDD8D8B0D97E517|url_base64|970|root&quot;```### TUI按键指南* 显示菜单(ctrl+x)* 退出(ctrl+c)* 切换标签(↑↓←→,kjhl,TAB)### 环境变量```ALIYUNPAN_CONF``` 配置文件路径  ```ALIYUNPAN_ROOT``` 根目录(log和tasks输出路径)## 致谢感谢 [zhjc1124/aliyundrive](https://github.com/zhjc1124/aliyundrive) 的登录接口参考</longdescription>
</pkgmetadata>