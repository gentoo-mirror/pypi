<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>[![NPM version](https://badge.fury.io/js/cdk-prowler.svg)](https://badge.fury.io/js/cdk-prowler)[![PyPI version](https://badge.fury.io/py/cdk-prowler.svg)](https://badge.fury.io/py/cdk-prowler)[![.NET version](https://img.shields.io/nuget/v/com.github.mmuller88.awsCdkBuildBadge.svg?style=flat-square)](https://www.nuget.org/packages/com.github.mmuller88.cdkProwler/)![Release](https://github.com/mmuller88/cdk-prowler/workflows/Release/badge.svg)Author = [https://martinmueller.dev](https://martinmueller.dev)# cdk-prowlerThe current Prowler version is [2.10.0](https://github.com/prowler-cloud/prowler/releases/tag/2.10.0)An AWS CDK custom construct for deploying Prowler to your AWS Account. The following description about Prowler is taken from [https://github.com/prowler-cloud/prowler](https://github.com/prowler-cloud/prowler)Prowler is a security tool to perform AWS security best practices assessments, audits, incident response, continuous monitoring, hardening and forensics readiness. It contains all CIS controls listed here [https://d0.awsstatic.com/whitepapers/compliance/AWS_CIS_Foundations_Benchmark.pdf](https://d0.awsstatic.com/whitepapers/compliance/AWS_CIS_Foundations_Benchmark.pdf) and more than 100 additional checks that help on GDPR, HIPAA â€¦It generates security html results which are stored in an s3 bucket:![html results](https://raw.githubusercontent.com/mmuller88/cdk-prowler/main/misc/html-out.png)And in your Codebuild Report group:![Report group](https://raw.githubusercontent.com/mmuller88/cdk-prowler/main/misc/report-group-out.png)# AWS AMIIf you just want to make the Prowler security checks in your account try my [Prowler AWS Marketplace AMI](https://aws.amazon.com/marketplace/pp/prodview-jlwcdlc3weta6). With just $1 Prowler will do over 180 security checks across a huge amount of AWS services in all your regions. Don't forget the terminate the Ec2 instance when the Prowler stack got created for not paying more than that $1 :).With buying the AMI you support my on my passion for creating open source products like this cdk-prowler construct. Furthermore you enable me to work on future features like mentioned in the **Planned Features** section. Thank you so much :) !# Example```pythonimport { ProwlerAudit } from 'cdk-prowler';...    const app = new App();    const stack = new Stack(app, 'ProwlerAudit-stack');    new ProwlerAudit(stack, 'ProwlerAudit');```# Architect diagram![diagram](diagrams/prowler.png)Curious how I did the diagram? Have a look here https://martinmueller.dev/cdk-dia-eng .# cdk-prowler Propertiescdk-prowler supports some properties to tweak your stack. Like for running a Cloudwatch schedule to regualary run the Prowler scan with a defined cron expression.# API Reference &lt;a name=&quot;API Reference&quot;&gt;&lt;/a&gt;## Constructs &lt;a name=&quot;Constructs&quot;&gt;&lt;/a&gt;### ProwlerAudit &lt;a name=&quot;cdk-prowler.ProwlerAudit&quot;&gt;&lt;/a&gt;Creates a CodeBuild project to audit an AWS account with Prowler and stores the html report in a S3 bucket.This will run onece at the beginning and on a schedule afterwards. Partial contribution from [https://github.com/stevecjones](https://github.com/stevecjones)#### Initializers &lt;a name=&quot;cdk-prowler.ProwlerAudit.Initializer&quot;&gt;&lt;/a&gt;```typescriptimport { ProwlerAudit } from 'cdk-prowler'new ProwlerAudit(parent: Stack, id: string, props?: ProwlerAuditProps)```##### `parent`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.parameter.parent&quot;&gt;&lt;/a&gt;* *Type:* [`@aws-cdk/core.Stack`](#@aws-cdk/core.Stack)---##### `id`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.parameter.id&quot;&gt;&lt;/a&gt;* *Type:* `string`---##### `props`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.parameter.props&quot;&gt;&lt;/a&gt;* *Type:* [`cdk-prowler.ProwlerAuditProps`](#cdk-prowler.ProwlerAuditProps)---#### Properties &lt;a name=&quot;Properties&quot;&gt;&lt;/a&gt;##### `codebuildProject`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.property.codebuildProject&quot;&gt;&lt;/a&gt;```typescriptpublic readonly codebuildProject: Project;```* *Type:* [`@aws-cdk/aws-codebuild.Project`](#@aws-cdk/aws-codebuild.Project)---##### `enableScheduler`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.property.enableScheduler&quot;&gt;&lt;/a&gt;```typescriptpublic readonly enableScheduler: boolean;```* *Type:* `boolean`---##### `logsRetentionInDays`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.property.logsRetentionInDays&quot;&gt;&lt;/a&gt;```typescriptpublic readonly logsRetentionInDays: RetentionDays;```* *Type:* [`@aws-cdk/aws-logs.RetentionDays`](#@aws-cdk/aws-logs.RetentionDays)---##### `prowlerOptions`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.property.prowlerOptions&quot;&gt;&lt;/a&gt;```typescriptpublic readonly prowlerOptions: string;```* *Type:* `string`---##### `prowlerScheduler`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.property.prowlerScheduler&quot;&gt;&lt;/a&gt;```typescriptpublic readonly prowlerScheduler: string;```* *Type:* `string`---##### `prowlerVersion`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.property.prowlerVersion&quot;&gt;&lt;/a&gt;```typescriptpublic readonly prowlerVersion: string;```* *Type:* `string`---##### `serviceName`&lt;sup&gt;Required&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAudit.property.serviceName&quot;&gt;&lt;/a&gt;```typescriptpublic readonly serviceName: string;```* *Type:* `string`---## Structs &lt;a name=&quot;Structs&quot;&gt;&lt;/a&gt;### ProwlerAuditProps &lt;a name=&quot;cdk-prowler.ProwlerAuditProps&quot;&gt;&lt;/a&gt;#### Initializer &lt;a name=&quot;[object Object].Initializer&quot;&gt;&lt;/a&gt;```typescriptimport { ProwlerAuditProps } from 'cdk-prowler'const prowlerAuditProps: ProwlerAuditProps = { ... }```##### `additionalS3CopyArgs`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.additionalS3CopyArgs&quot;&gt;&lt;/a&gt;```typescriptpublic readonly additionalS3CopyArgs: string;```* *Type:* `string`An optional parameter to add to the S3 bucket copy command.---##### `allowlist`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.allowlist&quot;&gt;&lt;/a&gt;```typescriptpublic readonly allowlist: Asset;```* *Type:* [`@aws-cdk/aws-s3-assets.Asset`](#@aws-cdk/aws-s3-assets.Asset)* *Default:* undefinedAn Prowler-specific Allowlist file.If a value is provided then this is passed to Prowler on runs using the '-w' flag.If no value is provided, the -w parameter is not used. If you provide an asset that is zipped, it must containan 'allowlist.txt' file which will be passed to Prowler.---##### `enableScheduler`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.enableScheduler&quot;&gt;&lt;/a&gt;```typescriptpublic readonly enableScheduler: boolean;```* *Type:* `boolean`* *Default:* falseenables the scheduler for running prowler periodically.Together with prowlerScheduler.---##### `logsRetentionInDays`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.logsRetentionInDays&quot;&gt;&lt;/a&gt;```typescriptpublic readonly logsRetentionInDays: RetentionDays;```* *Type:* [`@aws-cdk/aws-logs.RetentionDays`](#@aws-cdk/aws-logs.RetentionDays)* *Default:* : 3Specifies the number of days you want to retain CodeBuild run log events in the specified log group.Junit reports are kept for 30 days, HTML reports in S3 are not deleted---##### `prowlerOptions`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.prowlerOptions&quot;&gt;&lt;/a&gt;```typescriptpublic readonly prowlerOptions: string;```* *Type:* `string`* *Default:* '-M text,junit-xml,html,csv,json'Options to pass to Prowler command, make sure at least -M junit-xml is used for CodeBuild reports.Use -r for the region to send API queries, -f to filter only one region, -M output formats, -c for comma separated checks, for all checks do not use -c or -g, for more options see -h. For a complete assessment use  &quot;-M text,junit-xml,html,csv,json&quot;, for SecurityHub integration use &quot;-r region -f region -M text,junit-xml,html,csv,json,json-asff -S -q&quot;---##### `prowlerScheduler`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.prowlerScheduler&quot;&gt;&lt;/a&gt;```typescriptpublic readonly prowlerScheduler: string;```* *Type:* `string`* *Default:* 'cron(0 22 ** ? *)'The time when Prowler will run in cron format.Default is daily at 22:00h or 10PM 'cron(0 22 ** ? *)', for every 5 hours also works 'rate(5 hours)'. More info here [https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html).---##### `prowlerVersion`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.prowlerVersion&quot;&gt;&lt;/a&gt;```typescriptpublic readonly prowlerVersion: string;```* *Type:* `string`* *Default:* 2.5.0Specifies the concrete Prowler version.---##### `reportBucket`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.reportBucket&quot;&gt;&lt;/a&gt;```typescriptpublic readonly reportBucket: IBucket;```* *Type:* [`@aws-cdk/aws-s3.IBucket`](#@aws-cdk/aws-s3.IBucket)An optional S3 bucket to store the Prowler reports.---##### `reportBucketPrefix`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.reportBucketPrefix&quot;&gt;&lt;/a&gt;```typescriptpublic readonly reportBucketPrefix: string;```* *Type:* `string`An optional prefix for the report bucket objects.---##### `serviceName`&lt;sup&gt;Optional&lt;/sup&gt; &lt;a name=&quot;cdk-prowler.ProwlerAuditProps.property.serviceName&quot;&gt;&lt;/a&gt;```typescriptpublic readonly serviceName: string;```* *Type:* `string`* *Default:* : prowlerSpecifies the service name used within component naming.---# Cross Account BucketsBy providing your own Bucket you can have the CodeBuild project drop the Prowler results in another account. Make sure that you have your Bucket policy setup to allow the account running the Prowler reports access to writing those record.Additionally, you will probably want to provide an `additionalS3CopyArgs: '--acl bucket-owner-full-control'` to ensure that those object can be read by the account owner.# Planned Features* Supporting AWS SecurityHub [https://github.com/prowler-cloud/prowler#security-hub-integration](https://github.com/prowler-cloud/prowler#security-hub-integration)* Triggering an event with SNS when prowler finishes the run* AMI EC2 executable# Architecture![cfn](misc/cfn.jpg)# Misc```shyes | yarn destroy &amp;&amp; yarn deploy --require-approval never```Rerun Prowler on deploy```shyarn deploy --require-approval never -c reRunProwler=true```# Thanks To* My friend and fellaw ex colleague Tony de la Fuente ([https://github.com/toniblyx](https://github.com/toniblyx) [https://twitter.com/ToniBlyx](https://twitter.com/ToniBlyx)) for developing such a cool security tool as [Prowler](https://github.com/prowler-cloud/prowler)* As always to the amazing CDK / Projen Community. Join us on [Slack](https://cdk-dev.slack.com)!* [Projen](https://github.com/projen/projen) project and the community around it</longdescription>
</pkgmetadata>