<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># cloudtips-adpCloudTips Adapter позволяет интегрировать прием донатов в Django приложение.## СтартУстановка```angular2htmlpip install cloudtipsadp```Удаление пакета```angular2htmlpip uninstall cloudtipsadp```Зависимости разрешить [^1]```angular2htmlpip install python-dotenv requests python-magic dependency-injector```### Настройка переменных окруженияВ корне проекта создать файл .env *Файл .env используется для тестов. В production установить переменные окружения уровня сеанса пользователя или системы.*```angular2htmlsudo touch .env```Для авторизации на CloudTips добавить настройки в файл .envplaceId - идентификатор вашего заведения (в админке CloudTips)```angular2htmlCTA_GRANT_TYPE=passwordCTA_CLIENT_ID=PartnerCTA_USER_NAME=&lt;your_email&gt;CTA_PASSWORD=&lt;your_password&gt;CTA_PLACE_ID=&lt;your_placeId&gt;# Production. Раскомментировать#CTA_BASE_URL=https://identity.cloudtips.ru#CTA_BASE_URL_API=https://api.cloudtips.ru/api# Production. ЗакомментироватьCTA_BASE_URL=https://identity-sandbox.cloudtips.ruCTA_BASE_URL_API=https://api-sandbox.cloudtips.ru```#  Работа с пакетом### Подключение ```angular2htmlimport cloudtipsadp as cta```## Получатель#### Создать получателя донатов```angular2htmlresponse = cta.receivers_create(name, phone_number)```#### Удалить получателя из скоупа```angular2htmlresponse = cta.receivers_detach_agent(user_id)```#### Все получатели донатов```angular2htmlresponse = cta.receivers_pages()```#### Загрузка фотографии получателя```angular2htmlresponse = cta.receivers_photo(user_id, photo_path)```#### Вариант просмотра результата ответа сервера```angular2htmlif type(response) == dict and response.get('succeed'):    print(response.get('data'))else:    print(response)```## Заведения#### Информация по всем заведениям ТСП```angular2htmlresponse = cta.places_get()```#### Привязка получателя к заведению. Отправить сотруднику на его номер телефона код в смс сообщении.```angular2htmlresponse = cta.places_send_sms(user_id)```#### Подтверждение привязки телефона (пользователя) к предприятию. Передать код из смс.```angular2htmlresponse = cta.places_confirm(user_id, code)```## Карты#### Список карт получателя```angular2htmlresponse = cta.cards_get(user_id)```#### Отправить криптограмму```angular2htmlresponse = cta.cards_auth(user_id, checkout)```#### Для проведения 3-D Secure аутентификации```angular2htmlresponse = cta.cards_3ds(user_id, md, paReq)```#### Изменить карту, которая по умолчанию```angular2htmlresponse = cta.cards_default(user_id, card_token)```#### Удаление карты получателя. Карту по умолчанию удалить нельзя```angular2htmlresponse = cta.cards_delete(user_id, card_token)```#### Подтвердить привязку карты на стороне системы```angular2htmlresponse = cta.cards_add(user_id, transact_id)```## Накопления#### Накопления по получателю```angular2htmlresponse = cta.accums_summary(user_id)```#### Выплата накопления получателю```angular2htmlresponse = cta.accums_payout_receiver(user_id)```## Транзакции#### Получение всех транзакций выплат получателям менеджера```angular2htmlresponse = cta.payouts()```### Возможные проблемы____[^1]: Если возникли проблемы с установкой пакета python-magic на macos установите:```angular2htmlbrew install libmagic pip uninstall python-magicpip install python-magic-bin```</longdescription>
</pkgmetadata>