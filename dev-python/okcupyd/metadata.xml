<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>|Latest PyPI version|\ |Build Status|\ |Documentation Status|Getting Started===============Installation/Setup------------------pip/PyPI~~~~~~~~okcupyd is available for install from PyPI. If you have pip you cansimply run:.. code:: bash    pip install okcupydto make okcupyd available for import in python.From Source~~~~~~~~~~~You can install from source by running the setup.py script included aspart of this repository as follows:.. code:: bash    python setup.py installThis can be useful if you want to install a version that has not yetbeen released on PyPI.From Docker~~~~~~~~~~~okcupyd is available on docker (seehttps://registry.hub.docker.com/u/imalison/okcupyd/)If you have docker installed on your machine, you can run.. code:: bash    docker run -t -i imalison/okcupyd okcupydto get an interactive okcupyd shell.Use---Interactive~~~~~~~~~~~Installing the okcupyd package should add an executable script to adirectory in your $PATH that will allow you to type okcupyd into yourshell of choice to enter an interactive ipython shell that has beenprepared for use with okcupyd. Before the shell starts, you will beprompted for your username and password. This executable script acceptsthe flags --enable-logger which enables a logger of the given name, and--credentials whose action is described below.It is highly recommended that you use the --enable-logger=requests and--enable-logger=okcupyd flags if you encounter any problems.Credentials~~~~~~~~~~~If you wish to avoid entering your password each time you start a newsession you can do one of the following things:1. Create a python module (.py file) with your username and password set   to the variables USERNAME and PASSWORD respectively. You can start an   interactive session with the USERNAME and PASSWORD stored in   my\\\_credentials.py by running.. code:: bash    PYTHONPATH=. okcupyd --credentials my_credentialsfrom the directory that my\_credentials.py is stored inThe PYTHONPATH=. at the front of this command is necessary to ensurethat the current directory is searched for modules.If you wish to use a version of this library that you have cloned butnot installed, you can use the tox environment venv to do the same thingwith such a version of the code:.. code:: bash    PYTHONPATH=. tox -e venv -- okcupyd --credentials my_credentials2. Set the shell environment variables OKC\\\_USERNAME and   OKC\\\_PASSWORD to your username and password respectively. Make sure   to export the variables so they are visible in processes started from   the shell. You can make a credentials.sh file to do this using the   following template:.. code:: bash    export OKC_USERNAME='your_username'    export OKC_PASSWORD='your_password'Simply run source credentials.sh to set the environment variables andyour shell should be properly configured. Note that this approachrequires that the relevant environment variables be set beforeokcupyd.settings is imported.3. Manually override the values in okcupyd/settings.py. This method isnot recommended because it requires you to find the installationlocation of the package. Also, If you are working with a sourcecontrolled version, you could accidentally commit your credentials.Using ``--credentials`` in a custom script~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~The ~okcupyd.util.misc.add\_command\_line\_options and~okcupyd.util.misc.handle\_command\_line\_options can be used to make acustom script support the ``--credentials`` and ``--enable-loggers``command line flags. The interface to these functions is admittedly alittle bit strange. Refer to the example below for details concerninghow to use them:.. code:: python    import argparse    parser = argparse.ArgumentParser()    util.add_command_line_options(parser.add_argument)    args = parser.parse_args()    util.handle_command_line_options(args)Basic Examples--------------All examples in this section assume that the variable u has beeninitialized as follows:.. code:: python    import okcupyd    user = okcupyd.User()Searching profiles~~~~~~~~~~~~~~~~~~To search through the user:.. code:: python    profiles = user.search(age_min=26, age_max=32)    for profile in profiles[:10]:        profile.message(&quot;Pumpkins are just okay.&quot;)To search for users that have answered a particular question in a waythat is consistent with the user's preferences for that question:.. code:: python    user_question = user.questions.very_important[0]    profiles = user.search(question=user_question)    for profile in profiles[:10]:        their_question = profile.find_question(user_question.id)        profile.message(&quot;I'm really glad that you answered {0} to {1}&quot;.format(            their_question.their_answer, their_question.question.text        ))The search functionality can be accessed without a ~okcupyd.user.Userinstance:.. code:: python    from okcupyd.search import SearchFetchable    for profile in SearchFetchable(attractiveness_min=8000)[:5]:        profile.message(&quot;hawt...&quot;)This is particularly useful if you want to explicitly provide thesession that should be used to search:.. code:: python    from okcupyd.session import Session    from okcupyd.search import SearchFetchable    session = Session.login('username', 'password')    for profile in SearchFetchable(session=session, attractiveness_min=8000)[:5]:        profile.message(&quot;hawt...&quot;)For more details about what filter arguments can be used with thesesearch functions, see the doucmentation for~okcupyd.search.SearchFetchableMessaging another user~~~~~~~~~~~~~~~~~~~~~~.. code:: python    user.message('foxylady899', 'Do you have a map?')    # This has slightly different semantics; it will not look through the user's    # inbox for an existing thread.    user.get_profile('foxylady889').message('Do you have a map?')Rating a profile~~~~~~~~~~~~~~~~.. code:: python    user.get_profile('foxylady899').rate(5)Mailbox~~~~~~~.. code:: python    first_thread = user.inbox[0]    print(first_thread.messages)Quickmatch, Essays, Looking For, Details~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~You can access the essays, looking for attributes and detail attributesof a profile very easily.. code:: python    profile = user.quickmatch()    print(profile.essays.self_summary)    print(profile.looking_for.ages)    print(profile.details.orientation)The data for these attributes is loaded from the profile page, but itshould be noted that this page is only loaded on demand, so the first ofthese attribute access calls will make an http request.A logged in user can update their own details using these objects:.. code:: python    user.profile.essays.self_summary = &quot;I'm pretty boring.&quot;    user.profile.looking_for.ages = 18, 19    user.profile.details.ethnicities = ['asian', 'black', 'hispanic']These assignments will result in updates to the okcupid website. Whenthese updates happen, subsequent access to any profile attribute willresult in a new http request to reload the profile page.Fetchable~~~~~~~~~Most of the collection objects that are returned from functioninvocations in the okcupyd library are instances of~okcupyd.util.fetchable.Fetchable. In most cases, it is fine to treatthese objects as though they are lists because they can be iteratedover, sliced and accessed by index, just like lists:.. code:: python    for question in user.profile.questions:        print(question.answer.text)    a_random_question = user.profile.questions[2]    for question in questions[2:4]:        print(question.answer_options[0])However, in some cases, it is important to be aware of the subtledifferences between ~okcupyd.util.fetchable.Fetchable objects and pythonlists. ~okcupyd.util.fetchable.Fetchable construct the elements thatthey &quot;contain&quot; lazily. In most of its uses in the okcupyd library, thismeans that http requests can be made to populate~okcupyd.util.fetchable.Fetchable instances as its elments arerequested.The ~okcupyd.profile.Profile.questions ~okcupyd.util.fetchable.Fetchablethat is used in the example above fetches the pages that are used toconstruct its contents in batches of 10 questions. This means that theactual call to retrieve data is made when iteration starts. If youenable the request logger when you run this code snippet, you get outputthat illustrates this fact:``{.sourceCode .} 2014-10-29 04:25:04 Livien-MacbookAir requests.packages.urllib3.connectionpool[82461] DEBUG &quot;GET /profile/ShrewdDrew/questions?leanmode=1&amp;low=11 HTTP/1.1&quot; 200 None  Yes  Yes  Kiss someone.  Yes.  Yes  Sex.  Both equally  No, I wouldn't give it as a gift.  Maybe, I want to know all the important stuff.  Once or twice a week  2014-10-29 04:25:04 Livien-MacbookAir requests.packages.urllib3.connectionpool[82461] DEBUG &quot;GET /profile/ShrewdDrew/questions?leanmode=1&amp;low=21 HTTP/1.1&quot; 200 None  No.  No  No  Yes  Rarely / never  Always.  Discovering your shared interests  The sun  Acceptable.  No.``Some fetchables will continue fetching content for quite a long time.The search fetchable, for example, will fetch content until okcupid runsout of search results. As such, things like:.. code:: python    for profile in user.search():        profile.message(&quot;hey!&quot;)should be avoided, as they are likely to generate a massive number ofrequests to okcupid.com.Another subtlety of the ~okcupyd.util.fetchable.Fetchable class is thatits instances cache its contained results. This means that the seconditeration over okcupyd.profile.Profile.questions in the example belowdoes not result in any http requests:.. code:: python    for question in user.profile.questions:        print(question.text)    for question in user.profile.questions:        print(question.answer)It is important to understand that this means that the contents of a~okcupyd.util.fetchable.Fetchable are not guarenteed to be in sync withokcupid.com the second time they are requested. Calling~okcupyd.util.fetchable.Fetchable.refresh will cause the~okcupyd.util.fetchable.Fetchable to request new data from okcupid.comwhen its contents are requested. The code snippet that follows printsout all the questions that the logged in user has answered roughly onceper hour, including ones that are answered while the program is running... code:: python    import time    while True:        for question in user.profile.questions:            print(question.text)        user.profile.questions.refresh()        time.sleep(3600)Without the call to user.profile.questions.refresh(), this program wouldnever update the user.profile.questions instance, and thus what would beprinted to the screen with each iteration of the for loop.Development-----------tox~~~If you wish to contribute to this project, it is recommended that youuse tox to run tests and enter the interactive environment. You can gettox by running.. code:: bash    pip install toxif you do not already have it.Once you have cloned the project and installed tox, run:.. code:: bash    tox -e py27This will create a virtualenv that has all dependencies as well as theuseful ipython and ipdb libraries installed, and run all okcupyds testsuite.If you want to run a command with access to a virtualenv that wascreated by tox you can run.. code:: bash    tox -e venv -- your_commandTo use the development version of the interactive shell (and avoid anyconflicts with versions installed in site-packages) you would run thefollowing command:.. code:: bash    tox -e venv -- okcupydgit hooks~~~~~~~~~If you plan on editing this file (getting\_started.rst) you must installthe provided git hooks that are included in this repository by running:.. code:: bash    bin/create-githook-symlinks.shfrom the root directory of the repository... |Latest PyPI version| image:: https://pypip.in/v/okcupyd/badge.png   :target: https://pypi.python.org/pypi/okcupyd/.. |Build Status| image:: https://travis-ci.org/IvanMalison/okcupyd.svg?branch=master   :target: https://travis-ci.org/IvanMalison/okcupyd.. |Documentation Status| image:: https://readthedocs.org/projects/okcupyd/badge/?version=latest   :target: http://okcupyd.readthedocs.org/en/latest/</longdescription>
</pkgmetadata>