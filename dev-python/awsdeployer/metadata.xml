<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># AWSDeployerCollection of some scripts to automate AWS Lambda deployments. They are useful for quick development and deployment of AWS Lambda functions and layers, as well as a REST API Gateway integration.Just set your working directory, your __awsdeployer__ configs and you should be good to focus on actual development.Currently only supporting Python lambda functions.---## Lambda DeployerEasily deploy Lambda functions and their layers.### UsageThese scripts assume a working directory like that of sample_lambda:* `awsdeployer.ini` file with your secrets (see sample file)* `awsdeployer_lambda.json` with your layer and function configurations* `function_name.py` files, one for each of your Lambda functionsThe executable is `lambda`, which accepts the following commands:* `$ lambda layer &lt;layer-name&gt;`: deploy layer &quot;layer-name&quot; into AWS (requires docker to build)* `$ lambda config [&lt;function-name&gt;]`: update all function configs in AWS (specify a function name to only update that function's configs); non-existing functions are created (default Lambda IAM permissions)* `$ lambda &lt;function-name&gt;`: if no option above is matched, the specified function has its code and configs updated **(probably the most common case)**; non-existing functions are created (default Lambda IAM permissions)Tip: all &lt;function-name&gt; parameters can be replaced by a __shorthand__, which you can specify in your `awsdeployer_lambda.json`.### Configs* `main_file`: specify the main function file (if not present, function_name.py is assumed)* `additional_files`: additional files to include with the main function file in the deployment### Environment packagesIf you need to add the same set of variables to multiple functions (eg. database configurations) you can define a global pack of environment variables that you can then reference in each function that needs it. Example in samples/lambda/awsdeployer_lambda.json### Special layer buildingIf you need to build a specific package for your layer (eg. psycopg2) you can use pre and post build hooks for the layer build, and add docker arguments to the command.To build psycopg2 compile it separately, then use these configs:```&quot;layer_configs&quot;: {    &quot;psycopg2layer&quot;: {        &quot;requirements_file&quot;: &quot;requirements.txt&quot;,        &quot;requirements_ignore&quot;: [&quot;psycopg2&quot;],        &quot;build_args&quot;: &quot;-v ~/psycopg2-build:/bar&quot;,        &quot;pre_build_command&quot;: &quot;echo 'Something before pip'&quot;,        &quot;post_build_command&quot;: &quot;cp -r /bar /foo/python/psycopg2&quot;,        &quot;common&quot;: true    }}```---## API Gateway DeployerEasily deploy API gateway, handling input parameters and error codes, so you can focus on the code.### UsageThese scripts assume a working directory like that of sample_apigateway:* `awsdeployer.ini` file with your secrets (see sample file)* `awsdeployer_api.json` with your API definition in JSON (NOT nested!)* `function_xxxx.py` files, one for each of your Lambda functions associated with the endpointsThe `apigateway` executable accepts two commands:* `$ apigateway all`: deploy the full API (destroys already existing ones)* `$ apigateway &lt;method&gt; &lt;path&gt;`: deploy a single method (also destroys already existing ones)The script also helps automating HTTP error codes, which you can find in `status_codes.md`. They are automaticallydeployed into API Gateway and caught by it, as long as you import the `awsdeployer` package, as seen in `sample_apigateway/get.py`.If you're not using Python, your errors should follow the following JSON syntax to be caught effectively:```{    'gatewayResponse': True,    'status': 'error',    'type': _status_code_from_md_file,    'userMessage': your_user_message_which_can_be_empty}```</longdescription>
</pkgmetadata>