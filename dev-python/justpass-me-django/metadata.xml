<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>## Django Client for justpass.me1. Install the justpassme app    * For django 2.2, use justpass-me-django&lt;3.0.0    * For django 3.1+, use justpass-me-django&gt;3.0.0       ```sh   pip install justpass-me-django   ```2. Add the following to your INSTALLED_APPS    ```python   INSTALLED_APPS = [    '....'   'mozilla_django_oidc',    'justpassme',   '....'   ]    ```2. Add the following to `settings.py`   ```python   AUTHENTICATION_BACKENDS = (    'justpassme.OIDC_CLIENT.OIDCUserFinder',    'django.contrib.auth.backends.ModelBackend',    )   SITE_URL = YOUR_SITE_URL   #Your full site url   OIDC_USERNAME_FIELD = &quot;username&quot;   # The field to use to create users on justpass.me   LOGIN_URL = &quot;/accounts/login/&quot;     # Your login view as usual   OIDC_RP_CLIENT_ID = &quot;app.client_id&quot;      # client_id from justpass.me   OIDC_RP_CLIENT_SECRET=&quot;app.client_secret&quot; # client_secret from justpass.me   OIDC_OP_URL= &quot;https://organization_domain.accounts.justpass.me/openid/&quot; #Put your organization domain on justpass.me   OIDC_RP_SCOPES= &quot;openid&quot;   OIDC_RP_SIGN_ALGO = 'HS256'   OIDC_STORE_ID_TOKEN = True   OIDC_OP_JWKS_ENDPOINT=OIDC_OP_URL  +&quot;jwks&quot;   OIDC_OP_AUTHORIZATION_ENDPOINT=OIDC_OP_URL + &quot;authorize/&quot;   OIDC_OP_TOKEN_ENDPOINT = OIDC_OP_URL +&quot;token/&quot;   OIDC_OP_USER_ENDPOINT = OIDC_OP_URL + &quot;userinfo/&quot;   OIDC_CALLBACK_CLASS= &quot;justpassme.OIDC_CLIENT.Callback&quot;   OIDC_AUTHENTICATE_CLASS = &quot;justpassme.OIDC_CLIENT.Authenticate&quot;   LOGIN_REDIRECT_URL_FAILURE=&quot;/justpass/failure/&quot;   LOGIN_REDIRECT_URL = &quot;/justpass/success/&quot;   # If your application uses SSL.   USE_X_FORWARDED_HOST = True   SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')   # Provide the following functions that will be called when event is triggered, check example functions below   REGISTRATION_SUCCESS = &quot;Your_App.justpass.reg_success&quot;   REGISTRATION_FAILURE = &quot;Your_App.justpass.reg_failure&quot;   AUTHENTICATION_SUCCESS = &quot;Your_App.justpass.auth_success&quot;   AUTHENTICATION_FAILURE = &quot;Your_App.justpass.auth_failure&quot;   ```3. Add `justpass` to your urls   ```python    urls_patterns= [   '...',   path(r'justpass/', include('justpassme.urls')),   path('oidc/',include('mozilla_django_oidc.urls')),   '....',    ]    ```4. To start registration, redirct to  `justpass:start_reg`5. To start login, redirect to `justpass:start_login`   **Note:** For 2nd factor, The function expects the user's username to be in `request.session[&quot;base_username&quot;]`6. Write 4 functions that handle the success and failure of registration and login, refer to them in the `settings.py`    You can use the four functions below as a reference.   ```python   def auth_success(request):      return redirect('home')            def auth_failure(request):     return render(request, 'login.html', {&quot;failed&quot;: True})            def reg_success(request):      request.user.mfa_enabled = True      request.user.save()      request.session[&quot;reg&quot;] = True      return redirect('home')         def reg_failure(request):      request.session[&quot;reg&quot;] = False      return redirect('home')   ```   ## Note:  If you use justpass.me as 2nd factorBreak your login function, Usually your login function will check for username and password, log the user in if the username and password are correct and create the user session, to support justpass.me, this has to change      * authenticate the user   * if username and password are correct , check if the user has mfa or not       * if user has mfa then redirect to justpass.me       * if user doesn't have mfa then call your function to create the user session</longdescription>
</pkgmetadata>