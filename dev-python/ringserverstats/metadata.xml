<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># ringserverstatsParse ringserver reports, compute statistics and store in influxdb.![ringserver activity](https://github.com/resif/ringserver-stats/raw/master/images/2019-02-25_09-30.png)![ringserver statistics by day](https://github.com/resif/ringserver-stats/raw/master/images/2019-02-25_09-30_1.png)![ringserver statistics by month](https://github.com/resif/ringserver-stats/raw/master/images/2019-02-25_09-31.png)## Installationringserverstats is distributed on PyPI https://pypi.org as a universal wheel.``` bash    $ pip install ringserverstats```## Postgresql preparation``` sqlCREATE ROLE resifstats WITH LOGIN PASSWORD 'md5xxxxxxxxxx';CRATE DATABASE resifstats OWNER resifstats;\c resifstatsCREATE EXTENSION timescaledb```Then go for the migrations :``` bash$ yoyo apply --database postgresql://resifstats@resif-pgdev.u-ga.fr:5433/resifstats -m migrations```## Docker```docker build -t ringserverstats:latestdocker run --rm -p 8000:8000 -e DATABASE_URI=postgresql://resifstats@resif-pgdev.u-ga.fr:5433/resifstats ringserverstats:latest```## UsageTo work properly, this program needs the environment variable `DATABASE_URI` pointing to a valip postgresql URI### Command line interface``` bash$ pip install --user ringserverstats$ ringserverstats txlogs.log```### Web applicationFor development :```cd webappFLASK_ENV=development FLASK_APP=webapp.py flask run```In production, use with gunicorn :```pip install gunicorncd ringserverstatsgunicorn -b 0.0.0.0:8000 webapp```To send date :```http localhost:8000 &lt; txlogs.logwget --post-file txlogs.log localhost:8000```## ExplanationsThe TX logs from ringserver are metrics suitable for a timeserie database. The idea is to parse the logs, as in the exemple below, and to generate values to insert into an influxdb timeseries database.The file `grafana-dashboard.json` can be imported into grafana to visualize this timeserie.### EventsThe ringserverevents measure has several tags :  * network, station, location, channel : which data was requested  * geohash : location of the client in geohash format  * hosthash : a hash of the client ip (usefull to correlate the clients requests)  * city : an english city name### Grouping and downsamplingTo achieve downsampling, we use timescaledb's continuous query.## License`ringserverstats` is distributed under the terms of the GPL v3 or later. See LICENSE file.## Build``` shellpython3 setup.py sdist bdist_wheel```## Test``` shelltox```</longdescription>
</pkgmetadata>