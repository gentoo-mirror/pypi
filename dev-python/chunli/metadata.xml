<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># chunli&lt;p align=&quot;center&quot; style=&quot;margin: 3em&quot;&gt;  &lt;a href=&quot;https://github.com/dutradda/chunli&quot;&gt;    &lt;img src=&quot;https://dutradda.github.io/chunli/chunli.gif&quot; alt=&quot;chunli&quot; width=&quot;300&quot;/&gt;  &lt;/a&gt;&lt;/p&gt;&lt;p align=&quot;center&quot;&gt;    &lt;em&gt;Distributed load test application&lt;/em&gt;&lt;/p&gt;---**Documentation**: &lt;a href=&quot;https://dutradda.github.io/chunli&quot; target=&quot;_blank&quot;&gt;https://dutradda.github.io/chunli&lt;/a&gt;**Source Code**: &lt;a href=&quot;https://github.com/dutradda/chunli&quot; target=&quot;_blank&quot;&gt;https://github.com/dutradda/chunli&lt;/a&gt;---## Key Features- Distributed load test application- Receive file with urls- Receive file with json lines- Receive python scripts **\* feature in development.*## Requirements - Python 3.8+## Instalation```$ pip install chunli```## Basic ExampleRunning the server (needs uvicorn [installed](https://www.uvicorn.org)):```bashuvicorn chunli:app```Create chunli's input file (needs gzip [installed](https://www.gzip.org)):```bashecho http://localhost:8001/hello | gzip &gt; /tmp/hello-call.gzzcat /tmp/hello-call.gz```Start chunli's job (needs curl [installed](https://curl.haxx.se/docs/install.html)):```bashcurl -X POST \    -i 'http://localhost:8000/run?duration=3&amp;rps_per_node=1' \    --upload-file /tmp/hello-call.gz``````HTTP/1.1 100 ContinueHTTP/1.1 202 Accepteddate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 159{&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;running&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```Gets chunli's job results:```bashsleep 5 &amp;&amp; \    curl -i 'http://localhost:8000/run?task_id=4ee301eb-6487-48a0-b6ed-e5f576accfc2'``````HTTP/1.0 200 OKdate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 409{&quot;end_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;result&quot;:{&quot;duration&quot;:1.0,&quot;rampup_time&quot;:0,&quot;requested_rps_per_node&quot;:1.0,&quot;realized_requests&quot;:1.0,&quot;realized_rps&quot;:1.0,&quot;latency&quot;:{&quot;mean&quot;:1.0,&quot;median&quot;:1.0,&quot;percentile99&quot;:1.0,&quot;percentile95&quot;:1.0},&quot;error&quot;:null,&quot;nodes_quantity&quot;:1,&quot;errors_count&quot;:0},&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;finished&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```## Ramp-up ExampleRunning the server```bashuvicorn chunli:app```Create chunli's input file:```bashecho http://localhost:8001/hello | gzip &gt; /tmp/hello-call.gzzcat /tmp/hello-call.gz```Start chunli's job:```bashcurl -X POST \    -i 'http://localhost:8000/run?duration=10&amp;rps_per_node=10&amp;rampup_time=5' \    --upload-file /tmp/hello-call.gz``````HTTP/1.1 100 ContinueHTTP/1.1 202 Accepteddate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 159{&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;running&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```Gets chunli's job results:```bashsleep 12 &amp;&amp; \    curl -i 'http://localhost:8000/run?task_id=4ee301eb-6487-48a0-b6ed-e5f576accfc2'``````HTTP/1.0 200 OKdate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 409{&quot;end_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;result&quot;:{&quot;duration&quot;:10.0,&quot;rampup_time&quot;:5,&quot;requested_rps_per_node&quot;:10.0,&quot;realized_requests&quot;:73.0,&quot;realized_rps&quot;:7.3,&quot;latency&quot;:{&quot;mean&quot;:1.0,&quot;median&quot;:1.0,&quot;percentile99&quot;:1.0,&quot;percentile95&quot;:1.0},&quot;error&quot;:null,&quot;nodes_quantity&quot;:1,&quot;errors_count&quot;:0},&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;finished&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```## Json Lines ExampleRunning the server:```bashuvicorn chunli:app```Create chunli's input file:```bashecho '{&quot;url&quot;:&quot;http://localhost:8001/hello&quot;}{&quot;url&quot;:&quot;http://localhost:8001/hello&quot;,&quot;method&quot;:&quot;GET&quot;}' \    | gzip &gt; /tmp/hello-call.gzzcat /tmp/hello-call.gz```Start chunli's job:```bashcurl -X POST \    -i 'http://localhost:8000/run?duration=1&amp;rps_per_node=10' \    --upload-file /tmp/hello-call.gz``````HTTP/1.1 100 ContinueHTTP/1.1 202 Accepteddate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 159{&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;running&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```Gets chunli's job results:```bashsleep 3 &amp;&amp; \    curl -i 'http://localhost:8000/run?task_id=4ee301eb-6487-48a0-b6ed-e5f576accfc2'``````HTTP/1.0 200 OKdate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 409{&quot;end_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;result&quot;:{&quot;duration&quot;:1.0,&quot;rampup_time&quot;:0,&quot;requested_rps_per_node&quot;:1.0,&quot;realized_requests&quot;:1.0,&quot;realized_rps&quot;:1.0,&quot;latency&quot;:{&quot;mean&quot;:1.0,&quot;median&quot;:1.0,&quot;percentile99&quot;:1.0,&quot;percentile95&quot;:1.0},&quot;error&quot;:null,&quot;nodes_quantity&quot;:1,&quot;errors_count&quot;:0},&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;finished&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```## Json Array Lines ExampleRunning the server:```bashuvicorn chunli:app```Create chunli's input file:```bashecho '[{&quot;url&quot;:&quot;http://localhost:8001/hello&quot;}][{&quot;url&quot;:&quot;http://localhost:8001/hello&quot;,&quot;method&quot;:&quot;GET&quot;}]' \    | gzip &gt; /tmp/hello-call.gzzcat /tmp/hello-call.gz```Start chunli's job:```bashcurl -X POST \    -i 'http://localhost:8000/run?duration=1&amp;rps_per_node=10' \    --upload-file /tmp/hello-call.gz``````HTTP/1.1 100 ContinueHTTP/1.1 202 Accepteddate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 159{&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;running&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```Gets chunli's job results:```bashsleep 3 &amp;&amp; \    curl -i 'http://localhost:8000/run?task_id=4ee301eb-6487-48a0-b6ed-e5f576accfc2'``````HTTP/1.0 200 OKdate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 409{&quot;end_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;result&quot;:{&quot;duration&quot;:1.0,&quot;rampup_time&quot;:0,&quot;requested_rps_per_node&quot;:1.0,&quot;realized_requests&quot;:1.0,&quot;realized_rps&quot;:1.0,&quot;latency&quot;:{&quot;mean&quot;:1.0,&quot;median&quot;:1.0,&quot;percentile99&quot;:1.0,&quot;percentile95&quot;:1.0},&quot;error&quot;:null,&quot;nodes_quantity&quot;:1,&quot;errors_count&quot;:0},&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;finished&quot;,&quot;signature&quot;:&quot;73b40a62fb5e&quot;,&quot;args_signature&quot;:null}```## Python Script ExampleRunning the server:```bashuvicorn chunli:app```Create chunli's input script:```python# /tmp/get_calls_block.pyfrom typing import Generatorfrom chunli.call import Callglobal get_calls_blockdef get_calls_block() -&gt; Generator[Call, None, None]:    yield Call(        url='http://localhost:8001/hello',        method='GET',        headers=None,        body=None,    )```Start chunli's job:```bashcurl -X POST \    -i 'http://localhost:8000/script?duration=1&amp;rps_per_node=10' \    --upload-file /tmp/get_calls_block.py``````HTTP/1.1 100 ContinueHTTP/1.1 202 Accepteddate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 159{&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;running&quot;,&quot;signature&quot;:&quot;0ecc7ebf73bc&quot;,&quot;args_signature&quot;:null}```Gets chunli's job results:```bashsleep 3 &amp;&amp; \    curl -i 'http://localhost:8000/script?task_id=4ee301eb-6487-48a0-b6ed-e5f576accfc2'``````HTTP/1.0 200 OKdate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 409{&quot;end_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;result&quot;:{&quot;duration&quot;:1.0,&quot;rampup_time&quot;:0,&quot;requested_rps_per_node&quot;:1.0,&quot;realized_requests&quot;:1.0,&quot;realized_rps&quot;:1.0,&quot;latency&quot;:{&quot;mean&quot;:1.0,&quot;median&quot;:1.0,&quot;percentile99&quot;:1.0,&quot;percentile95&quot;:1.0},&quot;error&quot;:null,&quot;nodes_quantity&quot;:1,&quot;errors_count&quot;:0},&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;finished&quot;,&quot;signature&quot;:&quot;0ecc7ebf73bc&quot;,&quot;args_signature&quot;:null}```## Python Script With Body ExampleRunning the server:```bashuvicorn chunli:app```Create chunli's input script:```python# /tmp/get_calls_block_body.pyfrom typing import Generatorfrom chunli.call import Callglobal get_calls_blockdef get_calls_block() -&gt; Generator[Call, None, None]:    yield Call(        url='http://localhost:8001/hello-body',        method='POST',        headers=None,        body={'name': 'Me!'},    )```Start chunli's job:```bashcurl -X POST \    -i 'http://localhost:8000/script?duration=1&amp;rps_per_node=10' \    --upload-file /tmp/get_calls_block_body.py``````HTTP/1.1 100 ContinueHTTP/1.1 202 Accepteddate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 159{&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;running&quot;,&quot;signature&quot;:&quot;0ecc7ebf73bc&quot;,&quot;args_signature&quot;:null}```Gets chunli's job results:```bashsleep 3 &amp;&amp; \    curl -i 'http://localhost:8000/script?task_id=4ee301eb-6487-48a0-b6ed-e5f576accfc2'``````HTTP/1.0 200 OKdate: Thu, 1st January 1970 00:00:00 GMTserver: uvicorncontent-type: application/jsoncontent-length: 409{&quot;end_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;result&quot;:{&quot;duration&quot;:1.0,&quot;rampup_time&quot;:0,&quot;requested_rps_per_node&quot;:1.0,&quot;realized_requests&quot;:1.0,&quot;realized_rps&quot;:1.0,&quot;latency&quot;:{&quot;mean&quot;:1.0,&quot;median&quot;:1.0,&quot;percentile99&quot;:1.0,&quot;percentile95&quot;:1.0},&quot;error&quot;:null,&quot;nodes_quantity&quot;:1,&quot;errors_count&quot;:0},&quot;task_id&quot;:&quot;4ee301eb-6487-48a0-b6ed-e5f576accfc2&quot;,&quot;start_time&quot;:&quot;1970-01-01T00:00:00+00:00&quot;,&quot;status&quot;:&quot;finished&quot;,&quot;signature&quot;:&quot;0ecc7ebf73bc&quot;,&quot;args_signature&quot;:null}```</longdescription>
</pkgmetadata>