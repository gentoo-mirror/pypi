<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Spacy Entity Linker## IntroductionSpacy Entity Linker is a pipeline for spaCy that performs Linked Entity Extraction with Wikidata on a given Document.The Entity Linking System operates by matching potential candidates from each sentence(subject, object, prepositional phrase, compounds, etc.) to aliases from Wikidata. The package allows to easily find thecategory behind each entity (e.g. &quot;banana&quot; is type &quot;food&quot; OR &quot;Microsoft&quot; is type &quot;company&quot;). It can is therefore usefulfor information extraction tasks and labeling tasks.The package was written before a working Linked Entity Solution existed inside spaCy. In comparison to spaCy's linkedentity system, it has the following advantages:- no extensive training required (entity-matching via database)- knowledge base can be dynamically updated without retraining- entity categories can be easily resolved- grouping entities by categoryIt also comes along with a number of disadvantages:- it is slower than the spaCy implementation due to the use of a database for finding entities- no context sensitivity due to the implementation of the &quot;max-prior method&quot; for entitiy disambiguation (an improved  method for this is in progress)## InstallationTo install the package, run:```bashpip install spacy-entity-linker```Afterwards, the knowledge base (Wikidata) must be downloaded. This can be either be done by manually calling```bashpython -m spacy_entity_linker &quot;download_knowledge_base&quot;```or when you first access the entity linker through spacy.This will download and extract a ~1.3GB file that contains a preprocessed version of Wikidata.## Use```pythonimport spacy  # version 3.0.6'# initialize language modelnlp = spacy.load(&quot;en_core_web_md&quot;)# add pipeline (declared through entry_points in setup.py)nlp.add_pipe(&quot;entityLinker&quot;, last=True)doc = nlp(&quot;I watched the Pirates of the Caribbean last silvester&quot;)# returns all entities in the whole documentall_linked_entities = doc._.linkedEntities# iterates over sentences and prints linked entitiesfor sent in doc.sents:    sent._.linkedEntities.pretty_print()# OUTPUT:# https://www.wikidata.org/wiki/Q194318     Pirates of the Caribbean        Series of fantasy adventure films                                                                   # https://www.wikidata.org/wiki/Q12525597   Silvester                       the day celebrated on 31 December (Roman Catholic Church) or 2 January (Eastern Orthodox Churches)  ```### EntityCollectioncontains an array of entity elements. It can be accessed like an array but also implements the following helperfunctions:- &lt;code&gt;pretty_print()&lt;/code&gt; prints out information about all contained entities- &lt;code&gt;print_super_classes()&lt;/code&gt; groups and prints all entites by their super class```pythondoc = nlp(&quot;Elon Musk was born in South Africa. Bill Gates and Steve Jobs come from the United States&quot;)doc._.linkedEntities.print_super_entities()# OUTPUT:# human (3) : Elon Musk,Bill Gates,Steve Jobs# country (2) : South Africa,United States of America# sovereign state (2) : South Africa,United States of America# federal state (1) : United States of America# constitutional republic (1) : United States of America# democratic republic (1) : United States of America```### EntityElementeach linked Entity is an object of type &lt;code&gt;EntityElement&lt;/code&gt;. Each entity contains the methods- &lt;code&gt;get_description()&lt;/code&gt; returns description from Wikidata- &lt;code&gt;get_id()&lt;/code&gt; returns Wikidata ID- &lt;code&gt;get_label()&lt;/code&gt; returns Wikidata label- &lt;code&gt;get_span()&lt;/code&gt; returns the span from the spacy document that contains the linked entity- &lt;code&gt;get_url()&lt;/code&gt; returns the url to the corresponding Wikidata item- &lt;code&gt;pretty_print()&lt;/code&gt; prints out information about the entity element- &lt;code&gt;get_sub_entities(limit=10)&lt;/code&gt; returns EntityCollection of all entities that derive from the current  entityElement (e.g. fruit -&gt; apple, banana, etc.)- &lt;code&gt;get_super_entities(limit=10)&lt;/code&gt; returns EntityCollection of all entities that the current entityElement  derives from (e.g. New England Patriots -&gt; Football Team))## ExampleIn the following example we will use SpacyEntityLinker to find find the mentioned Football Team in our text and exploreother football teams of the same type```pythondoc = nlp(&quot;I follow the New England Patriots&quot;)patriots_entity = doc._.linkedEntities[0]patriots_entity.pretty_print()# OUTPUT:# https://www.wikidata.org/wiki/Q193390     # New England Patriots            # National Football League franchise in Foxborough, Massachusetts                    football_team_entity = patriots_entity.get_super_entities()[0]football_team_entity.pretty_print()# OUTPUT:# https://www.wikidata.org/wiki/Q17156793 # American football team          # organization, in which a group of players are organized to compete as a team in American football   for child in football_team_entity.get_sub_entities(limit=32):    print(child)    # OUTPUT:    # New Orleans Saints    # New York Giants    # Pittsburgh Steelers    # New England Patriots    # Indianapolis Colts    # Miami Seahawks    # Dallas Cowboys    # Chicago Bears    # Washington Redskins    # Green Bay Packers    # ...```### Entity Linking PolicyCurrently the only method for choosing an entity given different possible matches (e.g. Paris - city vs Paris -firstname) is max-prior. This method achieves around 70% accuracy on predicting the correct entities behind linkdescriptions on wikipedia.## NoteThe Entity Linker at the current state is still experimental and should not be used in production mode.## PerformanceThe current implementation supports only Sqlite. This is advantageous for development because it does not requirementany special setup and configuration. However, for more performance critical usecases, a different database within-memory access (e.g. Redis) should be used. This may be implemented in the future.## Datathe knowledge base was derived from this dataset: https://www.kaggle.com/kenshoresearch/kensho-derived-wikimedia-dataIt was cleaned and post-procesed, including filtering out entities of &quot;overrepresented&quot; categories such as  * village in China  * train stations  * stars in the Galaxy  * etc.  The purpose behind the knowledge base cleaning was to reduce the knowledge base size, while keeping the most useful entities for general purpose applications.Currently, the only way to change the knowledge base is a bit hacky and requires to replace or modify the underlying sqlite database. You will find it under &lt;code&gt;site_packages/data_spacy_entity_linker/wikidb_filtered.db&lt;/code&gt;. The database contains 3 tables:* &lt;b&gt;aliases&lt;/b&gt;  * en_alias (english alias)  * en_alias_lowercase (english alias lowercased)* &lt;b&gt;joined&lt;/b&gt;  * en_label (label of the wikidata item)  * views (number of views of the corresponding wikipedia page (in a given period of time))  * inlinks (number of inlinks to the corresponding wikipedia page)  * item_id (wikidata id)  * description (description of the wikidata item)* &lt;b&gt;statements&lt;/b&gt;  * source_item_id (references item_id)  * target_item_id (references item_id)  * edge_property_id      * 279=subclass of (https://www.wikidata.org/wiki/Property:P279)      * 31=instance of (https://www.wikidata.org/wiki/Property:P31)      * 361=part of (https://www.wikidata.org/wiki/Property:P361)## Versions:- &lt;code&gt;spacy_entity_linker&gt;=0.0&lt;/code&gt; (requires &lt;code&gt;spacy&gt;=2.2,&lt;3.0&lt;/code&gt;)- &lt;code&gt;spacy_entity_linker&gt;=1.0&lt;/code&gt; (requires &lt;code&gt;spacy&gt;=3.0&lt;/code&gt;)## TODO- [ ] implement Entity Classifier based on sentence embeddings for improved accuracy- [ ] implement get_picture_urls() on EntityElement- [ ] retrieve statements for each EntityElement (inlinks + outlinks)</longdescription>
</pkgmetadata>