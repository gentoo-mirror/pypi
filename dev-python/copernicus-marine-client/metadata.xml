<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Copernicus Marine Service clientA library to facilitate the access of Copernicus Marine Service products and datasets.## IntroductionThis package allows to recover products and datasets information from Command Line Interface or with Python code,as well as download subsets and native files.## Command Line Interface (CLI)### Command *describe*Retrieve information about all products as JSON:```txt&gt; copernicus-marine describe{  &quot;products&quot;: [    {      &quot;title&quot;: &quot;Antarctic Sea Ice Extent from Reanalysis&quot;,      &quot;product_id&quot;: &quot;ANTARCTIC_OMI_SI_extent&quot;,      &quot;thumbnail_url&quot;: &quot;https://catalogue.marine.copernicus.eu/documents/IMG/ANTARCTIC_OMI_SI_extent.png&quot;,      &quot;production_center&quot;: &quot;Mercator Oc\u00e9an International&quot;,      &quot;creation_datetime&quot;: &quot;2018-02-12&quot;,      &quot;modified_datetime&quot;: &quot;2018-02-12&quot;,    }    ...  ]}```Retrieve all information about datasets as JSON:```txt&gt; copernicus-marine describe --include-datasets{  &quot;products&quot;: [    {      &quot;title&quot;: &quot;Antarctic Sea Ice Extent from Reanalysis&quot;,      &quot;product_id&quot;: &quot;ANTARCTIC_OMI_SI_extent&quot;,      &quot;thumbnail_url&quot;: &quot;https://catalogue.marine.copernicus.eu/documents/IMG/ANTARCTIC_OMI_SI_extent.png&quot;,      &quot;production_center&quot;: &quot;Mercator Oc\u00e9an International&quot;,      &quot;creation_datetime&quot;: &quot;2018-02-12&quot;,      &quot;modified_datetime&quot;: &quot;2018-02-12&quot;,      &quot;datasets&quot;: [        {          &quot;dataset_id&quot;: &quot;antarctic_omi_si_extent&quot;,          &quot;dataset_name&quot;: &quot;antarctic_omi_si_extent&quot;,          &quot;services&quot;: [            {              &quot;protocol&quot;: &quot;ftp&quot;,              &quot;uri&quot;: &quot;ftp://my.cmems-du.eu/Core/ANTARCTIC_OMI_SI_extent/antarctic_omi_si_extent&quot;            }          ],          &quot;variables&quot;: []        }      ]    },    ...  ]}```### Command *login*Create the configuration files for access to the copernicus marine service:'.dodsrc', '.netrc', '.motuclient-python.ini'.The directory to store these configuration files can be modified by the user using the &quot;config-file-directory&quot; optionbut beware as it should also be passed to the *subset* and *native* command afterwards.By default, if the configuration files already exist, the user is asked for confirmation to overwrite them.Example:'''&gt; copernicus marine login&lt; Username :&lt; Password :&gt; INFO     - root - Configuration files stored in ${HOME}\.copernicus_marine_client'''### Command *subset*Download a dataset subset, based on dataset id, variable names and attributes slices:```txt&gt; copernicus-marine subset -i METOFFICE-GLO-SST-L4-NRT-OBS-SST-V2 -v analysed_sst -v sea_ice_fraction -t 2021-01-01 - T 2021-01-03 -x 0.0 -X 0.1 -y 0.0 -Y 0.1&lt; Username:&lt; Password:&lt; Trying to download as one file...```File downloaded to ./{dataset_id}.{nc/zarr} if not specified otherwise (through -o/--output-directory and -f/--output-filename options). If the output-filename argument ends with '.nc' suffix, the file will be downloaded as a netCDF file.### Command *native*Download a native file (or files), based on dataset id or path to files:Example:```txt&gt; copernicus-marine native -u ftp://my.cmems-du.eu/Core/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/&lt; Username:&lt; Password:&lt; You requested the download of the following files:Core/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202207.nc - 3.27 MBCore/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202208.nc - 3.29 MBCore/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202209.nc - 3.28 MBCore/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202210.nc - 3.26 MBCore/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202211.nc - 3.26 MBCore/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202212.nc - 3.26 MBTotal size of the download: 19.62 MBDo you want to continue? [y/N]:```File(s) downloaded to ./{path}/{filename} if not specified otherwise:- &quot;--output-path&quot; specifies a directory to dump the files in- &quot;--no-directories&quot; to not recreate the folder structureIf not specified otherwise, after the header display with a summary of the request,the user is asked for confirmation:- &quot;--no-confirmation&quot; to turn down the confirmation prompt- &quot;--show-outputnames&quot; to display the full paths of the outputs filesOption `--regex TEXT` allows to specify a regular expression and select specific files. It work with both `--dataset-id` and `--dataset-url` options.**Be aware that the regular expression must match the full absolute path of the files to filter.**Example:```&gt; copernicus-marine native --login qgaudel -u ftp://my.cmems-du.eu/Core/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m --regex &quot;.*2022(08|09|10).nc&quot;Password:You requested the download of the following files:Core/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202208.nc - 3.29 MBCore/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202209.nc - 3.28 MBCore/NWSHELF_MULTIYEAR_BGC_004_011/cmems_mod_nws_bgc-pft_myint_7km-3D-diato_P1M-m/2022/metoffice_foam1_amm7_NWS_DIATO_CPWC_mm202210.nc - 3.26 MBTotal size of the download: 9.82 MBDo you want to continue? [y/N]:```### The `--help` argumentIn any case, please remember that you can call the `--help` argument on any CLI option. This may save you some time or find what you need.## Python functionsThe library also provide python functions to help with cataloguebrowsing and datasets download in scripts.### Basic exampleIn this example 4 steps are performed:  1- Fetch the catalogue to select a dataset  2- Construct a SubsetRequest for this dataset  3- Download the subset as a zarr store  4- Open the subset as an xarray dataset```pythonimport copernicus_marine_client as cmc# Step 1: Fetch catalogue and parse information on datasetcatalogue = cmc.fetch_catalogue()dataset_id = &quot;cmems_mod_ibi_bgc_anfc_0.027deg-3D_P1D-m&quot;assert dataset_id in cmc.get_all_dataset_ids()dataset = catalogue.filter([dataset_id]).products[0].datasets[0]# Object &quot;dataset&quot; can be used to display all the metadata necessary to build a SubsetRequestvariable = [    variable for variable in dataset.variables if variable.short_name in [&quot;zooc&quot;]][0]coordinates = {    coordinate.coordinates_id: (coordinate.minimum_value, coordinate.maximum_value)    for coordinate in variable.coordinates}# Step 2: Construct the request based on parsed informationsubset_request = cmc.SubsetRequest(    dataset_id=&quot;cmems_mod_ibi_bgc_anfc_0.027deg-3D_P1D-m&quot;,    start_datetime=&quot;2023-04-20&quot;,    end_datetime=&quot;2023-04-21&quot;,    minimal_latitude=30.0,    maximal_latitude=30.1,    minimal_longitude=0.1,    maximal_longitude=0.2,    minimal_depth=100,    maximal_depth=1000,    variables=[&quot;zooc&quot;],    force_protocol=&quot;zarr-map&quot;,    output_directory=&quot;data_folder&quot;,    output_filename=&quot;datastore.zarr&quot;,    assume_yes=True,)# Step 3: Download the subset based on request contentfilename = cmc.download_subset(    login=&quot;FAKE_LOGIN&quot;, password=&quot;FAKE_PASSWORD&quot;, subset_request=subset_request)# Step 4: Open the downloaded subset as an xarray datasetsubset = cmc.open_dataset(filepath=filename, engine=&quot;zarr&quot;, out_type=&quot;xarray&quot;)```## InstallationUsing pip, for example:```shellpip install copernicus-marine-client```## Technical detailsThis module is organized around two capabilities:- a catalogue, parsed from web requests, that contains informations on the available datasets- a downloader, to simplify the download of dataset files or subsetsThe catalogue can be displayed by the user and is used by the downloader to link the userrequests with files or subset of files to retrieve.The downloader will help the user download the needed datasets.A rigid format, specified in &quot;request_structure.py&quot; is used to ensure conformity of the information passed between the CLI command and the python functions.For subset command, the format is:```python@dataclassclass SubsetRequest:    dataset_url: Optional[str] = None    dataset_id: Optional[str] = None    variables: Optional[List[str]] = None    minimal_longitude: Optional[float] = None    maximal_longitude: Optional[float] = None    minimal_latitude: Optional[float] = None    maximal_latitude: Optional[float] = None    minimal_depth: Optional[float] = None    maximal_depth: Optional[float] = None    start_datetime: Optional[datetime] = None    end_datetime: Optional[datetime] = None    output_directory: Optional[str] = None    output_filename: Optional[str] = None    assume_yes: Optional[bool] = None    force_protocol: Optional[str] = None```</longdescription>
</pkgmetadata>