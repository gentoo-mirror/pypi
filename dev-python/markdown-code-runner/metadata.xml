<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># :rocket: Markdown Code Runner`markdown-code-runner` is a Python package that automatically executes code blocks within a Markdown file, including hidden code blocks, and updates the output in-place.This package is particularly useful for maintaining Markdown files with embedded code snippets, ensuring that the output displayed is up-to-date and accurate.It also enables the generation of content such as tables, plots, and other visualizations directly from the code.The package is hosted on GitHub: [https://github.com/basnijholt/markdown-code-runner](https://github.com/basnijholt/markdown-code-runner)## :star: Features- :rocket: Automatically execute code blocks, including hidden code blocks, within a Markdown file- :eyes: Allows hidden code blocks (i.e., code blocks that are not displayed in the Markdown file) to generate content like tables, plots, etc.- :snake: :shell: Works with Python and Bash code blocks- :white_check_mark: Keeps the output of the code blocks up-to-date- :octocat: Easily integrates with GitHub Actions- :tada: No external dependencies and works with Python 3.7+- :globe_with_meridians: Execute *all* languages by using the file code blocks and executing it with bash (see [Rust :crab: example](#crab-idea-6-run-a-rust-program))## :question: Problem StatementWhen creating Markdown files with code examples, it's essential to keep the output of these code snippets accurate and up-to-date.Manually updating the output can be time-consuming and error-prone, especially when working with large files or multiple collaborators.In addition, there might be cases where hidden code blocks are needed to generate content such as tables, plots, and other visualizations without displaying the code itself in the Markdown file.`markdown-code-runner` solves this problem by automatically executing the code blocks, including hidden ones, within a Markdown file and updating the output in-place.This ensures that the displayed output is always in sync with the code, and content generated by hidden code blocks is seamlessly integrated.## :books: Table of Contents&lt;!-- START doctoc generated TOC please keep comment here to allow auto update --&gt;&lt;!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --&gt;- [:computer: Installation](#computer-installation)- [:rocket: Quick Start](#rocket-quick-start)- [:snake: Python API](#snake-python-api)- [:book: Examples](#book-examples)  - [:star: Example 1: Simple code block](#star-example-1-simple-code-block)  - [:star: Example 2: Multiple code blocks](#star-example-2-multiple-code-blocks)- [:bulb: Usage Ideas](#bulb-usage-ideas)  - [:gear: Idea 1: Continuous Integration with GitHub Actions](#gear-idea-1-continuous-integration-with-github-actions)  - [:computer: Idea 2: Show command-line output](#computer-idea-2-show-command-line-output)  - [:bar_chart: Idea 3: Generating Markdown Tables](#bar_chart-idea-3-generating-markdown-tables)  - [:art: Idea 4: Generating Visualizations](#art-idea-4-generating-visualizations)  - [:page_facing_up: Idea 5: Generating a table from CSV data](#page_facing_up-idea-5-generating-a-table-from-csv-data)  - [:star: Idea 5: Displaying API data as a list](#star-idea-5-displaying-api-data-as-a-list)  - [:crab: Idea 6: Run a Rust program](#crab-idea-6-run-a-rust-program)- [:page_with_curl: License](#page_with_curl-license)- [:handshake: Contributing](#handshake-contributing)&lt;!-- END doctoc generated TOC please keep comment here to allow auto update --&gt;## :computer: InstallationInstall `markdown-code-runner` via pip:```bashpip install markdown-code-runner```## :rocket: Quick StartTo get started with `markdown-code-runner`, follow these steps:1.  Add code blocks to your Markdown file using either of the following methods:    **Method 1 (*show your code*):** Use a triple backtick code block with the language specifier `python markdown-code-runner`.    Example:    &lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;    ````markdown    ```python markdown-code-runner    print('Hello, world!')    ```    (Optionally, you can place some text between the code block and the output markers)    &lt;!-- OUTPUT:START --&gt;    This content will be replaced by the output of the code block above.    &lt;!-- OUTPUT:END --&gt;    ````    or for Bash:    &lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;    ````markdown    ```bash markdown-code-runner    echo 'Hello, world!'    ```    (Optionally, you can place some text between the code block and the output markers)    &lt;!-- OUTPUT:START --&gt;    This content will be replaced by the output of the code block above.    &lt;!-- OUTPUT:END --&gt;    ````    **Method 2 *(hide your code)*:** Place the code between `&lt;!-- CODE:START --&gt;` and `&lt;!-- CODE:END --&gt;` markers. Add the output markers `&lt;!-- OUTPUT:START --&gt;` and `&lt;!-- OUTPUT:END --&gt;` where you want the output to be displayed.    Example:    &lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;    ```markdown    This is an example code block:    &lt;!-- CODE:START --&gt;    &lt;!-- print('Hello, world!') --&gt;    &lt;!-- CODE:END --&gt;    &lt;!-- OUTPUT:START --&gt;    This content will be replaced by the output of the code block above.    &lt;!-- OUTPUT:END --&gt;    ```    or for Bash:    &lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;    ```markdown    This is an example code block:    &lt;!-- CODE:BASH:START --&gt;    &lt;!-- MY_VAR=&quot;Hello, World!&quot; --&gt;    &lt;!-- echo $MY_VAR --&gt;    &lt;!-- CODE:END --&gt;    &lt;!-- OUTPUT:START --&gt;    This content will be replaced by the output of the code block above.    &lt;!-- OUTPUT:END --&gt;    ```2.  Run `markdown-code-runner` on your Markdown file:    ```bash    markdown-code-runner /path/to/your/markdown_file.md    ```3.  The output of the code block will be automatically executed and inserted between the output markers.## :snake: Python APITo use `markdown-code-runner`, simply import the `update_markdown_file` function from the package and call it with the path to your Markdown file:```pythonfrom markdown_code_runner import update_markdown_fileupdate_markdown_file(&quot;path/to/your/markdown_file.md&quot;)```## :book: ExamplesHere are a few examples demonstrating the usage of `markdown-code-runner`:### :star: Example 1: Simple code block&lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;```markdownThis is an example of a simple hidden code block:&lt;!-- CODE:START --&gt;&lt;!-- print('Hello, world!') --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;This content will be replaced by the output of the code block above.&lt;!-- OUTPUT:END --&gt;```After running `markdown-code-runner`:```markdownThis is an example of a simple code block:&lt;!-- CODE:START --&gt;&lt;!-- print('Hello, world!') --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;Hello, world!&lt;!-- OUTPUT:END --&gt;```### :star: Example 2: Multiple code blocks&lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;```markdownHere are two code blocks:First code block:&lt;!-- CODE:START --&gt;&lt;!-- print('Hello, world!') --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;This content will be replaced by the output of the first code block.&lt;!-- OUTPUT:END --&gt;```&lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;```markdownSecond code block:&lt;!-- CODE:START --&gt;&lt;!-- print('Hello again!') --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;This content will be replaced by the output of the second code block.&lt;!-- OUTPUT:END --&gt;```After running `markdown-code-runner`:```markdownHere are two code blocks:First code block:&lt;!-- CODE:START --&gt;&lt;!-- print('Hello, world!') --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;Hello, world!&lt;!-- OUTPUT:END --&gt;Second code block:&lt;!-- CODE:START --&gt;&lt;!-- print('Hello again!') --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;Hello again!&lt;!-- OUTPUT:END --&gt;```## :bulb: Usage IdeasMarkdown Code Runner can be used for various purposes, such as creating Markdown tables, generating visualizations, and showcasing code examples with live outputs. Here are some usage ideas to get you started:### :gear: Idea 1: Continuous Integration with GitHub ActionsYou can use `markdown-code-runner` to automatically update your Markdown files in a CI environment.The following example demonstrates how to configure a GitHub Actions workflow that updates your `README.md` whenever changes are pushed to the `main` branch.1. Create a new workflow file in your repository at `.github/workflows/markdown-code-runner.yml`.2. Add the following content to the workflow file:&lt;!-- CODE:START --&gt;&lt;!-- print(&quot;```yaml&quot;) --&gt;&lt;!-- with open(&quot;.github/workflows/markdown-code-runner.yml&quot;) as f: --&gt;&lt;!--   print(f.read().replace(&quot;pip install .&quot;, &quot;pip install markdown-code-runner&quot;)) --&gt;&lt;!-- print(&quot;```&quot;) --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;```yamlname: Update README.mdon:  push:    branches:      - main  pull_request:jobs:  update_readme:    runs-on: ubuntu-latest    steps:      - name: Check out repository        uses: actions/checkout@v3        with:          persist-credentials: false          fetch-depth: 0      - name: Set up Python        uses: actions/setup-python@v3        with:          python-version: '3.x'      - name: Install markdown-code-runner        run: |          python -m pip install --upgrade pip          pip install markdown-code-runner      # Install dependencies you're using in your README.md      - name: Install other Python dependencies        run: |          pip install pandas tabulate pytest matplotlib requests      # Rust is only needed for an example in our README.md      - name: Set up Rust        uses: actions-rs/toolchain@v1        with:          toolchain: stable          profile: minimal      - name: Run update-readme.py        run: markdown-code-runner --verbose README.md      - name: Commit updated README.md        id: commit        run: |          git add README.md          git config --local user.email &quot;github-actions[bot]@users.noreply.github.com&quot;          git config --local user.name &quot;github-actions[bot]&quot;          if git diff --quiet &amp;&amp; git diff --staged --quiet; then            echo &quot;No changes in README.md, skipping commit.&quot;            echo &quot;commit_status=skipped&quot; &gt;&gt; $GITHUB_ENV          else            git commit -m &quot;Update README.md&quot;            echo &quot;commit_status=committed&quot; &gt;&gt; $GITHUB_ENV          fi      - name: Push changes        if: env.commit_status == 'committed'        uses: ad-m/github-push-action@master        with:          github_token: ${{ secrets.GITHUB_TOKEN }}          branch: ${{ github.head_ref }}```&lt;!-- OUTPUT:END --&gt;3.  Commit and push the workflow file to your repository. The workflow will now automatically run whenever you push changes to the `main` branch, updating your `README.md` with the latest outputs from your code blocks.For more information on configuring GitHub Actions, check out the [official documentation](https://docs.github.com/en/actions/learn-github-actions/introduction-to-github-actions).### :computer: Idea 2: Show command-line outputUse `markdown-code-runner` to display the output of a command-line program. For example, the following Markdown file shows the helper options of this package.Using a backtick bash code block:```bash markdown-code-runnerexport PATH=~/micromamba/bin:$PATHecho '```bash'markdown-code-runner --helpecho '```'```Which is rendered as:&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;```bashusage: markdown-code-runner [-h] [-o OUTPUT] [-d] [-v] inputAutomatically update Markdown files with code block output.positional arguments:  input                 Path to the input Markdown file.options:  -h, --help            show this help message and exit  -o OUTPUT, --output OUTPUT                        Path to the output Markdown file. (default: overwrite                        input file)  -d, --verbose         Enable debugging mode (default: False)  -v, --version         show program's version number and exit```&lt;!-- OUTPUT:END --&gt;### :bar_chart: Idea 3: Generating Markdown TablesUse the `pandas` library to create a Markdown table from a DataFrame. The following example demonstrates how to create a table with random data:```python markdown-code-runnerimport pandas as pdimport numpy as np# Generate random datanp.random.seed(42)data = np.random.randint(1, 101, size=(5, 3))# Create a DataFrame and column namesdf = pd.DataFrame(data, columns=[&quot;Column A&quot;, &quot;Column B&quot;, &quot;Column C&quot;])# Convert the DataFrame to a Markdown tableprint(df.to_markdown(index=False))```Which is rendered as:&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;|   Column A |   Column B |   Column C ||-----------:|-----------:|-----------:||         52 |         93 |         15 ||         72 |         61 |         21 ||         83 |         87 |         75 ||         75 |         88 |        100 ||         24 |          3 |         22 |&lt;!-- OUTPUT:END --&gt;### :art: Idea 4: Generating VisualizationsCreate a visualization using the `matplotlib` library and save it as an image. Then, reference the image in your Markdown file. The following example demonstrates how to create a bar chart.Using a triple-backtick code block:&lt;!-- CODE:SKIP --&gt; &lt;!-- This is here otherwise the next example gets executed --&gt;```python markdown-code-runnerimport matplotlib.pyplot as pltimport ioimport base64from urllib.parse import quote# Example data for the plotx = [1, 2, 3, 4, 5]y = [2, 4, 6, 8, 10]# Create a simple line plotplt.plot(x, y)plt.xlabel(&quot;X-axis&quot;)plt.ylabel(&quot;Y-axis&quot;)plt.title(&quot;Sample Line Plot&quot;)# Save the plot to a BytesIO bufferbuf = io.BytesIO()plt.savefig(buf, format='png')plt.close()# Encode the buffer as a base64 stringdata = base64.b64encode(buf.getvalue()).decode('utf-8')# Create an inline HTML img tag with the base64 stringfrom urllib.parse import quoteimg_html = f'&lt;img src=&quot;data:image/png;base64,{quote(data)}&quot; alt=&quot;Sample Line Plot&quot;/&gt;'print(img_html)```&lt;!-- OUTPUT:START --&gt;&lt;!-- THIS CONTENT IS AUTOMATICALLY GENERATED BY markdown-code-runner --&gt;&lt;!-- OUTPUT:END --&gt;&gt; :information_source: **NOTE**: This output is disabled here because GitHub Markdown doesn't support inline image HTML. This will work on other Markdown renderers.### :page_facing_up: Idea 5: Generating a table from CSV dataSuppose you have a CSV file containing data that you want to display as a table in your Markdown file.You can use `pandas` to read the CSV file, convert it to a DataFrame, and then output it as a Markdown table.Using a triple-backtick code block:```python markdown-code-runnerimport pandas as pdcsv_data = &quot;Name,Age,Score\nAlice,30,90\nBob,25,85\nCharlie,22,95&quot;with open(&quot;sample_data.csv&quot;, &quot;w&quot;) as f:    f.write(csv_data)df = pd.read_csv(&quot;sample_data.csv&quot;)print(df.to_markdown(index=False))```Which is rendered as:&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;| Name    |   Age |   Score ||:--------|------:|--------:|| Alice   |    30 |      90 || Bob     |    25 |      85 || Charlie |    22 |      95 |&lt;!-- OUTPUT:END --&gt;### :star: Idea 5: Displaying API data as a listYou can use `markdown-code-runner` to make API calls and display the data as a list in your Markdown file.In this example, we'll use the `requests` library to fetch data from an API and display the results as a list.Using a hidden code block:&lt;!-- CODE:SKIP --&gt; &lt;!-- This prevents the example below from getting executed --&gt;```markdown&lt;!-- CODE:START --&gt;&lt;!-- import requests --&gt;&lt;!-- response = requests.get(&quot;https://jsonplaceholder.typicode.com/todos?_limit=5&quot;) --&gt;&lt;!-- todos = response.json() --&gt;&lt;!-- for todo in todos: --&gt;&lt;!--     print(f&quot;- {todo['title']} (User ID: {todo['userId']}, Completed: {todo['completed']})&quot;) --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;&lt;!-- OUTPUT:END --&gt;```Which is rendered as:&lt;!-- CODE:START --&gt;&lt;!-- import requests --&gt;&lt;!-- response = requests.get(&quot;https://jsonplaceholder.typicode.com/todos?_limit=5&quot;) --&gt;&lt;!-- todos = response.json() --&gt;&lt;!-- for todo in todos: --&gt;&lt;!--     print(f&quot;- {todo['title']} (User ID: {todo['userId']}, Completed: {todo['completed']})&quot;) --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;- delectus aut autem (User ID: 1, Completed: False)- quis ut nam facilis et officia qui (User ID: 1, Completed: False)- fugiat veniam minus (User ID: 1, Completed: False)- et porro tempora (User ID: 1, Completed: True)- laboriosam mollitia et enim quasi adipisci quia provident illum (User ID: 1, Completed: False)&lt;!-- OUTPUT:END --&gt;### :crab: Idea 6: Run a Rust programWe can use `markdown-code-runner` to write Rust code to a file and then a hidden bash code block to run the code and display the output.The code below *is actually executed*, check out the [`README.md` in plain text](https://github.com/basnijholt/markdown-code-runner/blob/main/README.md?plain=1) to see how this works.```rust markdown-code-runner filename=main.rsfn main() {    println!(&quot;Hello, world!&quot;);}```Which when executed produces:&lt;!-- CODE:BASH:START --&gt;&lt;!-- echo '```' --&gt;&lt;!-- rustc main.rs &amp;&amp; ./main --&gt;&lt;!-- echo '```' --&gt;&lt;!-- CODE:END --&gt;&lt;!-- OUTPUT:START --&gt;&lt;!-- ⚠️ This content is auto-generated by `markdown-code-runner`. --&gt;```Hello, world!```&lt;!-- OUTPUT:END --&gt;These are just a few examples of how you can use Markdown Code Runner to enhance your Markdown documents with dynamic content. The possibilities are endless!## :page_with_curl: License`markdown-code-runner` is released under the [MIT License](https://opensource.org/licenses/MIT). Please include the LICENSE file when using this package in your project, and cite the original source.## :handshake: ContributingContributions are welcome! To contribute, please follow these steps:1. Fork the repository on GitHub: [https://github.com/basnijholt/markdown-code-runner](https://github.com/basnijholt/markdown-code-runner)2. Create a new branch for your changes.3. Make your changes, ensuring that they adhere to the code style and guidelines.4. Submit a pull request with a description of your changes.Please report any issues or bugs on the GitHub issue tracker: [https://github.com/basnijholt/markdown-code-runner/issues](https://github.com/basnijholt/markdown-code-runner/issues)Thank you for your interest in `markdown-code-runner`!</longdescription>
</pkgmetadata>