<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>.. image:: https://img.shields.io/badge/dynamic/json.svg?label=forum&amp;url=https%3A%2F%2Fforum.image.sc%2Ftags%2Fomero-figure.json&amp;query=%24.topic_list.tags.0.topic_count&amp;colorB=brightgreen&amp;suffix=%20topics&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABPklEQVR42m3SyyqFURTA8Y2BER0TDyExZ+aSPIKUlPIITFzKeQWXwhBlQrmFgUzMMFLKZeguBu5y+//17dP3nc5vuPdee6299gohUYYaDGOyyACq4JmQVoFujOMR77hNfOAGM+hBOQqB9TjHD36xhAa04RCuuXeKOvwHVWIKL9jCK2bRiV284QgL8MwEjAneeo9VNOEaBhzALGtoRy02cIcWhE34jj5YxgW+E5Z4iTPkMYpPLCNY3hdOYEfNbKYdmNngZ1jyEzw7h7AIb3fRTQ95OAZ6yQpGYHMMtOTgouktYwxuXsHgWLLl+4x++Kx1FJrjLTagA77bTPvYgw1rRqY56e+w7GNYsqX6JfPwi7aR+Y5SA+BXtKIRfkfJAYgj14tpOF6+I46c4/cAM3UhM3JxyKsxiOIhH0IO6SH/A1Kb1WBeUjbkAAAAAElFTkSuQmCC    :target: https://forum.image.sc/tag/omero-figure    :alt: Image.sc forum.. image:: https://github.com/ome/omero-figure/workflows/OMERO/badge.svg    :target: https://github.com/ome/omero-figure/actions.. image:: https://badge.fury.io/py/omero-figure.svg    :target: https://badge.fury.io/py/omero-figureOMERO.figure============An OMERO.web app for creating figures from images in OMERO.For full details see `SUPPORT.md &lt;https://github.com/ome/omero-figure/blob/master/SUPPORT.md&gt;`_.Requirements------------* OMERO.web 5.6.0 or newer.Installing from PyPI--------------------This section assumes that an OMERO.web is already installed.Install the app using `pip &lt;https://pip.pypa.io/en/stable/&gt;`_:NB: You need to ensure that you are running ``pip`` from the python environmentwhere ``omero-web`` is installed. Depending on your install, you may need tocall ``pip`` with, for example: ``/path/to_web_venv/venv/bin/pip install ...``::    $ pip install -U omero-figureAdd figure custom app to your installed web apps:::    $ omero config append omero.web.apps '&quot;omero_figure&quot;'Display a link to 'Figure' at the top of the webclient:::    $ omero config append omero.web.ui.top_links '[&quot;Figure&quot;, &quot;figure_index&quot;,      {&quot;title&quot;: &quot;Open Figure in new tab&quot;, &quot;target&quot;: &quot;_blank&quot;}]' Add 'Figure' to the 'Open with' options, available from context menu onthe webclient tree:::    $ omero config append omero.web.open_with '[&quot;omero_figure&quot;, &quot;new_figure&quot;,      {&quot;supported_objects&quot;:[&quot;images&quot;], &quot;target&quot;: &quot;_blank&quot;, &quot;label&quot;: &quot;OMERO.figure&quot;}]'Now restart OMERO.web as normal.Enabling figure export----------------------This section assumes that an OMERO.server is already installed.Figures can be exported as PDF or TIFF files using a script that runs on the OMERO.server. This script needs to be uploaded to the OMERO.server and its dependenciesinstalled in the OMERO.server virtual environment.The script can be uploaded using two alternative workflows, both of which require you to have the correct admin privileges.To find where OMERO.figure has been installed using pip, run:::    $ pip show omero-figureThe command will display the absolute path to the directory where the application is installed e.g. ``~/&lt;virtualenv_name&gt;/lib/python3.6/site-packages``. Go to that directory.*Option 1*: Connect to the OMERO server and upload the script via the CLI. It is important to be in the correct directory when uploading so that the script is uploaded with the full path: ``omero/figure_scripts/Figure_To_Pdf.py``:::    $ cd omero_figure/scripts    $ omero script upload omero/figure_scripts/Figure_To_Pdf.py --official*Option 2*: Alternatively, before starting the OMERO.server, copy the script from the figure install``/omero_figure/scripts/omero/figure_scripts/Figure_To_Pdf.py`` to the OMERO.server ``path/to/OMERO.server/lib/scripts/omero/figure_scripts``. Then restart the OMERO.server.Now install the script's dependencies:* Install `reportlab &lt;https://bitbucket.org/rptlab/reportlab&gt;`_ PDF python package.  This needs to be installed in the virtual environment where the ``OMERO.server`` is installed. Depending on your install, you may need to  call ``pip`` with, for example: ``/path/to_server_venv/venv/bin/pip install ...``::    $ pip install &quot;reportlab&lt;3.6&quot;* Optional: Figure legends can be formatted using Markdown syntax. To see this correctly in the exported PDF info page, we need `Python Markdown &lt;https://python-markdown.github.io/&gt;`_:::    $ pip install markdownUpgrading OMERO.figure----------------------After upgrading OMERO.figure with:::    $ pip install -U omero-figureYou need to update the Figure export script using one of the 2 options describedabove. If using *Option 1*, you need to *replace* the existing script:::    # Get the ID of the existing Figure_To_Pdf script:    $ omero script list    # Replace the script    $ cd omero_figure/scripts    $ omero script replace &lt;SCRIPT_ID&gt; omero/figure_scripts/Figure_To_Pdf.pyDevelopment-----------We use Grunt for various tools.See http://figure.openmicroscopy.org/2014/05/01/testing-with-jshint-jasmine-grunt.htmlfor an introduction.Install Node from https://nodejs.org, then:::    $ cd omero-figure    $ npm installInstall Grunt CLI as described on http://gruntjs.com/using-the-cli.To build various resources into ``omero_figure/static``  run:::    $ grunt buildThis will concatenate js files into a single figure.js file,compile the underscore templates into templates.js and alsocopy the shape-editor.js from node_modules.During development, you will want to peform the concatenation(``concat``) and template compilation (``jst``) tasks wheneverthe JavaScript or template files change. This can be achievedwith:::$ grunt watchIt is also possible to develop figure in docker without installing anything locally.The Docker image is built on top of ``openmicroscopy/omero-web-standalone:latest``, so you will have a fully functionalomero-web environment while developing ``omero-figure``. First build the Docker image:::   $ docker build -t figure-devel .To develop ``omero-figure`` you can either make all the changes within the Docker container itself by running:::    $ docker run -ti -e OMEROHOST=YOUR_HOST -p 4080:4080 figure-develThe preferred option is to mount the repository containing the omero-figure code. Make the changes locally and see the changes in the docker container. To do so, run:::    $ docker run -ti -e OMEROHOST=YOUR_HOST -p 4080:4080  -v /PATH_TO_GIT_REPO/omero-figure:/home/figure/src figure-develAfter starting the container, run ``docker ps`` in another terminal to find the ID of the container. Then run:::   $ docker exec -u 0 -it CONTAINER_ID bash   # replace CONTAINER_ID by the correct value   $ cd /home/figure/src   $ grunt watchRelease process---------------This repository uses `bump2version &lt;https://pypi.org/project/bump2version/&gt;`_ to manage version numbers.To tag a release run::    $ bumpversion releaseThis will remove the ``.dev0`` suffix from the current version, commit, and tag the release.To switch back to a development version run::    $ bumpversion --no-tag [major|minor|patch]specifying ``major``, ``minor`` or ``patch`` depending on whether the development branch will be a `major, minor or patch release &lt;https://semver.org/&gt;`_. This will also add the ``.dev0`` suffix.Remember to ``git push`` all commits and tags.License-------OMERO.figure is released under the AGPL.Copyright---------2016-2022, The Open Microscopy Environment</longdescription>
</pkgmetadata>