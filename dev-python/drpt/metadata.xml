<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Data Release Preparation Tool- [Data Release Preparation Tool](#data-release-preparation-tool)  - [Description](#description)  - [Installation](#installation)  - [Usage](#usage)    - [CLI](#cli)    - [Recipe Definition](#recipe-definition)  - [Example](#example)  - [Thanks](#thanks)&gt; :warning: This is currently at beta development stage and likely has a lot of bugs. Please use the [issue tracker](https://github.com/ConX/drpt/issues) to report an bugs or feature requests.## DescriptionCommand-line tool for preparing a dataset for publishing by dropping, renaming, scaling, and obfuscating columns defined in a recipe.After performing the operations defined in the recipe the tool generates the transformed dataset version and a CSV report listing the performed actions.## InstallationThe tool can be installed using pip:```shellpip install drpt```## Usage### CLI```txtUsage: drpt [OPTIONS] RECIPE_FILE INPUT_FILEOptions:  -d, --dry-run           Generate only the report without the release dataset  -v, --verbose           Verbose [Not implemented]  -n, --nrows TEXT        Number of rows to read from a CSV file. Doesn't work                          with parquet files.  -l, --limits-file PATH  Limits file  -o, --output-dir PATH   Output directory. The default output directory is                          the same as the location of the recipe_file.  --version               Show the version and exit.  --help                  Show this message and exit.```### Recipe Definition#### OverviewThe recipe is a JSON formatted file that includes what operations should be performed on the dataset. For versioning purposes, the recipe also contains a `version` key which is appended in the generated filenames and the report.**Default recipe:**```json{  &quot;version&quot;: &quot;&quot;,  &quot;actions&quot;: {    &quot;drop&quot;: [],    &quot;drop-constant-columns&quot;: false,    &quot;obfuscate&quot;: [],    &quot;disable-scaling&quot;: false,    &quot;skip-scaling&quot;: [],    &quot;sort-by&quot;: [],    &quot;rename&quot;: []  }}```The currently supported actions, performed in this order, are as follows:  - `drop`: Column deletion  - `drop-constant-columns`: Drops all columns that containt only one unique value  - `obfuscate`: Column obfuscation, where the listed columns are treated as categorical variables and then integer coded.  - Scaling: By default all columns are Min/Max scaled    - `disable-scaling`: Can be used to disable scaling for all columns    - `skip-scaling`: By default all columns are Min/Max scaled, except those excluded (`skip-scaling`)  - `sort-by`: Sort rows by the listed columns  - `rename`: Column renamingAll column definitions above support [regular expressions](https://docs.python.org/3/library/re.html#regular-expression-syntax).#### Actions##### _drop_The `drop` action is defined as a list of column names to be dropped.##### _drop-constant-columns_This is a boolean action, which when set to `true` will drop all the columns that have only a single unique value.##### _obfuscate_The `obfuscate` action is defined as a list of column names to be obfuscated.##### _disable-scaling_, _skip-scaling_By default, the tool Min/Max scales all numerical columns. This behavior can be disabled for all columns by setting the `disable-scaling` action to `true`. If scaling must be disabled for only a set of columns these columns can be defined using the `skip-scaling` action, as a list of column names.##### _sort-by_This is a list of column names by which to sort the rows. The order in the list denotes the sorting priority.##### _rename_The `rename` action is defined as a list of objects whose key is the original name (or regular expression), and their value is the target name. When the target uses matched groups from the regular expression those can be provided with their group number prepended with an escaped backslash (`\\1`) [see [example](#example) below].```json{  //...  &quot;rename&quot;: [{&quot;original_name&quot;: &quot;target_name&quot;}]  //...}```## Example**Input CSV file:**```csvtest1,test2,test3,test4,test5,test6,test7,test8,test9,foo.bar.test,foo.bar.test2,const1.1,1,one,2,0.234,0.3,-1,a,e,1,1,12.2,2,two,2,0.555,0.4,0,b,f,2,2,13.3,3,three,4,0.1,5,1,c,g,3,3,12.22,2,two,4,1,0,2.5,d,h,4,4,1```**Recipe:**```json{  &quot;version&quot;: &quot;1.0&quot;,  &quot;actions&quot;: {    &quot;drop&quot;: [&quot;test2&quot;, &quot;test[8-9]&quot;],    &quot;drop-constant-columns&quot;: true,    &quot;obfuscate&quot;: [&quot;test3&quot;],    &quot;skip-scaling&quot;: [&quot;test4&quot;],    &quot;sort-by&quot;: [&quot;test4&quot;, &quot;test3&quot;],    &quot;rename&quot;: [      { &quot;test1&quot;: &quot;test1_renamed&quot; },      { &quot;test([3-4])&quot;: &quot;test\\1_regex_renamed&quot; },      { &quot;foo[.]bar[.].*&quot;: &quot;foo&quot; }    ]  }}```**Generated CSV file:**```csvtest3_regex_renamed,test4_regex_renamed,test1_renamed,test5,test6,test7,foo_1,foo_20,2,0.0,0.1488888888888889,0.06,0.0,0.0,0.02,2,0.5000000000000001,0.5055555555555556,0.08,0.2857142857142857,0.3333333333333333,0.33333333333333331,4,1.0,0.0,1.0,0.5714285714285714,0.6666666666666666,0.66666666666666662,4,0.5090909090909091,1.0,0.0,1.0,1.0,1.0```**Report:**```csv,action,column,details0,recipe_version,,1.01,drpt_version,,0.6.32,DROP,test2,3,DROP,test8,4,DROP,test9,5,DROP_CONSTANT,const,6,OBFUSCATE,test3,&quot;{&quot;&quot;one&quot;&quot;: 0, &quot;&quot;three&quot;&quot;: 1, &quot;&quot;two&quot;&quot;: 2}&quot;7,SCALE_DEFAULT,test1,&quot;[1.1,3.3]&quot;8,SCALE_DEFAULT,test5,&quot;[0.1,1.0]&quot;9,SCALE_DEFAULT,test6,&quot;[0.0,5.0]&quot;10,SCALE_DEFAULT,test7,&quot;[-1.0,2.5]&quot;11,SCALE_DEFAULT,foo.bar.test,&quot;[1,4]&quot;12,SCALE_DEFAULT,foo.bar.test2,&quot;[1,4]&quot;13,SORT,&quot;['test4', 'test3']&quot;,14,RENAME,test1,test1_renamed15,RENAME,test3,test3_regex_renamed16,RENAME,test4,test4_regex_renamed17,RENAME,foo.bar.test,foo_118,RENAME,foo.bar.test2,foo_2```## ThanksThis tool was made possible with [Pandas](https://pandas.pydata.org/), [PyArrow](https://arrow.apache.org/docs/python/index.html), [jsonschema](https://pypi.org/project/jsonschema/), and of course [Python](https://www.python.org/).  </longdescription>
</pkgmetadata>