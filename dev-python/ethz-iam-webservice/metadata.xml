<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># ETHZ IAM WebserviceManage users, groups and various services of the ETH Identity and Access Management system (IAM).## Command Line InterfaceWhen installing this module, the `iam` command is also installed. The **basic parameters which are always needed** – otherwise they will be asked interactivley – are:```bash$ iam -u admin-username --password MY-SECRET-PASSWORD```You can also set these environment variables instead:```bash$ export IAM_USERNAME=admin-username$ export IAM_PASSWORD=MY-SECRET-PASSWORD```### Group CLI```bash$ iam group --help                           # get extensive help text# create new group$ iam group --new id-test-test-01 --ag &quot;ID SIS&quot; -d 'some test description' -t AD -t LDAP ou=AGRL$ iam group &lt;group-name&gt;                     # info about a group$ iam group &lt;group-name&gt; -a user1 -a user2   # add new users$ iam group &lt;group-name&gt; -r user3 -r user4   # remove users```### User CLIGet info about a user, as well as granting/revoking a service or setting its password:```bash$ iam user --help$ iam user username$ iam user username --grant-service LDAPS, -g Mailbox$ iam user username --revoke-service LDAPS, -r Mailbox$ iam user username --set-password [-s LDAPS [-s Mailbox]] [--service-password $trengGehe1m]$ iam user username --init-password   # sets a random initial password for the user```### PersonGet info about a person (identity) and its users. You might either provide a username, a NPID or a email address.```bash$ iam person --help$ iam person username$ iam person some.person@ethz.ch$ iam person 123445```### Guest**Create guests**. For the new guest a new username will automatically be generated. This user gets LDAP and VPN service granted. Because by policy the VPN password needs to differ from the other passwords, the result will present the two initial passwords that are set shortly after creating the guest.**CLI**```bash$ iam guest get &lt;username&gt;$ iam guest new --help$ iam guest new -f firstname -l lastname -m first.last@unknown.org -d &quot;my test guest&quot; -h host_username -a &quot;Admingroup Name&quot;{    &quot;firstName&quot;: &quot;first&quot;,    &quot;lastName&quot;: &quot;last&quot;,    &quot;mail &quot;: &quot;first.last@unknown.org&quot;,    &quot;host &quot;: &quot;host_username&quot;,    &quot;respAdminRole &quot;: &quot;Admingroup Name&quot;,    &quot;description&quot;: &quot;my test guest&quot;,    &quot;dateOfBirth&quot;: &quot;16.06.2000&quot;,    &quot;guestTechnicalContact&quot;: &quot;somebody@ethz.ch&quot;,    &quot;notification&quot;: &quot;To guest and host&quot;,    &quot;hostOrg&quot;: &quot;06006&quot;,    &quot;startDate&quot;: &quot;16.06.2021&quot;,    &quot;endDate&quot;: &quot;16.06.2022&quot;,    &quot;username&quot;: &quot;flast&quot;,    &quot;npid&quot;: &quot;3210159&quot;,    &quot;init_ldap_password&quot;: &quot;xxxxxxx&quot;,}```**Default values:**- `--technicalContact / -c` will default to the email address of the host- `--notification / -n` will default to «gh», meaning **g**uest and **h**ost will be notified when a guest account expires.- `--startDate / -s` is today.- `--endDate / -e` is today + 1 year- `--dateOfBirth / -b` is today's date in year 2000**Extend guest**. After a year, you might want to extend the validity of your guest by another year or by a specific number of months```bash$ iam guest extend &lt;username&gt;               # will extend the guest by 1 year$ iam guest extend &lt;username&gt; -m 6          # extend it by today+6 months$ iam guest extend &lt;username&gt; -e 1.4.2022   # extend it until April 1st. 2022$ iam guest extend &lt;username&gt; -e 2022-04-01 # same thing, different date format```## API Synopsis### Login```import ethz_iam_webserviceimport getpasse = ethz_iam_webservice.login('admin4iam', getpass.getpass())```### Person```person = e.get_person('name@example.com')person = e.get_person('some_username')person = e.get_person(123456)             # npid (internal Person identifier)person.usernames                          # an array of dicts of usernamesperson.data                               # raw webservice responseperson.firstnameperson.lastnameperson.email# etc.```### User and Services```user = person.new_user('username', 'password', 'description')user = e.get_user('username')user.services                             # an array of dicts of servicesuser.grant_service(&quot;LDAPS&quot;)user.grant_service(&quot;Active Directory&quot;)user.grant_service(&quot;Mailbox&quot;)user.grant_service(&quot;WLAN_VPN&quot;)user.revoke_service(&quot;LDAPS&quot;)user.delete()user.add_to_group('groupname')user.remove_from_group('groupname')```### Mailbox Service**get service information**```gs = user.get_service(&quot;Mailbox&quot;)gs.data{  &quot;sn&quot;: &quot;Lastname&quot;,  &quot;givenName&quot;: &quot;Firstname&quot;,  &quot;displayName&quot;: &quot;neumond&quot;,  &quot;description&quot;: &quot;this acccount is for creating moons&quot;,  &quot;mail&quot;: &quot;neumond@ethz.ch&quot;,  &quot;isHidden&quot;: &quot;false&quot;,  &quot;noMailReceive&quot;: &quot;false&quot;,  &quot;quota&quot;: &quot;5GB&quot;,  &quot;homeDrive&quot;: null,  &quot;homeDirectory&quot;: &quot;\\\\\\\\d.ethz.ch\\\\users\\\\all\\\\neumond&quot;,  &quot;profilePath&quot;: &quot;\\\\\\\\d.ethz.ch\\\\users\\\\all\\\\neumond\\\\%pafs&quot;,  &quot;unixHomeDirectory&quot;: &quot;unixHomeDirectory&quot;,  &quot;loginShell&quot;: &quot;/bin/bash&quot;,  &quot;primaryGroup&quot;: &quot;Domain Users&quot;,  &quot;unifiedMessagingTask&quot;: null,  &quot;telephoneNumber&quot;: null,  &quot;proxyAddresses&quot;: [    &quot;SMTP:neumond@ethz.ch&quot;,    &quot;smtp:neumond@intern.ethz.ch&quot;  ]}```**set a email-forward, description**```gs.forward_address = 'neumond@example.com'gs.description = 'some new description'gs.save()```### Group and Group Members**get single group** - returns a Group object or throws a ValueError if group is not found```group = e.new_group(    name        = 'group-name',    description = 'something meaningful',    admingroup  = 'ID SIS',              # responsible admin group    targets     = ['AD', 'LDAPS'],       # please specify at least one target system    members     = ['user1', 'user2'])group = e.get_group('groupname')group = e.get_group(123456)              # gidNumbergroup.data                               # all data received from webservicegroup.members                            # returns array of usernames or group-namesgroup.gidNumbergroup.&lt;attribute&gt;```**add/remove group members**```group.add_members('some', 'new', 'members')group.set_members('just', 'these')group.del_members('remove', 'these', 'members')```**search for groups** - Result is always a list of groups or an empty list```groups = e.get_groups(agroup='ID SIS')groups = e.get_groups(name='starts_with*')groups = e.get_groups(agroup='ID SIS', name='starts_with*')```### Mailinglists```ml = e.get_mailinglist('ID.SIS.SSDM')ml = e.get_mailinglist('sis@id.ethz.ch')ml.nameml.mailml.gidNumberml.groupTypeml.displayName...ml.members        # returns all (direct) members of that listml.add_members('user1', 'user2')ml.del_members('user3, 'user4')```See also [FAQ](https://gitlab.ethz.ch/vermeul/ethz-iam-webservice/-/wikis/FAQ)</longdescription>
</pkgmetadata>