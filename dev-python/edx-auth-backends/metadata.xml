<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>auth-backends  |CI|_ |Codecov|_===================================.. |CI| image:: https://github.com/edx/auth-backends/workflows/Python%20CI/badge.svg?branch=master.. _CI: https://github.com/edx/auth-backends/actions?query=workflow%3A%22Python+CI%22.. |Codecov| image:: http://codecov.io/github/edx/auth-backends/coverage.svg?branch=master.. _Codecov: http://codecov.io/github/edx/auth-backends?branch=masterThis package contains custom authentication backends, views, and pipeline steps used by edX services for single sign-on.This package is compatible with Python 3.8, Django 2.2 and Django 3.0We currently support OAuth 2.0 authentication. Support for OpenID Connect (OIDC) was removed as of version 3.0. Use version 2.x if you require OIDC and are not able to migrate to OAuth2.Installation------------The `auth_backends` package can be installed from PyPI using pip::    $ pip install edx-auth-backendsUpdate ``INSTALLED_APPS``:.. code-block:: python    INSTALLED_APPS = (        'social_django',    )Configuration-------------Adding single sign-on/out support to a service requires a few changes:1. Define settings2. Add the authentication backend3. Add the login/logout redirectsOAuth 2.0 Settings~~~~~~~~~~~~~~~~~~+----------------------------------------------------------+-------------------------------------------------------------------------------------------+| Setting                                                  | Purpose                                                                                   |+==========================================================+===========================================================================================+| SOCIAL_AUTH_EDX_OAUTH2_KEY                               | Client key                                                                                |+----------------------------------------------------------+-------------------------------------------------------------------------------------------+| SOCIAL_AUTH_EDX_OAUTH2_SECRET                            | Client secret                                                                             |+----------------------------------------------------------+-------------------------------------------------------------------------------------------+| SOCIAL_AUTH_EDX_OAUTH2_URL_ROOT                          | LMS root, reachable from the application server                                           ||                                                          | (e.g. https://courses.stage.edx.org or http://edx.devstack.lms:18000)                     |+----------------------------------------------------------+-------------------------------------------------------------------------------------------+| SOCIAL_AUTH_EDX_OAUTH2_PUBLIC_URL_ROOT                   | LMS root, reachable from the end user's browser                                           ||                                                          | (e.g. https://courses.stage.edx.org or http://localhost:18000)                            |+----------------------------------------------------------+-------------------------------------------------------------------------------------------+| SOCIAL_AUTH_EDX_OAUTH2_JWS_HMAC_SIGNING_KEY              | (Optional) Shared secret for JWT signed with HS512 algorithm                              |+----------------------------------------------------------+-------------------------------------------------------------------------------------------+| SOCIAL_AUTH_EDX_OAUTH2_PROVIDER_CONFIGURATION_CACHE_TTL  | (Optional) Cache timeout for provider configuration. Defaults to 1 week.                  |+----------------------------------------------------------+-------------------------------------------------------------------------------------------+| SOCIAL_AUTH_EDX_OAUTH2_JWKS_CACHE_TTL                    | (Optional) Cache timeout for provider's JWKS key data. Defaults to 1 day.                 |+----------------------------------------------------------+-------------------------------------------------------------------------------------------+OAuth2 Applications require access to the ``user_id`` scope in order for the ``EdXOAuth2`` backend to work.  The backend will write the ``user_id`` into the social-auth extra_data, and can be accessed within the User model as follows::    self.social_auth.first().extra_data[u'user_id']  # pylint: disable=no-memberStrategy~~~~~~~~We use a custom `strategy &lt;http://python-social-auth.readthedocs.io/en/latest/strategies.html&gt;`_ that includes many ofthe default settings necessary to utilize single sign-on for edX services. This strategy should be used for allservices to simplify configuration. If you need to override the defaults, you may still do so as you would with anysocial auth setting——prepend `SOCIAL_AUTH_` to the setting name. Add the following to your Django settings to use thestrategy:.. code-block:: python    SOCIAL_AUTH_STRATEGY = 'auth_backends.strategies.EdxDjangoStrategy'Authentication Backend~~~~~~~~~~~~~~~~~~~~~~Configuring the backend is simply a matter of updating the ``AUTHENTICATION_BACKENDS`` setting. The configurationbelow is sufficient for all edX services... code-block:: python    AUTHENTICATION_BACKENDS = (        'auth_backends.backends.EdXOAuth2',        'django.contrib.auth.backends.ModelBackend',    )Authentication Views~~~~~~~~~~~~~~~~~~~~In order to make use of the authentication backend, your service's login/logout views need to be updated. The loginview should be updated to redirect to the authentication provider's login page. The logout view should be updated toredirect to the authentication provider's logout page.This package includes views and urlpatterns configured for OAuth 2.0. To use them, simply append/prepend``oauth2_urlpatterns`` to your service's urlpatterns in `urls.py`... code-block:: python    from auth_backends.urls import oauth2_urlpatterns    urlpatterns = oauth2_urlpatterns + [        url(r'^admin/', include(admin.site.urls)),        ...    ]It is recommended that you not modify the login view. If, however, you need to modify the logout view (to redirect toa different URL, for example), you can subclass ``EdxOAuth2LogoutView`` forthe view and ``LogoutViewTestMixin`` for your tests.Testing-------Call ``make test``.Publishing a Release--------------------After a PR merges, create a new tag from ``master`` branch with a new version of the package and create a`Github release &lt;https://github.com/edx/auth-backends/releases&gt;`_using the new tag that will automatically publish the package to PyPi when a release is created.License-------The code in this repository is licensed under the AGPL unless otherwise noted.Please see ``LICENSE.txt`` for details.How To Contribute-----------------Contributions are very welcome!Please read `How To Contribute &lt;https://github.com/edx/edx-platform/blob/master/CONTRIBUTING.rst&gt;`_ for details.Even though it was written with `edx-platform &lt;https://github.com/edx/edx-platform&gt;`_ in mind,the guidelines should be followed for Open edX code in general.Reporting Security Issues-------------------------Please do not report security issues in public. Please email security@edx.org.Mailing List and IRC Channel----------------------------You can discuss this code on the `edx-code Google Group &lt;https://groups.google.com/forum/#!forum/edx-code&gt;`_ or in the``#edx-code`` IRC channel on Freenode... :changelog:History=======3.1.0 (2020-05-08)------------------- Added support for python 3.8- Removed support for Django versions older than 2.23.0.2 (2020-02-06)------------------Re-release of 3.0.0 with proper version, matching tag.3.0.1 (2020-02-06)------------------Re-release of 3.0.0, although failed to update package version.3.0.0 (2020-02-06)------------------- Add support for Django 2 and drop support for some older versions (support changes from 1.8–1.11 to 1.11–2.2)- Remove (deprecated) OpenID Connect support- Test with Python 3.5, not 3.6, to match rest of edX code2.0.2 (2019-08-12)------------------Two new commits that changed functionality:- Add EdXOAuth2.auth_complete_signal on auth_complete()- Store refresh_token in extra_data2.0.1 (2019-05-13)------------------Create new Version for auth-backends for release2.0.0 (2019-03-28)------------------EdXOAuth2 will retrieve and store user_id claimThe EdXOAuth2 backend will now pull the user_id from the JWT andstore it in the UserSocialAuth.extra_data field.BREAKING CHANGE: The user_id scope is now required when using theEdXOAuth2 backend for oAuth+SSO. This means that the oauthapplication must first be configured to have access to the user_idscope, which is not available by default.1.2.2 (2019-01-31)------------------Updates to the EdXOAuth2 backend:- Supports the _PUBLIC_URL_ROOT social django setting.- logout_url() allows _LOGOUT_REDIRECT_URL to be undefined.1.2.1 (2018-10-26)------------------Fix urlencode bug with EdXOAuth2 backend logout url1.2.0 (2018-10-26)------------------Allow for logout redirect with EdXOAuth2 backend.1.1.5 (2018-10-19)------------------Add logout_url property to EdXOAuth2 backend.1.1.4 (2018-10-12)------------------Remove token validation from EdXOAuth2 backend.1.1.3 (2018-01-04)------------------Added support to update email address.social_core consider email field protected and won't let it change.Added a pipeline function to update email address.1.1.2 (2017-05-12)------------------Updated LoginRedirectBaseView to include querystring[unlisted]----------Intervening releases not documented here; see Releases:https://github.com/edx/auth-backends/releases?after=1.1.20.1.3 (2015-03-31)------------------- Update required version of Python Social Auth to 0.2.3.0.1.2 (2015-02-23)------------------- Update required version of Python Social Auth to 0.2.2.0.1.1 (2015-02-20)------------------- Initial release.Renzo Lucioni &lt;renzo@edx.org&gt;Troy Sankey &lt;tsankey@edx.org&gt;</longdescription>
</pkgmetadata>