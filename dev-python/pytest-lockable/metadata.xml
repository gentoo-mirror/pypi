<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># pytest-lockable[![CircleCI](https://circleci.com/gh/jupe/pytest-lockable/tree/master.svg?style=svg)](https://circleci.com/gh/jupe/pytest-lockable/tree/master)[![PyPI version](https://badge.fury.io/py/pytest-lockable.svg)](https://pypi.org/project/pytest-lockable/)[![Coverage Status](https://coveralls.io/repos/github/jupe/pytest-lockable/badge.svg)](https://coveralls.io/github/jupe/pytest-lockable)pytest plugin for lockable resources.Replacement for Jenkins lockable -plugin.Locking is implemented using `&lt;resource-id&gt;.pid` files and is released automatically.Resources are automatically released when pytest ends.Resources are described in json file as array of objects. Each object has some mandatory fields but can contains any other as well. Required fields are: `id`, `online`, `hostname`.## Example `resources.json````[  {    &quot;id&quot;: &quot;1234&quot;,    &quot;online&quot;: true,    &quot;hostname&quot;: &quot;localhost&quot;,    &quot;os&quot;: &quot;Android&quot;  }]````id` should be unique for each resources. `online` describes if resource are available for allocator. Set this `false`  if you don't want to allocate resource. `hostname` is used to select suitable resource by running host. Usage:```pytest --allocation_hostname localhost -s --allocation_requirements os=Android my_test```## installation**Requires:** python 3.7&lt;```pythonpip install pytest-lockable```## integrationspytest-lockable integrates pytest-metadata - when resource is reserved and [pytest-metadata](https://github.com/pytest-dev/pytest-metadata) plugin are in use metadata will be generated from resource json with  `resource_` -prefixes.e.g. `resource_id=&lt;id&gt;`. Same dictionary are also recorded to testsuite property using[record_testsuite_property](https://docs.pytest.org/en/stable/reference.html#record-testsuite-property) -method.## UsageCustom options:```--allocation_hostname=&lt;hostname&gt;, default=&lt;os-hostname&gt;  Allocation host--allocation_requirements=&lt;requirements&gt;                 Resource requirements to be allocate--allocation_timeout=&lt;timeout&gt;, default=10               Allocation timeout in seconds--allocation_resource_list_file=&lt;filename&gt;, default=resources.json                                                          Available resorces list--allocation_lock_folder=&lt;folder&gt;, default=&lt;os-tmp-path&gt; allocation lockfiles folder```*`&lt;requirements&gt;`* can be json-string or key-value pairs. requirements have to match available resources to make allocation possible. Key-value pairs example: `key=value&amp;key2=value2` Example:Use shared lockable resource``` pythondef test_example(lockable_resource):    &quot;&quot;&quot; Simple test &quot;&quot;&quot;    print(f'Testing with resource: {lockable_resource}')```Allocate lockable resource during test with given requirements``` pythondef test_example(lockable):    &quot;&quot;&quot; Simple test &quot;&quot;&quot;    with lockable.auto_lock({&quot;my&quot;: &quot;requirements&quot;}) as allocation:        print(f'Testing with resource#: {allocation.resource_id}')```See [example test](example/test_example.py). Usage:```cd examplepytest --allocation_hostname localhost -s --allocation_lock_folder . .```</longdescription>
</pkgmetadata>