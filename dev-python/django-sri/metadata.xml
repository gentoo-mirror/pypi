<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Django SRI![CI](https://github.com/RealOrangeOne/django-sri/workflows/CI/badge.svg)![PyPI](https://img.shields.io/pypi/v/django-sri.svg)![PyPI - Python Version](https://img.shields.io/pypi/pyversions/django-sri.svg)![PyPI - Status](https://img.shields.io/pypi/status/django-sri.svg)![PyPI - License](https://img.shields.io/pypi/l/django-sri.svg)[Subresource Integrity](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity) for Django.## Installation```pip install django-sri```And add `sri` to your `INSTALLED_APPS`.## Usage### Template Tags__Note__: By default, integrity hashes are not output when `DEBUG` is `True`, as static files change a lot during local development. To override this, set `USE_SRI` to `True`.`django-sri` is designed to primarily be used through template tags:```html{% load sri %}{% sri_static &quot;index.js&quot; %} &lt;!-- Will output &quot;&lt;script src='/static/index.js' integrity='sha256-...'&gt;&lt;/script&gt;&quot; --&gt;{% sri_static &quot;index.css&quot; %} &lt;!-- Will output &quot;&lt;link rel='stylesheet' href='/static/index.css' integrity='sha256-...'/&gt;&quot; --&gt;```For performance, the hashes of files are caches in Django's [caching framework](https://docs.djangoproject.com/en/dev/topics/cache/). It will attempt to use the &quot;sri&quot; cache, but fall back to &quot;default&quot; if it doesn't exist. The cache keys are the hash of the file path in the specified algorithm in hex. Caches are stored for as long as `DEFAULT_TIMEOUT` is set to.#### AlgorithmsThe SRI standard supports 3 algorithms: sha256, sha384 and sha512. By default, SHA256 is used. To override this, supply an additional `algorithm` argument to the `sri` template tag (or the specific ones):```html{% load sri %}{% sri_static &quot;index.js&quot; algorithm=&quot;sha512&quot; %} &lt;!-- Will output &quot;&lt;script src='/static/index.js' integrity='sha512-...'&gt;&lt;/script&gt;&quot; --&gt;```The default algorithm can be changed by setting `SRI_ALGORITHM` to the required algorithm.#### Additional attributesTo add additional attributes to the output tag (such as `async` / `defer`), specify them as additional arguments to the template tag:```html{% load sri %}{% sri_static &quot;index.js&quot; 'defer' 'async'%}{% sri_static &quot;index.woff2&quot; preload as=&quot;font&quot; %}```#### Just the integrity valueTo retrieve just the integrity hash (the contents of the `integrity` attribute), you can use the `{% sri_integrity_static %}` tag, which supports the same arguments as the other tags.```html{% load sri %}{% sri_integrity_static &quot;index.js&quot; &quot;sha512&quot; %} &lt;!-- Will output &quot;sha512-...&quot; --&gt;```#### Supported FilesFor automatic tag output, the following files are supported:- `.js`- `.css`Unknown extensions will emit a `link` tag with the URL as the `href` attribute.`sri_integrity_static` is unaffected by this limitation.### API```pythonfrom pathlib import Pathfrom sri import calculate_integrity, calculate_integrity_of_static, Algorithmcalculate_integrity(Path(&quot;/path/to/myfile.txt&quot;))  # &quot;sha256-...&quot;calculate_integrity_of_static(&quot;index.js&quot;)  # &quot;sha256-...&quot;calculate_integrity_of_static(&quot;index.js&quot;, Algorithm.SHA512)  # &quot;sha512-...&quot;```### _&quot;Does this work with [whitenoise](https://whitenoise.evans.io/en/stable/) or alike?&quot;_Yes. `django-sri` outputs the static file URL in the same way the builtin `static` template tag does. This means the correct cachebusted URLs are output.When using a manifest `STATICFILES_STORAGE`, `django-sri` will automatically retrieve the hashed and post-processed file as opposed to the original.</longdescription>
</pkgmetadata>