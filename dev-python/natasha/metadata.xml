<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>&lt;img src=&quot;https://github.com/natasha/natasha-logos/blob/master/natasha.svg&quot;&gt;![CI](https://github.com/natasha/yargy/actions/workflows/test.yml/badge.svg)Natasha solves basic NLP tasks for Russian language: tokenization, sentence segmentation, word embedding, morphology tagging, lemmatization, phrase normalization, syntax parsing, NER tagging, fact extraction. Quality on every task is similar or better then current SOTAs for Russian language on news articles, see &lt;a href=&quot;https://github.com/natasha/natasha#evaluation&quot;&gt;evaluation section&lt;/a&gt;. Natasha is not a research project, underlying technologies are built for production. We pay attention to model size, RAM usage and performance. Models run on CPU, use Numpy for inference.Natasha integrates libraries from &lt;a href=&quot;https://github.com/natasha&quot;&gt;Natasha project&lt;/a&gt; under one convenient API:* &lt;a href=&quot;https://github.com/natasha/razdel&quot;&gt;Razdel&lt;/a&gt; — token, sentence segmentation for Russian* &lt;a href=&quot;https://github.com/natasha/navec&quot;&gt;Navec&lt;/a&gt; — compact Russian embeddings* &lt;a href=&quot;https://github.com/natasha/slovnet&quot;&gt;Slovnet&lt;/a&gt; — modern deep-learning techniques for Russian NLP, compact models for Russian morphology, syntax, NER.* &lt;a href=&quot;https://github.com/natasha/yargy&quot;&gt;Yargy&lt;/a&gt; — rule-based fact extraction similar to Tomita parser.* &lt;a href=&quot;https://github.com/natasha/ipymarkup&quot;&gt;Ipymarkup&lt;/a&gt; — NLP visualizations for NER and syntax markups.&gt; ⚠ API may change, for realworld tasks consider using low level libraries from Natasha project.&gt; Models optimized for news articles, quality on other domain may be lower.&gt; To use old `NamesExtractor`, `AddressExtactor` downgrade `pip install natasha&lt;1 yargy&lt;0.13`## InstallNatasha supports Python 3.7+ and PyPy3:```bash$ pip install natasha```## UsageImport, initialize modules, build `Doc` object.```python&gt;&gt;&gt; from natasha import (    Segmenter,    MorphVocab,        NewsEmbedding,    NewsMorphTagger,    NewsSyntaxParser,    NewsNERTagger,        PER,    NamesExtractor,    Doc)&gt;&gt;&gt; segmenter = Segmenter()&gt;&gt;&gt; morph_vocab = MorphVocab()&gt;&gt;&gt; emb = NewsEmbedding()&gt;&gt;&gt; morph_tagger = NewsMorphTagger(emb)&gt;&gt;&gt; syntax_parser = NewsSyntaxParser(emb)&gt;&gt;&gt; ner_tagger = NewsNERTagger(emb)&gt;&gt;&gt; names_extractor = NamesExtractor(morph_vocab)&gt;&gt;&gt; text = 'Посол Израиля на Украине Йоэль Лион признался, что пришел в шок, узнав о решении властей Львовской области объявить 2019 год годом лидера запрещенной в России Организации украинских националистов (ОУН) Степана Бандеры. Свое заявление он разместил в Twitter. «Я не могу понять, как прославление тех, кто непосредственно принимал участие в ужасных антисемитских преступлениях, помогает бороться с антисемитизмом и ксенофобией. Украина не должна забывать о преступлениях, совершенных против украинских евреев, и никоим образом не отмечать их через почитание их исполнителей», — написал дипломат. 11 декабря Львовский областной совет принял решение провозгласить 2019 год в регионе годом Степана Бандеры в связи с празднованием 110-летия со дня рождения лидера ОУН (Бандера родился 1 января 1909 года). В июле аналогичное решение принял Житомирский областной совет. В начале месяца с предложением к президенту страны Петру Порошенко вернуть Бандере звание Героя Украины обратились депутаты Верховной Рады. Парламентарии уверены, что признание Бандеры национальным героем поможет в борьбе с подрывной деятельностью против Украины в информационном поле, а также остановит «распространение мифов, созданных российской пропагандой». Степан Бандера (1909-1959) был одним из лидеров Организации украинских националистов, выступающей за создание независимого государства на территориях с украиноязычным населением. В 2010 году в период президентства Виктора Ющенко Бандера был посмертно признан Героем Украины, однако впоследствии это решение было отменено судом. '&gt;&gt;&gt; doc = Doc(text)```### SegmentationSplit text into tokens and sentencies. Defines `tokens` and `sents` properties of `doc`. Uses &lt;a href=&quot;https://github.com/natasha/razdel&quot;&gt;Razdel&lt;/a&gt; internally.```python&gt;&gt;&gt; doc.segment(segmenter)&gt;&gt;&gt; print(doc.tokens[:5])&gt;&gt;&gt; print(doc.sents[:5])[DocToken(stop=5, text='Посол'), DocToken(start=6, stop=13, text='Израиля'), DocToken(start=14, stop=16, text='на'), DocToken(start=17, stop=24, text='Украине'), DocToken(start=25, stop=30, text='Йоэль')][DocSent(stop=218, text='Посол Израиля на Украине Йоэль Лион признался, чт..., tokens=[...]), DocSent(start=219, stop=257, text='Свое заявление он разместил в Twitter.', tokens=[...]), DocSent(start=258, stop=424, text='«Я не могу понять, как прославление тех, кто непо..., tokens=[...]), DocSent(start=425, stop=592, text='Украина не должна забывать о преступлениях, совер..., tokens=[...]), DocSent(start=593, stop=798, text='11 декабря Львовский областной совет принял решен..., tokens=[...])]```### MorphologyFor every token extract rich morphology tags. Depends on &lt;a href=&quot;#Segmentation&quot;&gt;segmentation&lt;/a&gt; step. Defines `pos` and `feats` properties of `doc.tokens`. Uses &lt;a href=&quot;https://github.com/natasha/slovnet#morphology&quot;&gt;Slovnet morphology model&lt;/a&gt; internally.Call `morph.print()` to visualize morphology markup.```python&gt;&gt;&gt; doc.tag_morph(morph_tagger)&gt;&gt;&gt; print(doc.tokens[:5])&gt;&gt;&gt; doc.sents[0].morph.print()[DocToken(stop=5, text='Посол', pos='NOUN', feats=&lt;Anim,Nom,Masc,Sing&gt;), DocToken(start=6, stop=13, text='Израиля', pos='PROPN', feats=&lt;Inan,Gen,Masc,Sing&gt;), DocToken(start=14, stop=16, text='на', pos='ADP'), DocToken(start=17, stop=24, text='Украине', pos='PROPN', feats=&lt;Inan,Loc,Fem,Sing&gt;), DocToken(start=25, stop=30, text='Йоэль', pos='PROPN', feats=&lt;Anim,Nom,Masc,Sing&gt;)]               Посол NOUN|Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing             Израиля PROPN|Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing                  на ADP             Украине PROPN|Animacy=Inan|Case=Loc|Gender=Fem|Number=Sing               Йоэль PROPN|Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing                Лион PROPN|Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing           признался VERB|Aspect=Perf|Gender=Masc|Mood=Ind|Number=Sing|Tense=Past|VerbForm=Fin|Voice=Mid                   , PUNCT                 что SCONJ...```### LemmatizationLemmatize every token. Depends on &lt;a href=&quot;#Morphology&quot;&gt;morphology&lt;/a&gt; step. Defines `lemma` property of `doc.tokens`. Uses &lt;a href=&quot;https://pymorphy2.readthedocs.io/en/stable/&quot;&gt;Pymorphy&lt;/a&gt; internally.```python&gt;&gt;&gt; for token in doc.tokens:&gt;&gt;&gt;     token.lemmatize(morph_vocab)    &gt;&gt;&gt; print(doc.tokens[:5])&gt;&gt;&gt; {_.text: _.lemma for _ in doc.tokens}[DocToken(stop=5, text='Посол', pos='NOUN', feats=&lt;Anim,Nom,Masc,Sing&gt;, lemma='посол'), DocToken(start=6, stop=13, text='Израиля', pos='PROPN', feats=&lt;Inan,Gen,Masc,Sing&gt;, lemma='израиль'), DocToken(start=14, stop=16, text='на', pos='ADP', lemma='на'), DocToken(start=17, stop=24, text='Украине', pos='PROPN', feats=&lt;Inan,Loc,Fem,Sing&gt;, lemma='украина'), DocToken(start=25, stop=30, text='Йоэль', pos='PROPN', feats=&lt;Anim,Nom,Masc,Sing&gt;, lemma='йоэль')]{'Посол': 'посол', 'Израиля': 'израиль', 'на': 'на', 'Украине': 'украина', 'Йоэль': 'йоэль', 'Лион': 'лион', 'признался': 'признаться', ',': ',', 'что': 'что', 'пришел': 'прийти', 'в': 'в', 'шок': 'шок', 'узнав': 'узнать', 'о': 'о',...```### SyntaxFor every sentence run syntax analyzer. Depends on &lt;a href=&quot;#Segmentation&quot;&gt;segmentation&lt;/a&gt; step. Defines `id`, `head_id`, `rel` properties of `doc.tokens`. Uses &lt;a href=&quot;https://github.com/natasha/slovnet#syntax&quot;&gt;Slovnet syntax model&lt;/a&gt; internally. Use `syntax.print()` to visualize syntax markup. Uses &lt;a href=&quot;https://github.com/natasha/ipymarkup&quot;&gt;Ipymarkup&lt;/a&gt; internally.```python&gt;&gt;&gt; doc.parse_syntax(syntax_parser)&gt;&gt;&gt; print(doc.tokens[:5])&gt;&gt;&gt; doc.sents[0].syntax.print()[DocToken(stop=5, text='Посол', id='1_1', head_id='1_7', rel='nsubj', pos='NOUN', feats=&lt;Anim,Nom,Masc,Sing&gt;), DocToken(start=6, stop=13, text='Израиля', id='1_2', head_id='1_1', rel='nmod', pos='PROPN', feats=&lt;Inan,Gen,Masc,Sing&gt;), DocToken(start=14, stop=16, text='на', id='1_3', head_id='1_4', rel='case', pos='ADP'), DocToken(start=17, stop=24, text='Украине', id='1_4', head_id='1_1', rel='nmod', pos='PROPN', feats=&lt;Inan,Loc,Fem,Sing&gt;), DocToken(start=25, stop=30, text='Йоэль', id='1_5', head_id='1_1', rel='appos', pos='PROPN', feats=&lt;Anim,Nom,Masc,Sing&gt;)]        ┌──► Посол         nsubj        │    Израиля               │ ┌► на            case        │ └─ Украине               │ ┌─ Йоэль                 │ └► Лион          flat:name┌─────┌─└─── признался     │     │ ┌──► ,             punct│     │ │ ┌► что           mark│     └►└─└─ пришел        ccomp│     │   ┌► в             case│     └──►└─ шок           obl│         ┌► ,             punct│ ┌────►┌─└─ узнав         advcl│ │     │ ┌► о             case│ │ ┌───└►└─ решении       obl│ │ │ ┌─└──► властей       nmod│ │ │ │   ┌► Львовской     amod│ │ │ └──►└─ области       nmod│ └─└►┌─┌─── объявить      nmod│     │ │ ┌► 2019          amod│     │ └►└─ год           obj│     └──►┌─ годом         obl│   ┌─────└► лидера        nmod│   │ ┌►┌─── запрещенной   acl│   │ │ │ ┌► в             case│   │ │ └►└─ России        obl│ ┌─└►└─┌─── Организации   nmod│ │     │ ┌► украинских    amod│ │   ┌─└►└─ националистов nmod│ │   │   ┌► (             punct│ │   └►┌─└─ ОУН           parataxis│ │     └──► )             punct│ └──────►┌─ Степана       appos│         └► Бандеры       flat:name└──────────► .             punct...```### NERExtract standart named entities: names, locations, organizations. Depends on &lt;a href=&quot;#Segmentation&quot;&gt;segmentation&lt;/a&gt; step. Defines `spans` property of `doc`. Uses &lt;a href=&quot;https://github.com/natasha/slovnet#ner&quot;&gt;Slovnet NER model&lt;/a&gt; internally. Call `ner.print()` to visualize NER markup. Uses &lt;a href=&quot;https://github.com/natasha/ipymarkup&quot;&gt;Ipymarkup&lt;/a&gt; internally.```python&gt;&gt;&gt; doc.tag_ner(ner_tagger)&gt;&gt;&gt; print(doc.spans[:5])&gt;&gt;&gt; doc.ner.print()[DocSpan(start=6, stop=13, type='LOC', text='Израиля', tokens=[...]), DocSpan(start=17, stop=24, type='LOC', text='Украине', tokens=[...]), DocSpan(start=25, stop=35, type='PER', text='Йоэль Лион', tokens=[...]), DocSpan(start=89, stop=106, type='LOC', text='Львовской области', tokens=[...]), DocSpan(start=152, stop=158, type='LOC', text='России', tokens=[...])]Посол Израиля на Украине Йоэль Лион признался, что пришел в шок, узнав      LOC────    LOC──── PER───────                                    о решении властей Львовской области объявить 2019 год годом лидера                    LOC──────────────                                запрещенной в России Организации украинских националистов (ОУН)               LOC─── ORG─────────────────────────────────────── Степана Бандеры. Свое заявление он разместил в Twitter. «Я не могу PER────────────                                ORG────             понять, как прославление тех, кто непосредственно принимал участие в ужасных антисемитских преступлениях, помогает бороться с антисемитизмом и ксенофобией. Украина не должна забывать о                               LOC────                      преступлениях, совершенных против украинских евреев, и никоим образом не отмечать их через почитание их исполнителей», — написал дипломат. 11 декабря Львовский областной совет принял решение провозгласить 2019           ORG──────────────────────                                   год в регионе годом Степана Бандеры в связи с празднованием 110-летия                     PER────────────                                   со дня рождения лидера ОУН (Бандера родился 1 января 1909 года). В                         ORG                                         июле аналогичное решение принял Житомирский областной совет. В начале                                 ORG────────────────────────           месяца с предложением к президенту страны Петру Порошенко вернуть                                           PER────────────         Бандере звание Героя Украины обратились депутаты Верховной Рады. PER────              LOC────                     ORG───────────  Парламентарии уверены, что признание Бандеры национальным героем                                      PER────                     поможет в борьбе с подрывной деятельностью против Украины в                                                   LOC────   информационном поле, а также остановит «распространение мифов, созданных российской пропагандой». Степан Бандера (1909-1959) был                                    PER───────────                 одним из лидеров Организации украинских националистов, выступающей за                  ORG─────────────────────────────────                 создание независимого государства на территориях с украиноязычным населением. В 2010 году в период президентства Виктора Ющенко Бандера                                                PER─────────── PER──── был посмертно признан Героем Украины, однако впоследствии это решение                              LOC────                                  было отменено судом. ```### Named entity normalizationFor every NER span apply normalization procedure. Depends on &lt;a href=&quot;#NER&quot;&gt;NER&lt;/a&gt;, &lt;a href=&quot;#Morphology&quot;&gt;morphology&lt;/a&gt; and &lt;a href=&quot;#Syntax&quot;&gt;syntax&lt;/a&gt; steps. Defines `normal` property of `doc.spans`.One can not just lemmatize every token inside entity span, otherwise &quot;Организации украинских националистов&quot; would become &quot;Организация украинские националисты&quot;. Natasha uses syntax dependencies to produce correct &quot;Организация украинских националистов&quot;.```python&gt;&gt;&gt; for span in doc.spans:&gt;&gt;&gt;    span.normalize(morph_vocab)&gt;&gt;&gt; print(doc.spans[:5])&gt;&gt;&gt; {_.text: _.normal for _ in doc.spans if _.text != _.normal}[DocSpan(start=6, stop=13, type='LOC', text='Израиля', tokens=[...], normal='Израиль'), DocSpan(start=17, stop=24, type='LOC', text='Украине', tokens=[...], normal='Украина'), DocSpan(start=25, stop=35, type='PER', text='Йоэль Лион', tokens=[...], normal='Йоэль Лион'), DocSpan(start=89, stop=106, type='LOC', text='Львовской области', tokens=[...], normal='Львовская область'), DocSpan(start=152, stop=158, type='LOC', text='России', tokens=[...], normal='Россия')]{'Израиля': 'Израиль', 'Украине': 'Украина', 'Львовской области': 'Львовская область', 'России': 'Россия', 'Организации украинских националистов (ОУН)': 'Организация украинских националистов (ОУН)', 'Степана Бандеры': 'Степан Бандера', 'Петру Порошенко': 'Петр Порошенко', 'Бандере': 'Бандера', 'Украины': 'Украина', 'Верховной Рады': 'Верховная Рада', 'Бандеры': 'Бандера', 'Организации украинских националистов': 'Организация украинских националистов', 'Виктора Ющенко': 'Виктор Ющенко'}```### Named entity parsingParse `PER` named entities into firstname, surname and patronymic. Depends on &lt;a href=&quot;#NER&quot;&gt;NER&lt;/a&gt; step. Defines `fact` property of `doc.spans`. Uses &lt;a href=&quot;https://github.com/natasha/yargy&quot;&gt;Yargy-parser&lt;/a&gt; internally.Natasha also has built in extractors for &lt;a href=&quot;https://nbviewer.jupyter.org/github/natasha/natasha/blob/master/docs.ipynb#DatesExtractor&quot;&gt;dates&lt;/a&gt;, &lt;a href=&quot;https://nbviewer.jupyter.org/github/natasha/natasha/blob/master/docs.ipynb#MoneyExtractor&quot;&gt;money&lt;/a&gt;, &lt;a href=&quot;https://nbviewer.jupyter.org/github/natasha/natasha/blob/master/docs.ipynb#AddrExtractor&quot;&gt;address&lt;/a&gt;.```python&gt;&gt;&gt; for span in doc.spans:&gt;&gt;&gt;    if span.type == PER:&gt;&gt;&gt;        span.extract_fact(names_extractor)&gt;&gt;&gt; print(doc.spans[:5])&gt;&gt;&gt; {_.normal: _.fact.as_dict for _ in doc.spans if _.type == PER}[DocSpan(start=6, stop=13, type='LOC', text='Израиля', tokens=[...], normal='Израиль'), DocSpan(start=17, stop=24, type='LOC', text='Украине', tokens=[...], normal='Украина'), DocSpan(start=25, stop=35, type='PER', text='Йоэль Лион', tokens=[...], normal='Йоэль Лион', fact=DocFact(slots=[...])), DocSpan(start=89, stop=106, type='LOC', text='Львовской области', tokens=[...], normal='Львовская область'), DocSpan(start=152, stop=158, type='LOC', text='России', tokens=[...], normal='Россия')]{'Йоэль Лион': {'first': 'Йоэль', 'last': 'Лион'}, 'Степан Бандера': {'first': 'Степан', 'last': 'Бандера'}, 'Петр Порошенко': {'first': 'Петр', 'last': 'Порошенко'}, 'Бандера': {'last': 'Бандера'}, 'Виктор Ющенко': {'first': 'Виктор', 'last': 'Ющенко'}}```## Documentation* &lt;a href=&quot;http://nbviewer.jupyter.org/github/natasha/natasha/blob/master/docs.ipynb&quot;&gt;Examples with description + reference&lt;/a&gt;* &lt;a href=&quot;https://habr.com/ru/post/516098/#natasha&quot;&gt;Natasha section in longread on Natasha project&lt;/a&gt; (in Russian) * &lt;a href=&quot;https://youtu.be/-7XT_U6hVvk?t=951&quot;&gt;Natasha section of Datafest 2020 talk&lt;/a&gt; (in Russian)## Evaluation* Segmentation — &lt;a href=&quot;https://github.com/natasha/razdel#quality-performance&quot;&gt;Razdel evalualtion section&lt;/a&gt;* Embedding — &lt;a href=&quot;https://github.com/natasha/navec#evaluation&quot;&gt;Navec evalualtion section&lt;/a&gt;* Morphology — &lt;a href=&quot;https://github.com/natasha/slovnet#morphology-1&quot;&gt;Slovnet Morph evaluation section&lt;/a&gt;* Syntax — &lt;a href=&quot;https://github.com/natasha/slovnet#syntax-1&quot;&gt;Slovnet Syntax evaluation section&lt;/a&gt;* NER — &lt;a href=&quot;https://github.com/natasha/slovnet#ner-1&quot;&gt;Slovnet NER evaluation section&lt;/a&gt;## Support- Chat — https://t.me/natural_language_processing- Issues — https://github.com/natasha/natasha/issues- Commercial support — https://lab.alexkuk.ru## DevelopmentDev env```bashpython -m venv ~/.venvs/natasha-natashasource ~/.venvs/natasha-natasha/bin/activatepip install -r requirements/dev.txtpip install -e .python -m ipykernel install --user --name natasha-natasha```Test```bashmake test```Docs```bashmake exec-docs```Release```bash# Update setup.py versiongit commit -am 'Up version'git tag v1.5.0git pushgit push --tags# Github Action builds dist and publishes to PyPi```</longdescription>
</pkgmetadata>