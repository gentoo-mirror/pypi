<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># KRCG[![PyPI version](https://badge.fury.io/py/krcg.svg)](https://badge.fury.io/py/krcg)[![Validation](https://github.com/lionel-panhaleux/krcg/workflows/Validation/badge.svg)](https://github.com/lionel-panhaleux/krcg/actions)[![Coverage](https://api.codacy.com/project/badge/Grade/32d1b809494e4935967608f13f52004a)](https://app.codacy.com/manual/lionel-panhaleux/krcg?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=lionel-panhaleux/krcg&amp;utm_campaign=Badge_Grade_Dashboard)[![Python version](https://img.shields.io/badge/python-3.8-blue)](https://www.python.org/downloads/)[![License](https://img.shields.io/badge/License-MIT-blue)](https://opensource.org/licenses/MIT)[![Code Style](https://img.shields.io/badge/code%20style-black-black)](https://github.com/psf/black)A Python package build to serve as an interface forthe VEKN [official card texts](http://www.vekn.net/card-lists)and the [Tournament Winning Deck Archive (TWDA)](http://www.vekn.fr/decks/twd.htm).It also contains an ever-growing list of cards rulings, that is kept up to datethanks to the hard work of our contributors.Portions of the materials are the copyrights and trademarks of Paradox Interactive AB,and are used with permission. All rights reserved.For more information please visit [white-wolf.com](http://www.white-wolf.com).![Dark Pack](https://raw.githubusercontent.com/lionel-panhaleux/krcg/master/dark-pack.png)## Offspring projectsThe KRCG library has been used in multiple _offpsring_ projects:-   [krcg-cli](https://github.com/lionel-panhaleux/krcg-cli) is a convenient    Command Line Interface over the library-   [krcg-static](https://github.com/lionel-panhaleux/krcg-static)    is used to generate easy-to-use static files for web developers.    It is available online at [static.krcg.org](https://static.krcg.org)-   [krcg-api](https://github.com/lionel-panhaleux/krcg-api)    is a free RESTful web API exposing to get the most out of the library for web project.    It is available online at [v2.api.krcg.org](https://v2.api.krcg.org)-   [krcg-bot](https://github.com/lionel-panhaleux/krcg-bot) is a friendly Discord bot    that provides official card text and rulings for free.    It is [available for free](https://discordapp.com/oauth2/authorize?client_id=703921850270613505&amp;scope=bot).## Installation[Python 3](https://www.python.org/downloads/) is required.Use pip to install the `krcg` tool:```bashpip install krcg```## Using the libraryKRCG is a Python library for VTES.The code is well-documented and can be explored using Python's built-in `help` function.Here are a few quickstart examples to showcase how the library can be used:### VTES`krcg.vtes.VTES` is the cards library. It needs to be loaded using the `VTES.load()`method. Note that this loads the data from the[KRCG static](https://static.krcg.org) server, where it's already availablein JSON format for free, for anyone who would want to play with it.Alternatively, you can use `VTES.load_from_vekn()` if you want to load directlyfrom the official [VEKN CSV files](https://www.vekn.net/card-lists),although that's a bit slower. That's actually the way [krcg-static] does it to generatethe static JSON files used for the standard load.Then you can play around with VTES to access cards, complete card names or search.```python&gt;&gt;&gt; from krcg.vtes import VTES&gt;&gt;&gt; VTES.load()&gt;&gt;&gt; VTES[&quot;Alastor&quot;].to_json(){  'id': 100038,  'name': 'Alastor'  '_name': 'Alastor',  'url': 'https://static.krcg.org/card/alastor.jpg',  'types': ['Political Action'],  'card_text': (    'Requires a justicar or Inner Circle member.\n'    'Choose a ready Camarilla vampire. If this referendum is successful, '    'search your library for an equipment card and place this card and the equipment '    'on the chosen vampire. Pay half the cost (round down) of the equipment. '    'This vampire may enter combat with any vampire controlled by another Methuselah '    'as a +1 stealth Ⓓ action. This vampire cannot commit diablerie. '    'A vampire may have only one Alastor.'),  'artists': ['Monte Moore'],  'sets': {    'Gehenna': [{'release_date': '2004-05-17', 'rarity': 'Rare'}],    'Kindred Most Wanted': [{'release_date': '2005-02-21', 'precon': 'Alastors', 'copies': 1}],    'Keepers of Tradition': [{'release_date': '2008-11-19', 'rarity': 'Rare'}]}, 'rulings': {   'text': [     'If the given weapon costs blood, the target Alastor pays the cost. [LSJ 20040518]',      'Requirements do not apply. [ANK 20200901]'    ],    'links': {      '[LSJ 20040518]': 'https://groups.google.com/d/msg/rec.games.trading-cards.jyhad/4emymfUPwAM/B2SCC7L6kuMJ',      '[ANK 20200901]': 'http://www.vekn.net/forum/rules-questions/78830-alastor-and-ankara-citadel#100653'    }  }}&gt;&gt;&gt; VTES.complete(&quot;pentex&quot;)['Pentex™ Loves You!', 'Pentex™ Subversion', 'Enzo Giovanni, Pentex Board of Directors', 'Enzo Giovanni, Pentex Board of Directors (ADV)', 'Harold Zettler, Pentex Director'] &gt;&gt;&gt; VTES.search(type=[&quot;political action&quot;], sect=[&quot;anarch&quot;], artist=[&quot;Drew Tucker&quot;]){&lt;#100790 Free States Rant&gt;}&gt;&gt;&gt; VTES.search(precon=[&quot;Fifth Edition: Nosferatu&quot;]){&lt;#201534 Aunt Linda&gt;, &lt;#201536 Baixinho&gt;, &lt;#201537 Belinde&gt;, &lt;#100301 Carrion Crows&gt;, &lt;#100308 Cats' Guidance&gt;, &lt;#102213 Creeping Sabotage&gt;, &lt;#100515 Deep Song&gt;, &lt;#100698 Fame&gt;, &lt;#100863 Guard Dogs&gt;, &lt;#100866 Guardian Angel&gt;, &lt;#100897 Haven Uncovered&gt;, &lt;#201549 Horace Radcliffe&gt;, &lt;#100959 Immortal Grapple&gt;, &lt;#100995 Instinctive Reaction&gt;, &lt;#201553 Larissa Moreira&gt;, &lt;#201555 Lenny Burkhead&gt;, &lt;#101125 Lost in Crowds&gt;, &lt;#101254 Murder of Crows&gt;, &lt;#101321 On the Qui Vive&gt;, &lt;#101483 Preternatural Strength&gt;, &lt;#102214 Protected District&gt;, &lt;#101550 Raven Spy&gt;, &lt;#101564 Rebel&gt;, &lt;#102215 Roundhouse&gt;, &lt;#201568 Ryan&gt;, &lt;#101808 Slum Hunting Ground&gt;, &lt;#101811 Smiling Jack, The Anarch&gt;, &lt;#101945 Taste of Vitae&gt;, &lt;#201545 The Dowager&gt;, &lt;#101070 The Labyrinth&gt;, &lt;#102216 The Warrens&gt;, &lt;#102065 Underbridge Stray&gt;, &lt;#102113 Vessel&gt;, &lt;#102149 Warsaw Station&gt;, &lt;#201573 Wauneka&gt;} &gt;&gt;&gt; VTES.search(set=[&quot;Sword of Caine&quot;], rarity=[&quot;Rare&quot;]){&lt;#100167 Black Hand Emissary&gt;, &lt;#100314 Census Taker&gt;, &lt;#100360 Cloak of Blood&gt;, &lt;#100589 Drink the Blood of Ahriman&gt;, &lt;#100590 Drop Point Network&gt;, &lt;#100655 Epiphany&gt;, &lt;#100757 Follow the Blood&gt;, &lt;#100787 Framing an Ancient Grudge&gt;, &lt;#100865 Guarded Rubrics&gt;, &lt;#101024 Joseph Pander&gt;, &lt;#101111 Liquefy the Mortal Coil&gt;, &lt;#101161 Mantle of the Bestial Majesty&gt;, &lt;#101446 Praetorian Backer&gt;, &lt;#101489 Prison of the Mind&gt;, &lt;#101658 Ruins of Ceoris&gt;, &lt;#101724 Seraph's Second&gt;, &lt;#102057 The Uncoiling&gt;, &lt;#102022 Tribunal Judgment&gt;, &lt;#102027 Trophy: Chosen&gt;, &lt;#102158 Watchtower: The Wolves Feed&gt;}```### TWDA, Analyzer and Deck`krcg.twda.TWDA` is the interface to the TWDA. It needs to be loaded in the same wayas the `VTES` instance, using the `TWDA.load()` method. That time, using`TWDA.load_from_vekn()` instead is considerably slower.Once loaded, it can be used to browse the decks in it.```python&gt;&gt;&gt; from krcg.twda import TWDA&gt;&gt;&gt; TWDA.load()&gt;&gt;&gt; TWDA[&quot;2019ecday2pf&quot;]&lt;Deck #2019ecday2pf: Finnish Politics&gt;&gt;&gt;&gt; print(TWDA[&quot;2019ecday2pf&quot;].to_txt())EC 2019 - Day 2Paris, FranceAugust 18th 20193R+F50 playersOtso Saariluoma-- 2gw8.5 + 1.5vp in the finalDeck Name: Finnish PoliticsCrypt (12 cards, min=4, max=38, avg=5.75)-----------------------------------------4x Anarch Convert     1 -none-                     Caitiff:ANY3x Nana Buruku        8 ANI POT PRE                Guruhi:42x Nangila Were       9 ANI POT PRE obf ser        Guruhi:41x Enkidu, The Noah  11 ANI CEL OBF POT PRO for    Gangrel antitribu:41x Black Annis        9 OBF POT ani pro            Nosferatu antitribu:41x Andre LeRoux       3 aus                        Toreador:5Library (65 cards)Master (26; 6 trifle)4x Anarch Revolt1x Archon Investigation6x Ashur Tablets1x Dreams of the Sphinx1x Fame1x Giant's Blood1x Information Highway1x Mbare Market, Harare2x Pentex(TM) Subversion1x Powerbase: Luanda1x Powerbase: Montreal5x Villein1x Wider ViewAction (5)3x Deep Song1x Entrancement1x Well-MarkedRetainer (1)1x Mr. WinthropReaction (6)1x Cats' Guidance1x Delaying Tactics2x On the Qui Vive2x Sense the Savage WayCombat (26)1x Canine Horde5x Carrion Crows1x Glancing Blow5x Immortal Grapple1x Mighty Grapple1x Slam1x Stunt Cycle4x Taste of Vitae2x Thrown Sewer Lid4x Torn Signpost1x Undead StrengthEvent (1)1x Dragonbound&gt;&gt;&gt; from datetime import date&gt;&gt;&gt; len([d for d in TWDA.values() if date(2019, 1, 1) &lt; d.date &lt; date(2020, 1, 1) and d.players_count &gt;= 25])27```The `krcg.analyzer` can provide some statistics over a collection of decks:```python&gt;&gt;&gt; from krcg.analyzer import Analyzer&gt;&gt;&gt; # You can analyze the whole TWDA, or a fragment of it, or any collection of decks&gt;&gt;&gt; A = Analyzer([d for d in TWDA.values() if date(2019, 1, 1) &lt; d.date &lt; date(2020, 1, 1)])&gt;&gt;&gt; # A blank refresh will provide basic statistics&gt;&gt;&gt; A.refresh()&gt;&gt;&gt; A.played.most_common(5)[(&lt;#100588 Dreams of the Sphinx&gt;, 101), (&lt;#101384 Pentex™ Subversion&gt;, 96), (&lt;#101321 On the Qui Vive&gt;, 86), (&lt;#102121 Villein&gt;, 83), (&lt;#100824 Giant's Blood&gt;, 74)]&gt;&gt;&gt; A.average[VTES[&quot;Villein&quot;]]4.409638554216869&gt;&gt;&gt; A.variance[VTES[&quot;Villein&quot;]]3.6876179416461032&gt;&gt;&gt; # Refreshing with a list of cards will compute cards affinity using similar decks&gt;&gt;&gt; # similarity=1 tells the engine to select decks that contains all provided cards&gt;&gt;&gt; A.refresh(VTES[&quot;Aid from Bats&quot;], similarity=1)&gt;&gt;&gt; # now the candidates method can be used&gt;&gt;&gt; A.candidates(VTES[&quot;Aid from Bats&quot;])[:5][(&lt;#100515 Deep Song&gt;, 1.0000000000000002), (&lt;#100301 Carrion Crows&gt;, 1.0000000000000002), (&lt;#101945 Taste of Vitae&gt;, 0.7777777777777779), (&lt;#200185 Beetleman&gt;, 0.6666666666666667), (&lt;#100698 Fame&gt;, 0.6666666666666667)]```The `krcg.seating` module provides functions to compute optimal seatings:```python&gt;&gt;&gt; from krcg import seating&gt;&gt;&gt; # permutations gives you the list of players for each round&gt;&gt;&gt; seating.permutations(12, 3)[[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]]&gt;&gt;&gt; # things get funny when you have 6, 7 or 11 players: you need more rounds&gt;&gt;&gt; # but not all players play every round&gt;&gt;&gt; seating.permutations(7, 3)[[4, 5, 6, 7], [1, 2, 3, 7], [3, 4, 5, 6], [1, 2, 6, 7], [1, 2, 3, 4, 5]]&gt;&gt;&gt; # you can use the Round class to get tables from the permutations&gt;&gt;&gt; [seating.Round(p) for p in seating.permutations(14, 3)][[[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14]], [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14]], [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14]]]&gt;&gt;&gt; # and the optimise function to search for an optimal seating&gt;&gt;&gt; result, score = seating.optimise(seating.permutations(12, 3), iterations=50000)&gt;&gt;&gt; result[[[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]], [[2, 9, 6, 10], [12, 8, 1, 5], [3, 7, 4, 11]], [[11, 5, 10, 1], [6, 4, 12, 7], [8, 3, 9, 2]]]&gt;&gt;&gt; # score.rules gives a score over the nine official rules for optimal seating&gt;&gt;&gt; score.rules[0, 0, 0.0, 9, 0, 0, 0, 1.118033988749895, 2]&gt;&gt;&gt; # you can inspect violations individualy&gt;&gt;&gt; # for example rule #4 (players are opponents twice) has 9 violations, to see them:&gt;&gt;&gt; score.R4[[1, 5], [2, 3], [2, 9], [3, 4], [4, 7], [5, 8], [6, 7], [9, 10], [10, 11]]&gt;&gt;&gt; # for more details about the Score structure, check the docstring&gt;&gt;&gt; help(seating.Score)```And finally, the `krcg.deck.Deck` class can be useful to parse and manipulate any deck.```python&gt;&gt;&gt; from krcg.deck import Deck&gt;&gt;&gt; with open(&quot;First_Blood_Nosferatu.txt&quot;) as f:&gt;&gt;&gt;     deck = Deck.from_txt(f)&gt;&gt;&gt; deck.crypt[(&lt;#200549 Gustaphe Brunnelle&gt;, 2), (&lt;#200571 Harold Tanner&gt;, 2), (&lt;#200696 Jeremy &quot;Wix&quot; Wyzchovsky&gt;, 2), (&lt;#201116 Petra&gt;, 2), (&lt;#200185 Beetleman&gt;, 2), (&lt;#200190 Benjamin Rose&gt;, 2)]&gt;&gt;&gt; deck.library[(&lt;#100698 Fame&gt;, 2), (&lt;#100070 Animalism&gt;, 2), (&lt;#101015 J. S. Simmons, Esq.&gt;, 1), (&lt;#101070 The Labyrinth&gt;, 1), (&lt;#101073 Laptop Computer&gt;, 2), (&lt;#101125 Lost in Crowds&gt;, 6), (&lt;#100093 Army of Rats&gt;, 2), (&lt;#101550 Raven Spy&gt;, 4), (&lt;#101808 Slum Hunting Ground&gt;, 1), (&lt;#100199 Blood Doll&gt;, 6), (&lt;#100029 Aid from Bats&gt;, 12), (&lt;#100308 Cats' Guidance&gt;, 4), (&lt;#100362 Cloak the Gathering&gt;, 6), (&lt;#100390 Computer Hacking&gt;, 4)]&gt;&gt;&gt; # fetch a deck from Amaranth UID&gt;&gt;&gt; deck = Deck.from_amaranth(&quot;4d3aa426-70da-44b7-8cb7-92377a1a0dbd&quot;)&gt;&gt;&gt; deck.name'First Blood: Tremere'&gt;&gt;&gt; deck.crypt[(&lt;Card #201020 Muhsin Samir&gt;, 2), (&lt;Card #201213 Rutor&gt;, 2), (&lt;Card #201388 Troius&gt;, 2), (&lt;Card #201501 Zane&gt;, 2), (&lt;Card #200025 Aidan Lyle&gt;, 2), (&lt;Card #200280 Claus Wegener&gt;, 2)]&gt;&gt;&gt; print(deck.to_txt(&quot;lackey&quot;))1Academic Hunting Ground1Arcane Library4Blood Doll1Chantry2Vast Wealth12Govern the Unaligned1Thadius Zho4.44 Magnum1Ivory Bow2Sport Bike1Charnas the Imp6Bonding4Enhanced Senses5Forced Awakening5On the Qui Vive4Precognition4Spirit's Touch8Telepathic Misdirection8Apportation10Theft of Vitae2Walk of FlameCrypt:2Muhsin Samir2Rutor2Troius2Zane2Aidan Lyle2Claus Wegener```## ContributeFeel free to submit pull requests, they will be merged as long as they pass the tests.Do not hestitate to submit issues or vote on them if you want a feature implemented.### Design considerationsThe package uses no database by design.The TWDA, search engine and cards dict are kept in memory for better performances.The whole library generates a memory footprint between 128MB and 256MB.The package uses external data sources for card list, so that it needs not be updatedwhen new sets are released or official VEKN CSV files are changed: it can usenew data sets as soon as they're available.### Contribute Rulings (non-developers)Please do not hestitate to contribute rulings: all help is welcome.Open an [issue](https://github.com/lionel-panhaleux/krcg/issues)with a ruling you think should be added,provide a link to an online post by one of the rules directors:-   From 2016-12-04 onward, [Vincent Ripoll (ANK)](http://www.vekn.net/forum/news-and-announcements/75402-new-inner-circle-vekn-board-of-directors#79470)-   From 2011-07-06 onward, [Pascal Bertrand (PIB)](https://groups.google.com/d/msg/rec.games.trading-cards.jyhad/VzRGZO_Iuto/BjJGRVvJ5Z8J)-   From 1998-06-22 onward, [L. Scott Johnson (LSJ)](https://groups.google.com/d/msg/rec.games.trading-cards.jyhad/RIX1tLgOFjg/xKikfSarfd8J)-   From 1994-12-15 onward, [Thomas R Wylie (TOM)](https://groups.google.com/d/msg/rec.games.trading-cards.jyhad/Dm_gIP3YvUs/qTyKyq2NWv4J)### Contribute Rulings (developers)Feel free to contribute rulings as Pull Requests directly, this is very appreciated.Add the ruling link to[rulings-links.yaml](https://github.com/lionel-panhaleux/krcg/blob/master/rulings/rulings-links.yaml),and the ruling itself to[cards-rulings.yaml](https://github.com/lionel-panhaleux/krcg/blob/master/rulings/cards-rulings.yaml) or[general-rulings.yaml](https://github.com/lionel-panhaleux/krcg/blob/master/rulings/general-rulings.yaml)depending on the case.The format is mostly self-explanatory:-   Cards are reference by ID and name in the format `ID|Name`.-   Card names inside rulings text should be between bracers, eg. `{.44 Magnum}`-   Individual rulings in `cards-rulings.yaml` must provide one or more references    to ruling links at the end of the text, between brackets, eg `[LSJ 20100101]`In doing so, please follow the following guidelines:-   Keep the YAML files clean and alphabetically sorted (you can use a YAML formatter)-   Make the rulings as concise as possible-   Prefix the ruling with the discipline level and/or type the ruling applies to (if any),    eg. prefix with `[PRO] [COMBAT]` if the ruling applies only to the card played in combat at superior Protean.-   Adapt the ruling wording to the cards it applies to (ie. use masculine/feminin forms)-   You can run the tests with the `pytest` command to check everything is OK</longdescription>
</pkgmetadata>