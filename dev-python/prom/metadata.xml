<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># PromAn opinionated lightweight orm for PostgreSQL or SQLite.Prom has been used in both single threaded and multi-threaded environments, including environments using Greenthreads.## 1 Minute Getting Started with SQLiteFirst, install prom:    $ pip install promSet an environment variable:    $ export PROM_DSN=sqlite://:memory:Start python:    $ pythonCreate a prom Orm:```python&gt;&gt;&gt; import prom&gt;&gt;&gt;&gt;&gt;&gt; class Foo(prom.Orm):...     table_name = &quot;foo_table_name&quot;...     bar = prom.Field(int)...&gt;&gt;&gt;```Now go wild and create some `Foo` objects:```python&gt;&gt;&gt; for x in range(10):...     f = Foo.create(bar=x)...&gt;&gt;&gt;```Now query them:```python&gt;&gt;&gt; f = Foo.query.one()&gt;&gt;&gt; f.bar0&gt;&gt;&gt; f.pk1&gt;&gt;&gt;&gt;&gt;&gt; for f in Foo.query.in_bar([3, 4, 5]):...     f.pk...345&gt;&gt;&gt;```Update them:```python&gt;&gt;&gt; for f in Foo.query:...     f.bar += 100...     f.save()...&gt;&gt;&gt;```and get rid of them:```python&gt;&gt;&gt; for f in Foo.query:...     f.delete()...&gt;&gt;&gt;```Congratulations, you have now created, retrieved, updated, and deleted from your database.-------------------------------------------------------------------------------## ConfigurationProm can be automatically configured on import by setting the environment variable `PROM_DSN`.The `PROM_DSN` should define a dsn url:    &lt;full.python.path.InterfaceClass&gt;://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;database&gt;?&lt;options=val&amp;query=string&gt;#&lt;name&gt;The built-in interface classes don't need their full python paths, you can just use `sqlite` and `postgres`.So to use the builtin Postgres interface on `testdb` database on host `localhost` with username `testuser` and password `testpw`:    postgres://testuser:testpw@localhost/testdbAnd to set it in your environment:    export PROM_DSN=postgres://testuser:testpw@localhost/testdbAfter you've set the environment variable, then you just need to import Prom in your code:```pythonimport prom```and Prom will take care of parsing the dsn url(s) and creating the connection(s) automatically.### Multiple db interfaces or connectionsIf you have multiple connections, you can actually set multiple environment variables:    export PROM_DSN_1=postgres://testuser:testpw@localhost/testdb1#conn_1    export PROM_DSN_2=sqlite://testuser:testpw@localhost/testdb2#conn_2It's easy to have one set of `prom.Orm` children use one connection and another set use a different connection, since the fragment part of a Prom dsn url sets the name:```pythonimport promprom.configure(&quot;Interface://testuser:testpw@localhost/testdb#connection_1&quot;)prom.configure(&quot;Interface://testuser:testpw@localhost/testdb#connection_2&quot;)class Orm1(prom.Orm):    connection_name = &quot;connection_1&quot;  class Orm2(prom.Orm):    connection_name = &quot;connection_2&quot;```Now, any child class that extends `Orm1` will use `connection_1` and any child class that extends `Orm2` will use `connection_2`.## Creating ModelsCheckout the [README](https://github.com/Jaymon/prom/blob/master/docs/README_MODEL.md) to see how to define the db schema and create models your python code can use.## Querying RowsCheckout the [README](https://github.com/Jaymon/prom/blob/master/docs/README_QUERY.md) to see how to perform queries on the db.## VersionsWhile Prom will most likely work on other versions, Prom is tested to work on 2.7+ and 3.8.## Installation### PostgresIf you want to use Prom with Postgres, you need psycopg2:    $ apt-get install libpq-dev python-dev    $ pip install psycopg### Green ThreadsIf you want to use Prom with gevent, you'll need gevent and psycogreen:    $ pip install gevent    $ pip install psycogreenThese are the versions we're using:    $ pip install &quot;gevent==20.6.2&quot;    $ pip install &quot;psycogreen==1.0&quot;Then you can setup Prom like this:```pythonfrom prom.interface.postgres import geventgevent.patch_all()```Now you can use Prom in the same way you always have. If you would like to configure the threads and stuff, you can pass in some configuration options using the dsn, the three parameters are *async*, *pool_maxconn*, *pool_minconn*, and *pool_class*. The only one you'll really care about is *pool_maxconn* which sets how many connections should be created.### PromProm installs using pip:    $ pip install promand to install the latest and greatest:    $ pip install --upgrade &quot;git+https://github.com/Jaymon/prom#egg=prom&quot;### Using for the first timeProm takes the approach that you don't want to be hassled with table installation while developing, so when it tries to do something and sees that the table doesn't yet exist, it will use your defined fields for your `prom.model.Orm` child and create a table for you, that way you don't have to remember to run a script or craft some custom db query to add your tables. Prom takes care of that for you automatically.Likewise, if you add a field (and the field is not required) then prom will go ahead and add that field to your table so you don't have to bother with crafting `ALTER` queries while developing.If you want to install the tables manually, you can create a script or something and use the Orm's `install()` method:    SomeOrm.install()</longdescription>
</pkgmetadata>