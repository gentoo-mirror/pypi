<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># IBM Sample CodeThis repository contains Python code to manage IBM Security Appliances using their respective REST APIs.ISAM appliance has the most mature code.Code for ISDS appliance is under development.Code for ISVG appliance is brand new (tested with 10.0.1.0 and higher only).## RequirementsPython v3.7 and above is required for this package.The following Python Packages are required:1. requests - for making REST API calls2. PyYAML - for the sample code to work3. jmespath - is required for sample codeThe following Python Packages are optional:1. pyOpenSSL - to perform action on certificates (used for idempotency in management_ssl_certificate)2. python-dateutil - date utilities (used for idempotency in management_ssl_certificate)Appliances need to have an ip address defined for their LMI. This may mean that appliances have had their initial setup done with license acceptance.## VersioningThis package uses a date for versioning. For example: &quot;2017.03.18.0&quot;It is the date when the package is released with a sequence number at the end to handle when there are multiple releases in one day (expected to be uncommon).## FeaturesThis python package provides the following features:1. Easy to use - the details of making a REST call are handled within an appliance class2. Intuitive layout of code package and naming maps to the GUI interface of appliance3. Idempotency - functions that make updates will query the appliance to compare given data to see if a changes is required before making the actual change.4. Commit and Deploy steps are provided separately to allow for flexibility in invoking them5. Standard logging is included - with the ability to set logging levels.6. Parameters to function will use standard default values wherever possible.7. A force option is provided to override idempotency.8. Compare functions are provided - takes JSON output and provide a meaningful comparison.## Example CodeA sample `testisam.py` and `testisds.py` is provided. Provide details of your appliance and a user/password to authenticate.Then call the functions needed. Run the code like you would any other Python script.e.g.: `python testisam.py`Note: the code requires PyYAML (for printing output in YAML) and importlib (dynamically load all packages) packages to work.### Function Data Return Format~~~~{    rc:       &lt;0 for success, higher for errors&gt;    changed:  &lt;True or False&gt;    warnings: &lt;List of strings with warnings - e.g. incompatible version&gt;    data:     &lt;JSON data returned by appliance REST API that the function called&gt;}~~~~Note: it is preferred to return warnings rather than send back a non-zero rc.### Generic test scriptFor simple tests, a modified version is provided that takes the username, password, hostname, method and options as arguments, with the option to perform a commit or not.This makes sense for simple tests but for pytest or unittests, this is not useful.This avoids having to store credentials in a script and allows easier repeat of tests.Example:~~~~python testisam_cmd.py --hostname 192.168.1.1 --method &quot;ibmsecurity.isam.web.iag.export.features.get&quot; --commit ~~~~## Organization of code### Appliance ClassesAn abstract `ibmappliance` class is extended to create a class for each appliance supported here.Currently that is ISAM and ISDS appliances.### User ClassesAn abstract `User` is extended for each type of user needed. For ISAM that is an user for appliance access  and another for authenticating to Web Runtime (Policy Server).### Layout of ISAM packagesThere are four primary ISAM packages - `base`, `web`, `aac` and `fed`. `web` contains all the components neededfor setting up the web functionality including embedded ldap, runtime and features that are activated as part of the`wga` module. `aac` contains features activated as part of the `mga` module and `fed` that of `federation`. `base` contains everything else - including `aac` and `fed` `runtime` and `Audit Configuration` (these are common to `aac` and `fed` and thus in `base`). ### Package and File NamesThe package and file names were created with the following intention:1. Maintain names that match what is in the GUI interface (LMI for ISAM appliance).2. Each file should contain just one of each function type (see list below) - i.e. just one add().3. Group related function - one of each type - in a file.4. The URI for the REST API calls with a file will be the same and manage a &quot;feature&quot; of the appliance.### UtilitiesContains miscellaneous functions that are generic and independent of any IBM Appliance, e.g. `json_compare()`.## Function Types### `get_all()`This function typically will return all objects related to that feature.### `get()`This function returns the details of one particular object.### `set()`This function will determine if the object to be manipulated exists, if not then it calls add() otherwise it will call update().In cases where there is no update() then it will compare to see if there is a difference between existing value on the applianceto that being set via the function - if different then it `delete()`'s the object before calling add().### `add()`Check and see if the object already exists - if so then skip, otherwise add it.### `update()`Check and see if the object already exists - if so then check if update is needed before making a change, otherwise do nothing.### `delete()`Check and see if the object already exists - if so then delete, otherwise do nothing.### `import_&lt;&gt;()`&quot;import&quot; is a reserved word, so there is a suffix to indicate what to import (e.g. file or key). This will check if the object exists before importing it.### `export_&lt;&gt;()`Export will check if exists before exporting it - when exporting to a file, and the file already exists it will not re-export.Export ### `compare()`Compare takes JSON output from the get_all() functions and compares it. It will strip data from JSON that are unique to each appliance (e.g. UUID values). The deleted_keys value returned lists the JSON keys that were deleted before comparison.## Function Parameters### Appliance objectCreate an appliance object and pass it to the function. Appliance and the User object needed are classes to allow forfuture extensions like authentication using certificate instead of username/password.### `check_mode`This defaults to False, pass True to return and not make a change. The &quot;changed&quot; flag will be set to True if changes are detected.### `force`This defaults to False, pass True to override the idempotency logic.### Other ParametersThe other parameters will match the REST API documentation verbatim. The intention was to reference the REST API documentationand not have to repeat it. Please reference REST API documentation for details.## Adding and Making ChangesPlease raise an issue in github when a bug is discovered or there are REST APIs not covered by this package.Provide detailed notes along with trace logs when a bug is reported.# LicenseThe contents of this repository are open-source under the Apache 2.0 licence.```Copyright 2017 International Business MachinesLicensed under the Apache License, Version 2.0 (the &quot;License&quot;);you may not use this file except in compliance with the License.You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0Unless required by applicable law or agreed to in writing, softwaredistributed under the License is distributed on an &quot;AS IS&quot; BASIS,WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.See the License for the specific language governing permissions andlimitations under the License.```</longdescription>
</pkgmetadata>