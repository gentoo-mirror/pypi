<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>=============================Tafra: a minimalist dataframe=============================.. image:: https://img.shields.io/pypi/v/tafra.svg    :target: https://pypi.org/project/tafra/.. image:: https://travis-ci.org/petbox-dev/tafra.svg?branch=master    :target: https://travis-ci.org/petbox-dev/tafra.. image:: https://readthedocs.org/projects/tafra/badge/?version=latest    :target: https://tafra.readthedocs.io/en/latest/?badge=latest    :alt: Documentation Status.. image:: https://coveralls.io/repos/github/petbox-dev/tafra/badge.svg    :target: https://coveralls.io/github/petbox-dev/tafra    :alt: Coverage StatusThe ``tafra`` began life as a thought experiment: how could we reduce the ideaof a da\ *tafra*\ me (as expressed in libraries like ``pandas`` or languageslike R) to its useful essence, while carving away the cruft?The `original proof of concept &lt;https://usethe.computer/posts/12-typing-groupby.html&gt;`_stopped at &quot;group by&quot;... `original proof of concept`_This library expands on the proof of concept to produce a practicallyuseful ``tafra``, which we hope you may find to be a helpful lightweightsubstitute for certain uses of ``pandas``.A ``tafra`` is, more-or-less, a set of named *columns* or *dimensions*.Each of these is a typed ``numpy`` array of consistent length, representingthe values for each column by *rows*.The library provides lightweight syntax for manipulating rows and columns,support for managing data types, iterators for rows and sub-frames,`pandas`-like &quot;transform&quot; support and conversion from `pandas` Dataframes,and SQL-style &quot;group by&quot; and join operations.+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Tafra                      | `Tafra &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra&gt;`_                                                 |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Aggregations               | `Union &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.group.Union&gt;`_,                                               ||                            | `GroupBy &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.group.GroupBy&gt;`_,                                           ||                            | `Transform &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.group.Transform&gt;`_,                                       ||                            | `IterateBy &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.group.IterateBy&gt;`_,                                       ||                            | `InnerJoin &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.group.InnerJoin&gt;`_,                                       ||                            | `LeftJoin &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.group.LeftJoin&gt;`_,                                         ||                            | `CrossJoin &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.group.CrossJoin&gt;`_                                        |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Aggregation Helpers        | `union &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.union&gt;`__,                                         ||                            | `union_inplace &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.union_inplace&gt;`_,                          ||                            | `group_by &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.group_by&gt;`_,                                    ||                            | `transform &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.transform&gt;`__,                                 ||                            | `iterate_by &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.iterate_by&gt;`_,                                ||                            | `inner_join &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.inner_join&gt;`_,                                ||                            | `left_join &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.left_join&gt;`_,                                  ||                            | `cross_join &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.cross_join&gt;`_                                 |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Constructors               | `as_tafra &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.as_tafra&gt;`_,                                    ||                            | `from_dataframe &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.from_dataframe&gt;`_,                        ||                            | `from_series &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.from_series&gt;`_,                              ||                            | `from_records &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.from_records&gt;`_                             |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| SQL Readers                | `read_sql &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.read_sql&gt;`_,                                    ||                            | `read_sql_chunks &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.read_sql_chucnks&gt;`_                      |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Destructors                | `to_records &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.to_records&gt;`_,                                ||                            | `to_list &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.to_list&gt;`_,                                      ||                            | `to_tuple &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.to_tuple&gt;`_,                                    ||                            | `to_array &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.to_array&gt;`_,                                    ||                            | `to_pandas &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.to_pandas&gt;`_                                   |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Properties                 | `rows &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.rows&gt;`_,                                            ||                            | `columns &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.columns&gt;`_,                                      ||                            | `data &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.data&gt;`_,                                            ||                            | `dtypes &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.dtypes&gt;`_,                                        ||                            | `size &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.size&gt;`_,                                            ||                            | `ndim &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.ndim&gt;`_,                                            ||                            | `shape &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.shape&gt;`_                                           |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Iter Methods               | `iterrows &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.iterrows&gt;`_,                                    ||                            | `itertuples &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.itertuples&gt;`_,                                ||                            | `itercols &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.itercols&gt;`_                                     |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Functional Methods         | `row_map &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.row_map&gt;`_,                                      ||                            | `tuple_map &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.tuple_map&gt;`_,                                  ||                            | `col_map &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.col_map&gt;`_,                                      ||                            | `pipe &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.pipe&gt;`_                                             |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Dict-like Methods          | `keys &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.keys&gt;`_,                                            ||                            | `values &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.values&gt;`_,                                        ||                            | `items &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.items&gt;`_,                                          ||                            | `get &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.get&gt;`_,                                              ||                            | `update &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.update&gt;`_,                                        ||                            | `update_inplace &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.update_inplace&gt;`_,                        ||                            | `update_dtypes &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.update_dtypes&gt;`_,                          ||                            | `update_dtypes_inplace &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.update_dtypes_inplace&gt;`_           |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Other Helper Methods       | `select &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.select&gt;`_,                                        ||                            | `head &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.head&gt;`_,                                            ||                            | `copy &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.copy&gt;`_,                                            ||                            | `rename &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.rename&gt;`_,                                        ||                            | `rename_inplace &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.rename_inplace&gt;`_,                        ||                            | `coalesce &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.coalesce&gt;`_,                                    ||                            | `coalesce_inplace &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.coalesce_inplace&gt;`_,                    ||                            | `_coalesce_dtypes &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra._coalesce_dtypes&gt;`_,                    ||                            | `delete &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.delete&gt;`_,                                        ||                            | `delete_inplace &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.delete_inplace&gt;`_                         |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Printer Methods            | `pprint &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.pprint&gt;`_,                                        ||                            | `pformat &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.pformat&gt;`_,                                      ||                            | `to_html &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra.to_html&gt;`_                                       |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+| Indexing Methods           | `_slice &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra._slice&gt;`_,                                        ||                            | `_index &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra._index&gt;`_,                                        ||                            | `_ndindex &lt;https://tafra.readthedocs.io/en/latest/api.html#tafra.base.Tafra._ndindex&gt;`_                                     |+----------------------------+-----------------------------------------------------------------------------------------------------------------------------+Getting Started===============Install the library with `pip &lt;https://pip.pypa.io/en/stable/&gt;`_:.. code-block:: shell    pip install tafraA short example---------------.. code-block:: python    &gt;&gt;&gt; from tafra import Tafra    &gt;&gt;&gt; t = Tafra({    ...    'x': np.array([1, 2, 3, 4]),    ...    'y': np.array(['one', 'two', 'one', 'two'], dtype='object'),    ... })    &gt;&gt;&gt; t.pformat()    Tafra(data = {     'x': array([1, 2, 3, 4]),     'y': array(['one', 'two', 'one', 'two'])},    dtypes = {     'x': 'int', 'y': 'object'},    rows = 4)    &gt;&gt;&gt; print('List:', '\n', t.to_list())    List:     [array([1, 2, 3, 4]), array(['one', 'two', 'one', 'two'], dtype=object)]    &gt;&gt;&gt; print('Records:', '\n', tuple(t.to_records()))    Records:     ((1, 'one'), (2, 'two'), (3, 'one'), (4, 'two'))    &gt;&gt;&gt; gb = t.group_by(    ...     ['y'], {'x': sum}    ... )    &gt;&gt;&gt; print('Group By:', '\n', gb.pformat())    Group By:    Tafra(data = {     'x': array([4, 6]), 'y': array(['one', 'two'])},    dtypes = {     'x': 'int', 'y': 'object'},    rows = 2)Flexibility-----------Have some code that works with ``pandas``, or just a way of doing thingsthat you prefer? ``tafra`` is flexible:.. code-block:: python    &gt;&gt;&gt; df = pd.DataFrame(np.c_[    ...     np.array([1, 2, 3, 4]),    ...     np.array(['one', 'two', 'one', 'two'])    ... ], columns=['x', 'y'])    &gt;&gt;&gt; t = Tafra.from_dataframe(df)And going back is just as simple:.. code-block:: python    &gt;&gt;&gt; df = pd.DataFrame(t.data)Timings=======In this case, lightweight also means performant. Beyond any additionalfeatures added to the library, ``tafra`` should provide the necessarybase for organizing data structures for numerical processing. One of themost important aspects is fast access to the data itself. By minimizingabstraction to access the underlying ``numpy`` arrays, ``tafra`` providesan order of magnitude increase in performance.-   **Import note** If you assign directly to the ``Tafra.data`` or    ``Tafra._data`` attributes, you *must* call ``Tafra._coalesce_dtypes``    afterwards in order to ensure the typing is consistent.Construct a ``Tafra`` and a ``DataFrame``:.. code-block:: python    &gt;&gt;&gt; tf = Tafra({    ...     'x': np.array([1., 2., 3., 4., 5., 6.]),    ...     'y': np.array(['one', 'two', 'one', 'two', 'one', 'two'], dtype='object'),    ...     'z': np.array([0, 0, 0, 1, 1, 1])    ... })    &gt;&gt;&gt; df = pd.DataFrame(t.data)Read Operations---------------Direct access:.. code-block:: python    &gt;&gt;&gt; %timemit x = t._data['x']    55.3 ns Â± 5.64 ns per loop (mean Â± std. dev. of 7 runs, 10000000 loops each)Indirect with some penalty to support ``Tafra`` slicing and ``numpy``'sadvanced indexing:.. code-block:: python    &gt;&gt;&gt; %timemit x = t['x']    219 ns Â± 71.6 ns per loop (mean Â± std. dev. of 7 runs, 1000000 loops each)``pandas`` timing:.. code-block:: python    &gt;&gt;&gt; %timemit x = df['x']    1.55 Âµs Â± 105 ns per loop (mean Â± std. dev. of 7 runs, 1000000 loops each)This is the fastest methed for accessing the numpy array among alternatives of``df.values()``, ``df.to_numpy()``, and ``df.loc[]``.Assignment Operations---------------------Direct access is not recommended as it avoids the validation steps, but itdoes provide fast access to the data attribute:.. code-block:: python    &gt;&gt;&gt; x = np.arange(6)    &gt;&gt;&gt; %timeit tf._data['x'] = x    65 ns Â± 5.55 ns per loop (mean Â± std. dev. of 7 runs, 10000000 loops each)Indidrect access has a performance penalty due to the validation checks toensure consistency of the ``tafra``:.. code-block:: python    &gt;&gt;&gt; %timeit tf['x'] = x    7.39 Âµs Â± 950 ns per loop (mean Â± std. dev. of 7 runs, 100000 loops each)Even so, there is considerable performance improvement over ``pandas``.``pandas`` timing:.. code-block:: python    &gt;&gt;&gt; %timeit df['x'] = x    47.8 Âµs Â± 3.53 Âµs per loop (mean Â± std. dev. of 7 runs, 10000 loops each)Grouping Operations-------------------``tafra`` also excels at aggregation methods, the primary of which are aSQL-like ``GROUP BY`` and the split-apply-combine equivalent to a SQL-like``GROUP BY`` following by a ``LEFT JOIN`` back to the original table... code-block:: python    &gt;&gt;&gt; %timeit tf.group_by(['y', 'z'], {'x': sum})    138 Âµs Â± 4.03 Âµs per loop (mean Â± std. dev. of 7 runs, 10000 loops each)    &gt;&gt;&gt; %timeit tf.transform(['y', 'z'], {'sum_x': (sum, 'x')})    161 Âµs Â± 2.31 Âµs per loop (mean Â± std. dev. of 7 runs, 10000 loops each)The equivalent ``pandas`` functions are given below. They require a chainof several object methods to perform the same role, and the transform requiresa copy operation and assignment into the copied ``DataFrame`` in order topreserve immutability... code-block:: python    &gt;&gt;&gt; %timeit df.groupby(['y','z']).agg({'x': 'sum'}).reset_index()    2.5 ms Â± 177 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)    &gt;&gt;&gt; %%timeit    ... tdf = df.copy()    ... tdf['x'] = df.groupby(['y', 'z'])[['x']].transform(sum)    2.81 ms Â± 143 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)Version History===============1.0.10------* Add ``pipe`` and overload ``&gt;&gt;`` operator for Tafra objects1.0.9-----* Add test files to build1.0.8-----* Check rows in constructor to ensure equal data length1.0.7-----* Handle missing or NULL values in ``read_csv()``.* Cast empty elements to None when updating dtypes to avoid failure of ``np.astype()``.* Update some typing, minor refactoring for performance1.0.6-----* Additional validations in constructor, primary to evaluate Iterables of values* Split ``col_map`` to ``col_map`` and ``key_map`` as the original function's return signature depending upon an argument.* Fix some documentation typos1.0.5-----* Add ``tuple_map`` method* Refactor all iterators and ``..._map`` functions to improve performance* Unpack ``np.ndarray`` if given as keys to constructor* Add ``validate=False`` in ``__post_init__`` if inputs are **known** to be valid to improve performance1.0.4-----* Add ``read_csv``, ``to_csv``* Various refactoring and improvement in data validation* Add ``typing_extensions`` to dependencies* Change method of ``dtype`` storage, extract ``str`` representation from ``np.dtype()``1.0.3-----* Add ``read_sql`` and ``read_sql_chunks``* Add ``to_tuple`` and ``to_pandas``* Cleanup constructor data validation1.0.2-----* Add object_formatter to expose user formatting for dtype=object* Improvements to indexing and slicing1.0.1-----* Add iter functions* Add map functions* Various constructor improvements1.0.0-----* Initial Release</longdescription>
</pkgmetadata>