<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>=======================================================Icegrams: A fast, compact trigram library for Icelandic=======================================================.. image:: https://github.com/mideind/Icegrams/actions/workflows/python-package.yml/badge.svg    :target: https://github.com/mideind/Icegrams/actions?query=workflow%3A%22Python+package%22********Overview**********Icegrams** is an MIT-licensed Python 3 (&gt;= 3.7) package that encapsulates a**large trigram library for Icelandic**. (A trigram is a tuple ofthree consecutive words or tokens that appear in real-world text.)14 million unique trigrams and their frequency counts are heavily compressedusing radix tries and `quasi-succinct indexes &lt;https://arxiv.org/abs/1206.4300&gt;`_employing Elias-Fano encoding. This enables the ~43 megabyte compressed trigram fileto be mapped directly into memory, with no *ex ante* decompression, for fast queries(typically ~10 microseconds per lookup).The Icegrams library is implemented in Python and C/C++, glued together via`CFFI &lt;https://cffi.readthedocs.io/en/latest/&gt;`_.The trigram storage approach is based on a`2017 paper by Pibiri and Venturini &lt;http://pages.di.unipi.it/pibiri/papers/SIGIR17.pdf&gt;`_,also referring to`Ottaviano and Venturini &lt;http://www.di.unipi.it/~ottavian/files/elias_fano_sigir14.pdf&gt;`_(2014) regarding partitioned Elias-Fano indexes.You can use Icegrams to obtain probabilities (relative frequencies) ofover a million different **unigrams** (single words or tokens), or of**bigrams** (pairs of two words or tokens), or of **trigrams**. You can alsoask it to return the N most likely successors to any unigram or bigram.Icegrams is useful for instance in spelling correction, predictive typing,to help disabled people write text faster, and for various text generation,statistics and modelling tasks.The Icegrams trigram corpus is built from the 2017 edition of theIcelandic Gigaword Corpus(`Risamálheild &lt;https://malheildir.arnastofnun.is/?mode=rmh2017&gt;`_),which is collected and maintained by *The Árni Magnússon Institute**for Icelandic Studies*. A mixed, manually vetted subset consisting of 157documents from the corpus was used as the source of the token stream,yielding over 100 million tokens. Trigrams that only occurredonce or twice in the stream were eliminated before creating thecompressed Icegrams database. The creation process is further`described here &lt;https://github.com/mideind/Icegrams/blob/master/doc/overview.md&gt;`_.*******Example*******&gt;&gt;&gt; from icegrams import Ngrams&gt;&gt;&gt; ng = Ngrams()&gt;&gt;&gt; # Obtain the frequency of the unigram 'Ísland'&gt;&gt;&gt; ng.freq(&quot;Ísland&quot;)42018&gt;&gt;&gt; # Obtain the probability of the unigram 'Ísland', as a fraction&gt;&gt;&gt; # of the frequency of all unigrams in the database&gt;&gt;&gt; ng.prob(&quot;Ísland&quot;)0.0003979926900206475&gt;&gt;&gt; # Obtain the log probability (base e) of the unigram 'Ísland'&gt;&gt;&gt; ng.logprob(&quot;Ísland&quot;)-7.8290769196308005&gt;&gt;&gt; # Obtain the frequency of the bigram 'Katrín Jakobsdóttir'&gt;&gt;&gt; ng.freq(&quot;Katrín&quot;, &quot;Jakobsdóttir&quot;)3517&gt;&gt;&gt; # Obtain the probability of 'Jakobsdóttir' given 'Katrín'&gt;&gt;&gt; ng.prob(&quot;Katrín&quot;, &quot;Jakobsdóttir&quot;)0.23298013245033142&gt;&gt;&gt; # Obtain the probability of 'Júlíusdóttir' given 'Katrín'&gt;&gt;&gt; ng.prob(&quot;Katrín&quot;, &quot;Júlíusdóttir&quot;)0.013642384105960274&gt;&gt;&gt; # Obtain the frequency of 'velta fyrirtækisins er'&gt;&gt;&gt; ng.freq(&quot;velta&quot;, &quot;fyrirtækisins&quot;, &quot;er&quot;)4&gt;&gt;&gt; # adj_freq returns adjusted frequencies, i.e incremented by 1&gt;&gt;&gt; ng.adj_freq(&quot;xxx&quot;, &quot;yyy&quot;, &quot;zzz&quot;)1&gt;&gt;&gt; # Obtain the N most likely successors of a given unigram or bigram,&gt;&gt;&gt; # in descending order by log probability of each successor&gt;&gt;&gt; ng.succ(10, &quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;)[('Íslands', -1.3708244393477589), ('.', -2.2427905461504567),    (',', -3.313814878299737), ('og', -3.4920631097060557), ('sem', -4.566577846795106),    ('er', -4.720728526622363), ('að', -4.807739903611993), ('um', -5.0084105990741445),    ('en', -5.0084105990741445), ('á', -5.25972502735505)]*********Reference*********Initializing Icegrams---------------------After installing the ``icegrams`` package, use the following code toimport it and initialize an instance of the ``Ngrams`` class::    from icegrams import Ngrams    ng = Ngrams()Now you can use the ``ng`` instance to query for unigram, bigramand trigram frequencies and probabilities.The Ngrams class----------------* ``__init__(self)``  Initializes the ``Ngrams`` instance.* ``freq(self, *args) -&gt; int``  Returns the frequency of a unigram, bigram or trigram.  * ``str[] *args`` A parameter sequence of consecutive unigrams    to query the frequency for.  * **returns** An integer with the frequency of the unigram,    bigram or trigram.  To query for the frequency of a unigram in the text, call  ``ng.freq(&quot;unigram1&quot;)``. This returns the number of times that  the unigram appears in the database. The unigram is  queried as-is, i.e. with no string stripping or lowercasing.  To query for the frequency of a bigram in the text, call  ``ng.freq(&quot;unigram1&quot;, &quot;unigram2&quot;)``.  To query for the frequency of a trigram in the text, call  ``ng.freq(&quot;unigram1&quot;, &quot;unigram2&quot;, &quot;unigram3&quot;)``.  If you pass more than 3 arguments to ``ng.freq()``, only the  last 3 are significant, and the query will be treated  as a trigram query.  Examples::    &gt;&gt;&gt;&gt; ng.freq(&quot;stjórnarskrá&quot;)    2973    &gt;&gt;&gt;&gt; ng.freq(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;)    39    &gt;&gt;&gt;&gt; ng.freq(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;, &quot;Íslands&quot;)    12    &gt;&gt;&gt;&gt; ng.freq(&quot;xxx&quot;, &quot;yyy&quot;, &quot;zzz&quot;)    0* ``adj_freq(self, *args) -&gt; int``  Returns the adjusted frequency of a unigram, bigram or trigram.  * ``str[] *args`` A parameter sequence of consecutive unigrams    to query the frequency for.  * **returns** An integer with the adjusted frequency of the unigram,    bigram or trigram. The adjusted frequency is the actual    frequency plus 1. The method thus never returns 0.  To query for the frequency of a unigram in the text, call  ``ng.adj_freq(&quot;unigram1&quot;)``. This returns the number of times that  the unigram appears in the database, plus 1. The unigram is  queried as-is, i.e. with no string stripping or lowercasing.  To query for the frequency of a bigram in the text, call  ``ng.adj_freq(&quot;unigram1&quot;, &quot;unigram2&quot;)``.  To query for the frequency of a trigram in the text, call  ``ng.adj_freq(&quot;unigram1&quot;, &quot;unigram2&quot;, &quot;unigram3&quot;)``.  If you pass more than 3 arguments to ``ng.adj_freq()``, only the  last 3 are significant, and the query will be treated  as a trigram query.  Examples::    &gt;&gt;&gt;&gt; ng.adj_freq(&quot;stjórnarskrá&quot;)    2974    &gt;&gt;&gt;&gt; ng.adj_freq(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;)    40    &gt;&gt;&gt;&gt; ng.adj_freq(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;, &quot;Íslands&quot;)    13    &gt;&gt;&gt;&gt; ng.adj_freq(&quot;xxx&quot;, &quot;yyy&quot;, &quot;zzz&quot;)    1* ``prob(self, *args) -&gt; float``  Returns the probability of a unigram, bigram or trigram.  * ``str[] *args`` A parameter sequence of consecutive unigrams    to query the probability for.  * **returns** A float with the probability of the given unigram,    bigram or trigram.  The probability of a *unigram* is  the frequency of the unigram divided by the sum of the  frequencies of all unigrams in the database.  The probability of a *bigram* ``(u1, u2)`` is the frequency  of the bigram divided by the frequency of the unigram ``u1``,  i.e. how likely ``u2`` is to succeed ``u1``.  The probability of a trigram ``(u1, u2, u3)`` is the frequency  of the trigram divided by the frequency of the bigram ``(u1, u2)``,  i.e. how likely ``u3`` is to succeed ``u1 u2``.  If you pass more than 3 arguments to ``ng.prob()``, only the  last 3 are significant, and the query will be treated  as a trigram probability query.  Examples::    &gt;&gt;&gt;&gt; ng.prob(&quot;stjórnarskrá&quot;)    2.8168929772755334e-05    &gt;&gt;&gt;&gt; ng.prob(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;)    0.01344989912575655    &gt;&gt;&gt;&gt; ng.prob(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;, &quot;Íslands&quot;)    0.325* ``logprob(self, *args) -&gt; float``  Returns the log probability of a unigram, bigram or trigram.  * ``str[] *args`` A parameter sequence of consecutive unigrams    to query the log probability for.  * **returns** A float with the natural logarithm (base *e*) of the    probability of the given unigram, bigram or trigram.  The probability of a *unigram* is  the adjusted frequency of the unigram divided by the sum of the  frequencies of all unigrams in the database.  The probability of a *bigram* ``(u1, u2)`` is the adjusted frequency  of the bigram divided by the adjusted frequency of the unigram ``u1``,  i.e. how likely ``u2`` is to succeed ``u1``.  The probability of a trigram ``(u1, u2, u3)`` is the adjusted frequency  of the trigram divided by the adjusted frequency of the bigram ``(u1, u2)``,  i.e. how likely ``u3`` is to succeed ``u1 u2``.  If you pass more than 3 arguments to ``ng.logprob()``, only the  last 3 are significant, and the query will be treated  as a trigram probability query.  Examples::    &gt;&gt;&gt;&gt; ng.logprob(&quot;stjórnarskrá&quot;)    -10.477290968535172    &gt;&gt;&gt;&gt; ng.logprob(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;)    -4.308783672906165    &gt;&gt;&gt;&gt; ng.logprob(&quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;, &quot;Íslands&quot;)    -1.1239300966523995* ``succ(self, n, *args) -&gt; list[tuple]``  Returns the *N* most probable successors of a unigram or bigram.  * ``int n`` A positive integer specifying how many successors,    at a maximum, should be returned.  * ``str[] *args`` One or two string parameters containing the    unigram or bigram to query the successors for.  * **returns** A list of tuples of (successor unigram, log probability),    in descending order of probability.  If you pass more than 2 string arguments to ``ng.succ()``, only the  last 2 are significant, and the query will be treated  as a bigram successor query.  Examples::    &gt;&gt;&gt;&gt; ng.succ(2, &quot;stjórnarskrá&quot;)    [('.', -1.8259625296091855), ('landsins', -2.223111581475692)]    &gt;&gt;&gt;&gt; ng.succ(2, &quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;)    [('Íslands', -1.1239300966523995), ('og', -1.3862943611198904)]    &gt;&gt;&gt;&gt; # The following is equivalent to ng.succ(2, &quot;lýðveldisins&quot;, &quot;Íslands&quot;)    &gt;&gt;&gt;&gt; ng.succ(2, &quot;stjórnarskrá&quot;, &quot;lýðveldisins&quot;, &quot;Íslands&quot;)    [('.', -1.3862943611198908), (',', -1.6545583477145702)]*****Notes*****Icegrams is built with a sliding window over the source text. This means thata sentence such as ``&quot;Maðurinn borðaði ísinn.&quot;`` results in the followingtrigrams being added to the database::   (&quot;&quot;, &quot;&quot;, &quot;Maðurinn&quot;)   (&quot;&quot;, &quot;Maðurinn&quot;, &quot;borðaði&quot;)   (&quot;Maðurinn&quot;, &quot;borðaði&quot;, &quot;ísinn&quot;)   (&quot;borðaði&quot;, &quot;ísinn&quot;, &quot;.&quot;)   (&quot;ísinn&quot;, &quot;.&quot;, &quot;&quot;)   (&quot;.&quot;, &quot;&quot;, &quot;&quot;)The same sliding window strategy is applied for bigrams, so the followingbigrams would be recorded for the same sentence::   (&quot;&quot;, &quot;Maðurinn&quot;)   (&quot;Maðurinn&quot;, &quot;borðaði&quot;)   (&quot;borðaði&quot;, &quot;ísinn&quot;)   (&quot;ísinn&quot;, &quot;.&quot;)   (&quot;.&quot;, &quot;&quot;)You can thus obtain the N unigrams that most often starta sentence by asking for ``ng.succ(N, &quot;&quot;)``.And, of course, four unigrams are also added, one for each token in thesentence.The tokenization of the source text into unigrams is done with the`Tokenizer package &lt;https://pypi.org/project/tokenizer&gt;`_ anduses the rules documented there. Importantly, tokens other than words,abbreviations, entity names, person names and punctuation are**replaced by placeholders**. This means that all numbers are represented by the token``[NUMBER]``, amounts by ``[AMOUNT]``, dates by ``[DATEABS]`` and ``[DATEREL]``,e-mail addresses by ``[EMAIL]``, etc. For the complete mapping of token typesto placeholder strings, see the`documentation for the Tokenizer package &lt;https://github.com/mideind/Tokenizer/blob/master/README.rst&gt;`_.*************Prerequisites*************This package runs on CPython 3.6 or newer, and on PyPy 3.6 or newer. Ithas been tested on Linux (gcc on x86-64 and ARMhf), MacOS (clang) andWindows (MSVC).If a binary wheel package isn't available on `PyPI &lt;https://pypi.org&gt;`_for your system, you may need to have the ``python3-dev`` package(or its Windows equivalent) installed on your system to set upIcegrams successfully. This is because a source distributioninstall requires a C++ compiler and linker::    # Debian or Ubuntu:    sudo apt-get install python3-dev************Installation************To install this package::    $ pip install icegramsIf you want to be able to edit the source, do like so (assuming you have **git** installed)::    $ git clone https://github.com/mideind/Icegrams    $ cd Icegrams    $ # [ Activate your virtualenv here if you have one ]    $ python setup.py developThe package source code is now in ``./src/icegrams``.*****Tests*****To run the built-in tests, install `pytest &lt;https://docs.pytest.org/en/latest/&gt;`_,``cd`` to your ``Icegrams`` subdirectory (and optionally activate yourvirtualenv), then run::    $ python -m pytest*********Changelog********** Version 1.1.2: Minor bug fixes. Cross-platform wheels provided. Now requires Python 3.7+. (2022-12-14)* Version 1.1.0: Python 3.5 support dropped; macOS builds fixed; PyPy wheels  generated* Version 1.0.0: New trigram database sourced from the Icelandic Gigaword Corpus  (Risamálheild) with improved tokenization. Replaced GNU GPLv3 with MIT license.* Version 0.6.0: Python type annotations added* Version 0.5.0: Trigrams corpus has been spell-checked***********************Copyright and licensing***********************Greynir is *copyright © 2022* by `Miðeind ehf. &lt;https://mideind.is&gt;`__.The original author of this software is *Vilhjálmur Þorsteinsson*.This software is licensed under the **MIT License**:*Permission is hereby granted, free of charge, to any person**obtaining a copy of this software and associated documentation**files (the &quot;Software&quot;), to deal in the Software without restriction,**including without limitation the rights to use, copy, modify, merge,**publish, distribute, sublicense, and/or sell copies of the Software,**and to permit persons to whom the Software is furnished to do so,**subject to the following conditions:***The above copyright notice and this permission notice shall be****included in all copies or substantial portions of the Software.***THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,**EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF**MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.**IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY**CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,**TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE**SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.*</longdescription>
</pkgmetadata>