<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>&lt;a href=&quot;https://www.hardwario.com/&quot;&gt;&lt;img src=&quot;https://www.hardwario.com/ci/assets/hw-logo.svg&quot; width=&quot;200&quot; alt=&quot;HARDWARIO Logo&quot; align=&quot;right&quot;&gt;&lt;/a&gt;# Hub Service for HARDWARIO USB Gateway[![Travis](https://img.shields.io/travis/bigclownlabs/bch-gateway/master.svg)](https://travis-ci.org/bigclownlabs/bch-gateway)[![Release](https://img.shields.io/github/release/bigclownlabs/bch-gateway.svg)](https://github.com/bigclownlabs/bch-gateway/releases)[![License](https://img.shields.io/github/license/bigclownlabs/bch-gateway.svg)](https://github.com/bigclownlabs/bch-gateway/blob/master/LICENSE)[![PyPI](https://img.shields.io/pypi/v/bcg.svg)](https://pypi.org/project/bcg/)[![Twitter](https://img.shields.io/twitter/follow/hardwario_en.svg?style=social&amp;label=Follow)](https://twitter.com/hardwario_en)This repository contains CLI service for HARDWARIO USB Gateway.## IntroductionThe service connects to a serial port where HARDWARIO USB Gateway is connected.It converts messages from serial port to MQTT broker and vice versa.Run with `--help` parameter to see the available options.It works with Python 2.7+ and Python 3.5+ environments and it has been tested under Linux, macOS and Windows.## Setup    pip3 install -U bcgInstall as a system-wide local Python package.    git clone https://github.com/bigclownlabs/bch-gateway.git    cd bch-gateway    sudo pip3 install -e .&gt; Note: Parameter `-e` instructs to install files as symlinks, so changes to the source files will be immediately available to other users of the package on the host.## MQTT* Get info about all connected gateway  ```  mosquitto_pub -t 'gateway/all/info/get' -n  ```    response:    ```    gateway/{name}/info {&quot;id&quot;: &quot;836d19839c3b&quot;, &quot;firmware&quot;: &quot;bcf-gateway-....&quot;}    ```* List of paired nodes  ```  mosquitto_pub -t 'gateway/{name}/nodes/get' -n  ```    response:    ```    gateway/{name}/nodes [&quot;{id-node-0}&quot;, &quot;{id-node-id1}&quot;, &quot;{id-node-id2}&quot;]    ```* Pairing mode  * Start    ```    mosquitto_pub -t 'gateway/{name}/pairing-mode/start' -n    ```      LED on gateway start blink      response:      ```      gateway/{name}/pairing-mode &quot;start&quot;      ```      Gateway is waiting to pair node. To pare node, long press the button on Core Module.      response when the node is successfully added:      ```      gateway/{name}/attach &quot;{id-node-0}&quot;      gateway/{name}/attach &quot;{id-node-1}&quot;      ...      ```      Error response if there is not enough space:      ```      gateway/{name}/attach-failure &quot;{id-node-1}&quot;      ```  * Stop    ```    mosquitto_pub -t 'gateway/{name}/pairing-mode/stop' -n    ```      LED on gateway turns off      response:      ```      gateway/{name}/pairing-mode &quot;stop&quot;      ```* Purge all nodes  ```  mosquitto_pub -t 'gateway/{name}/nodes/purge' -n  ```    response:    ```    gateway/{name}/nodes []    ```* Manual Add/Pair node  ```  mosquitto_pub -t 'gateway/{name}/nodes/add' -m '&quot;{id-node}&quot;'  ```    response:    ```    gateway/{name}/attach &quot;{id-node}&quot;    ```    Error response if there is not enough space:    ```    gateway/{name}/attach-failure &quot;{id-node-1}&quot;    ```* Manual Remove/Unpair node  ```  mosquitto_pub -t 'gateway/{name}/nodes/remove' -m '&quot;{id-node}&quot;'  ```    response:    ```    gateway/{name}/detach &quot;{id-node}&quot;    ```* Set node alias  ```  mosquitto_pub -t 'gateway/usb-dongle/alias/set' -m '{&quot;id&quot;: &quot;id-node&quot;, &quot;alias&quot;: &quot;new-alias&quot;}'  ```    respose:    ```    gateway/usb-dongle/alias/set/ok {&quot;id&quot;: &quot;id-node&quot;, &quot;alias&quot;: &quot;new-alias&quot;}    ```* Remove node alias  ```  mosquitto_pub -t 'gateway/usb-dongle/alias/remove' -m '&quot;{id-node}&quot;'  ```  ```  mosquitto_pub -t 'gateway/usb-dongle/alias/set' -m '{&quot;id&quot;: &quot;id-node&quot;, &quot;alias&quot;: null}'  ```* Scan Start  * Start    ```    mosquitto_pub -t 'gateway/{name}/scan/start' -n    ```      response:      ```      gateway/{name}/scan &quot;start&quot;      ```      response for unknown node      ```      gateway/{name}/found &quot;{id-node-0}&quot;      gateway/{name}/found &quot;{id-node-1}&quot;      gateway/{name}/found &quot;{id-node-2}&quot;      ...      ```  * Stop    ```    mosquitto_pub -t 'gateway/{name}/scan/stop' -n    ```      response:      ```      gateway/{name}/scan &quot;stop&quot;      ```* Automatic pairing of all visible nodes  !!! This is experimental features do not all work  * Start    ```    mosquitto_pub -t 'gateway/{name}/automatic-pairing/start' -n    ```      LED on gateway start blink      response:      ```      gateway/{name}/automatic-pairing &quot;start&quot;      ```      response when the node is successfully added:      ```      gateway/{name}/attach &quot;{id-node-0}&quot;      gateway/{name}/attach &quot;{id-node-1}&quot;      ...      ```  * Stop      ```      mosquitto_pub -t 'gateway/{name}/automatic-pairing/stop' -n      ```        LED on gateway turns off        response:        ```        gateway/{name}/automatic-pairing &quot;stop&quot;        ```## Configuration fileConfiguration file is in yaml format* device: string  example: /dev/ttyUSB0* name: string  support variables:  * {ip} - ip address  * {id} - the id of the connected usb-dongle or core-module  default: null - automatic detect name from gateway firmware  example: &quot;{ip}-ttyUSB0&quot;* mqtt: object  * host: string    default: 127.0.0.1  * port: int    defualt: 1883  * username: string  * password: string  * cafile: string  * certfile: string  * keyfile: string* retain_node_messages: bool  default: False* qos_node_messages: int  default: 1    * base_topic_prefix: string  example: home-* automatic_remove_kit_from_names: bool  default: True* automatic_rename_kit_nodes: bool  default: True  * automatic_rename_generic_nodes: bool  default: True  * automatic_rename_nodes: bool  default: True  * rename: object## Node-Red buttonsIf you use Node-Red, you can import text below to create buttons in your flow. You can list, pair and delete nodes with a click of the mouse.* For bcf-gateway-usb-dongle  ```  [{&quot;id&quot;:&quot;83c6c60c.209d78&quot;,&quot;type&quot;:&quot;mqtt in&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;#&quot;,&quot;qos&quot;:&quot;2&quot;,&quot;broker&quot;:&quot;de273190.7f6f2&quot;,&quot;x&quot;:610,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;454a64bc.50f77c&quot;]]},{&quot;id&quot;:&quot;454a64bc.50f77c&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;active&quot;:true,&quot;console&quot;:&quot;false&quot;,&quot;complete&quot;:&quot;false&quot;,&quot;x&quot;:790,&quot;y&quot;:80,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;9e87ab30.a50be8&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;All gateway info&quot;,&quot;topic&quot;:&quot;gateway/all/info/get&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:639,&quot;y&quot;:172,&quot;wires&quot;:[[&quot;504dd396.bb5b4c&quot;]]},{&quot;id&quot;:&quot;504dd396.bb5b4c&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;de273190.7f6f2&quot;,&quot;x&quot;:824,&quot;y&quot;:173,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;f447966d.ed0cb8&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;Pairing mode start&quot;,&quot;topic&quot;:&quot;gateway/usb-dongle/pairing-mode/start&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:660,&quot;y&quot;:280,&quot;wires&quot;:[[&quot;ae043e16.df77c&quot;]]},{&quot;id&quot;:&quot;ae043e16.df77c&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;de273190.7f6f2&quot;,&quot;x&quot;:825,&quot;y&quot;:281,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;80092576.c83998&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;Pairing mode stop&quot;,&quot;topic&quot;:&quot;gateway/usb-dongle/pairing-mode/stop&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:660,&quot;y&quot;:320,&quot;wires&quot;:[[&quot;86c93689.7d0e58&quot;]]},{&quot;id&quot;:&quot;86c93689.7d0e58&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;de273190.7f6f2&quot;,&quot;x&quot;:825,&quot;y&quot;:321,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;8f7b14c7.898c38&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;List of paired nodes&quot;,&quot;topic&quot;:&quot;gateway/usb-dongle/nodes/get&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:650,&quot;y&quot;:220,&quot;wires&quot;:[[&quot;75f5e8db.ed19a8&quot;]]},{&quot;id&quot;:&quot;75f5e8db.ed19a8&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;de273190.7f6f2&quot;,&quot;x&quot;:825,&quot;y&quot;:221,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;ed3cfe08.3321b&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;purge all nodes&quot;,&quot;topic&quot;:&quot;gateway/usb-dongle/nodes/purge&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:640,&quot;y&quot;:380,&quot;wires&quot;:[[&quot;2acde0de.0d9de&quot;]]},{&quot;id&quot;:&quot;2acde0de.0d9de&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;de273190.7f6f2&quot;,&quot;x&quot;:825,&quot;y&quot;:381,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;de273190.7f6f2&quot;,&quot;type&quot;:&quot;mqtt-broker&quot;,&quot;z&quot;:&quot;&quot;,&quot;broker&quot;:&quot;localhost&quot;,&quot;port&quot;:&quot;1883&quot;,&quot;clientid&quot;:&quot;&quot;,&quot;usetls&quot;:false,&quot;compatmode&quot;:true,&quot;keepalive&quot;:&quot;60&quot;,&quot;cleansession&quot;:true,&quot;willTopic&quot;:&quot;&quot;,&quot;willQos&quot;:&quot;0&quot;,&quot;willPayload&quot;:&quot;&quot;,&quot;birthTopic&quot;:&quot;&quot;,&quot;birthQos&quot;:&quot;0&quot;,&quot;birthPayload&quot;:&quot;&quot;}]  ```* For bcf-gateway-core-module  ```  [{&quot;id&quot;:&quot;47ab49a8.0a88f8&quot;,&quot;type&quot;:&quot;mqtt in&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;#&quot;,&quot;qos&quot;:&quot;2&quot;,&quot;broker&quot;:&quot;deefb40d.51f818&quot;,&quot;x&quot;:370,&quot;y&quot;:100,&quot;wires&quot;:[[&quot;7208a9c6.a8d3e8&quot;]]},{&quot;id&quot;:&quot;7208a9c6.a8d3e8&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;active&quot;:true,&quot;console&quot;:&quot;false&quot;,&quot;complete&quot;:&quot;false&quot;,&quot;x&quot;:550,&quot;y&quot;:100,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;3e634a0c.8e15e6&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;All gateway info&quot;,&quot;topic&quot;:&quot;gateway/all/info/get&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:399,&quot;y&quot;:192,&quot;wires&quot;:[[&quot;84e9ef97.a81d5&quot;]]},{&quot;id&quot;:&quot;84e9ef97.a81d5&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;deefb40d.51f818&quot;,&quot;x&quot;:584,&quot;y&quot;:193,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;6d1a6395.7b49ac&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;Pairing mode start&quot;,&quot;topic&quot;:&quot;gateway/core-module/pairing-mode/start&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:400,&quot;y&quot;:320,&quot;wires&quot;:[[&quot;6bb142ef.da565c&quot;]]},{&quot;id&quot;:&quot;6bb142ef.da565c&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;deefb40d.51f818&quot;,&quot;x&quot;:585,&quot;y&quot;:321,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;191cf80e.901568&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;Pairing mode stop&quot;,&quot;topic&quot;:&quot;gateway/core-module/pairing-mode/stop&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:400,&quot;y&quot;:360,&quot;wires&quot;:[[&quot;11669b55.138775&quot;]]},{&quot;id&quot;:&quot;11669b55.138775&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;deefb40d.51f818&quot;,&quot;x&quot;:585,&quot;y&quot;:361,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;de1bca38.1214f8&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;List of paired nodes&quot;,&quot;topic&quot;:&quot;gateway/core-module/nodes/get&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:410,&quot;y&quot;:240,&quot;wires&quot;:[[&quot;7cb77d25.465514&quot;]]},{&quot;id&quot;:&quot;7cb77d25.465514&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;deefb40d.51f818&quot;,&quot;x&quot;:585,&quot;y&quot;:241,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;ec929b66.dddbb8&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;purge all nodes&quot;,&quot;topic&quot;:&quot;gateway/core-module/nodes/purge&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;x&quot;:400,&quot;y&quot;:420,&quot;wires&quot;:[[&quot;afe70282.f5ead&quot;]]},{&quot;id&quot;:&quot;afe70282.f5ead&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;97027127.a55f7&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;qos&quot;:&quot;&quot;,&quot;retain&quot;:&quot;&quot;,&quot;broker&quot;:&quot;deefb40d.51f818&quot;,&quot;x&quot;:585,&quot;y&quot;:421,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;deefb40d.51f818&quot;,&quot;type&quot;:&quot;mqtt-broker&quot;,&quot;z&quot;:&quot;&quot;,&quot;broker&quot;:&quot;localhost&quot;,&quot;port&quot;:&quot;1883&quot;,&quot;clientid&quot;:&quot;&quot;,&quot;usetls&quot;:false,&quot;compatmode&quot;:true,&quot;keepalive&quot;:&quot;60&quot;,&quot;cleansession&quot;:true,&quot;willTopic&quot;:&quot;&quot;,&quot;willQos&quot;:&quot;0&quot;,&quot;willPayload&quot;:&quot;&quot;,&quot;birthTopic&quot;:&quot;&quot;,&quot;birthQos&quot;:&quot;0&quot;,&quot;birthPayload&quot;:&quot;&quot;}]  ```## LicenseThis project is licensed under the [MIT License](https://opensource.org/licenses/MIT/) - see the [LICENSE](LICENSE) file for details.---Made with &amp;#x2764;&amp;nbsp; by [**HARDWARIO s.r.o.**](https://www.hardwario.com/) in the heart of Europe.</longdescription>
</pkgmetadata>