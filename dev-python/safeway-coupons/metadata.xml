<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Automatic Safeway coupon clipper[![PyPI](https://img.shields.io/pypi/v/safeway-coupons)][pypi][![PyPI - Python Version](https://img.shields.io/pypi/pyversions/safeway-coupons)][pypi][![Build](https://img.shields.io/github/checks-status/smkent/safeway-coupons/main?label=build)][gh-actions][![codecov](https://codecov.io/gh/smkent/safeway-coupons/branch/main/graph/badge.svg)][codecov][![GitHub stars](https://img.shields.io/github/stars/smkent/safeway-coupons?style=social)][repo]**safeway-coupons** is a script that will log in to an account on safeway.com,and attempt to select all of the &quot;Safeway for U&quot; electronic coupons on the siteso they don't have to each be clicked manually.## Design notesSafeway's sign in page is protected by a web application firewall (WAF).safeway-coupons performs authentication using a headless instance of GoogleChrome. Authentication may fail based on your IP's reputation, either bypresenting a CAPTCHA or denying sign in attempts altogether. safeway-couponscurrently does not have support for prompting the user to solve CAPTCHAs.Once a signed in session is established, coupon clipping is performed using HTTPrequests via [requests][requests].## Installation and usage with DockerA Docker container is provided which runs safeway-coupons with cron. The cronschedule and your Safeway account details may be configured using environmentvariables, or with an accounts file.Example `docker-compose.yaml` with configuration via environment variables:```yamlversion: &quot;3.7&quot;services:  safeway-coupons:    image: ghcr.io/smkent/safeway-coupons:latest    environment:      CRON_SCHEDULE: &quot;0 2 * * *&quot;  # Run at 2:00 AM each day      SMTPHOST: your.smtp.host      SAFEWAY_ACCOUNT_USERNAME: your.safeway.account.email@example.com      SAFEWAY_ACCOUNT_PASSWORD: very_secret      SAFEWAY_ACCOUNT_MAIL_FROM: your.email@example.com      SAFEWAY_ACCOUNT_MAIL_TO: your.email@example.com    restart: unless-stopped```Example `docker-compose.yaml` with configuration via accounts file:```yamlversion: &quot;3.7&quot;services:  safeway-coupons:    image: ghcr.io/smkent/safeway-coupons:latest    environment:      CRON_SCHEDULE: &quot;0 2 * * *&quot;  # Run at 2:00 AM each day      SMTPHOST: your.smtp.host      SAFEWAY_ACCOUNTS_FILE: /accounts_file    restart: unless-stopped    volumes:      - path/to/safeway_accounts_file:/accounts_file:ro```Start the container by running:```consoledocker-compose up -d```Debugging information can be viewed in the container log:```consoledocker-compose logs -f```## Installation from PyPI### Prerequisites* Google Chrome (for authentication performed via Selenium).* Optional: `sendmail` (for email support)### Installation[safeway-coupons is available on PyPI][pypi]:```consolepip install safeway-coupons```### UsageFor best results, run this program once a day or so with a cron daemon.For full usage options, run```consolesafeway-coupons --help```### Configuration**safeway-coupons** can clip coupons for one or more Safeway accounts in asingle run, depending on the configuration method used.If a sender email address is configured, a summary email will be sent for eachSafeway account via `sendmail`. The email recipient defaults to the Safewayaccount email address, but can be overridden for each account.Accounts are searched via the following methods in the listed order. Only oneaccount configuration method may be used at a time.#### With environment variablesA single Safeway account can be configured with environment variables:* `SAFEWAY_ACCOUNT_USERNAME`: Account email address (required)* `SAFEWAY_ACCOUNT_PASSWORD`: Account password (required)* `SAFEWAY_ACCOUNT_MAIL_FROM`: Sender address for email summary* `SAFEWAY_ACCOUNT_MAIL_TO`: Recipient address for email summary#### With config fileMultiple Safeway accounts can be provided in an ini-style config file, with asection for each account. For example:```iniemail_sender = sender@example.com   ; optional[safeway.account@example.com]       ; requiredpassword = 12345                    ; requirednotify = your.email@example.com     ; optional```Provide the path to your config file using the `-c` or `--accounts-config`option:```consolesafeway-coupons -c path/to/config/file```## Development### [Poetry][poetry] installationVia [`pipx`][pipx]:```consolepip install pipxpipx install poetrypipx inject poetry poetry-dynamic-versioning poetry-pre-commit-plugin```Via `pip`:```consolepip install poetrypoetry self add poetry-dynamic-versioning poetry-pre-commit-plugin```### Development tasks* Setup: `poetry install`* Run static checks: `poetry run poe lint` or  `poetry run pre-commit run --all-files`* Run static checks and tests: `poetry run poe test`---Created from [smkent/cookie-python][cookie-python] using[cookiecutter][cookiecutter][codecov]: https://codecov.io/gh/smkent/safeway-coupons[cookie-python]: https://github.com/smkent/cookie-python[cookiecutter]: https://github.com/cookiecutter/cookiecutter[gh-actions]: https://github.com/smkent/safeway-coupons/actions?query=branch%3Amain[pipx]: https://pypa.github.io/pipx/[poetry]: https://python-poetry.org/docs/#installation[pypi]: https://pypi.org/project/safeway-coupons/[repo]: https://github.com/smkent/safeway-coupons[requests]: https://requests.readthedocs.io/en/latest/</longdescription>
</pkgmetadata>