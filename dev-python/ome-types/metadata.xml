<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># ome-types[![License](https://img.shields.io/github/license/tlambert03/ome-types)](LICENSE)[![Version](https://img.shields.io/pypi/v/ome-types.svg)](https://pypi.python.org/pypi/ome-types)[![CondaVersion](https://img.shields.io/conda/v/conda-forge/ome-types)](https://anaconda.org/conda-forge/ome-types)[![PythonVersion](https://img.shields.io/pypi/pyversions/ome-types.svg)](https://python.org)[![Tests](https://github.com/tlambert03/ome-types/workflows/tests/badge.svg)](https://github.com/tlambert03/ome-types/actions)[![Docs](https://readthedocs.org/projects/ome-types/badge/?version=latest)](https://ome-types.readthedocs.io/en/latest/?badge=latest)[![codecov](https://codecov.io/gh/tlambert03/ome-types/branch/main/graph/badge.svg?token=GocY9y8A32)](https://codecov.io/gh/tlambert03/ome-types)[![Benchmarks](https://img.shields.io/badge/‚è±-codspeed-%23FF7B53)](https://codspeed.io/tlambert03/ome-types)## A pure-python implementation of the OME data model`ome_types` provides a set of python dataclasses and utility functions forparsing the [OME-XMLformat](https://docs.openmicroscopy.org/ome-model/latest/ome-xml/) intofully-typed python objects for interactive or programmatic access in python. Itcan also take these python objects and output them into valid OME-XML.`ome_types` is a **pure python** library and does not require a Java virtualmachine.&gt; Note: The generated python code can be seen in the [`built`&gt; branch](https://github.com/tlambert03/ome-types/tree/built).&gt; (Read the [code generation](#code-generation) section for details).### üìñ &amp;nbsp;&amp;nbsp;[documentation](https://ome-types.readthedocs.io/)## Installation### from pip```shellpip install ome-types```With all optional dependencies:```shell# lxml =&gt; if you ...#           - want to use lxml as the XML parser#           - want to validate XML against the ome.xsd schema#           - want to use XML documents older than the 2016-06 schema# pint      =&gt; if you want to use object.&lt;field&gt;_quantity properties# xmlschema =&gt; if you want to validate XML but DON'T want lxmlpip install ome-types[lxml,pint]```### from conda```shellconda install -c conda-forge ome-types```### from github (bleeding edge dev version)```shellpip install git+https://github.com/tlambert03/ome-types.git```## Usage### convert an XML string or filepath into an instance of `ome_types.model.OME`(The XML string/file will be validated against the [ome.xsdschema](https://www.openmicroscopy.org/Schemas/Documentation/Generated/OME-2016-06/ome.html))```pythonfrom ome_types import from_xmlome = from_xml('tests/data/hcs.ome.xml')```### extract OME metadata from an OME-TIFF```pythonfrom ome_types import from_tiffome2 = from_tiff('tests/data/ome.tiff')```### manipulate the metadata via python objectsBoth `from_xml` and `from_tiff` return an instance of `ome_types.model.OME`. Allclasses in `ome_types.model` follow the naming conventions of the [OME datamodel](https://www.openmicroscopy.org/Schemas/Documentation/Generated/OME-2016-06/ome.html),but use `snake_case` attribute names instead of `CamelCase`, to be consistentwith the python ecosystem.```pythonIn [2]: ome = from_xml('tests/data/hcs.ome.xml')In [3]: omeOut[3]:OME(    images=[&lt;1 Images&gt;],    plates=[&lt;1 Plates&gt;],)In [4]: ome.plates[0]Out[4]:Plate(    id='Plate:1',    name='Control Plate',    column_naming_convention='letter',    columns=12,    row_naming_convention='number',    rows=8,    wells=[&lt;1 Wells&gt;],)In [5]: ome.images[0]Out[5]:Image(    id='Image:0',    name='Series 1',    pixels=Pixels(        id='Pixels:0',        dimension_order='XYCZT',        size_c=3,        size_t=16,        size_x=1024,        size_y=1024,        size_z=1,        type='uint16',        bin_data=[&lt;1 Bin_Data&gt;],        channels=[&lt;3 Channels&gt;],        physical_size_x=0.207,        physical_size_y=0.207,        time_increment=120.1302,    ),    acquisition_date=datetime.fromisoformat('2008-02-06T13:43:19'),    description='An example OME compliant file, based on Olympus.oib',)```#### Objects can be removed, or changed```pythonIn [6]: from ome_types.model.simple_types import UnitsLengthIn [7]: from ome_types.model.channel import AcquisitionModeIn [8]: ome.images[0].description = &quot;This is the new description.&quot;In [9]: ome.images[0].pixels.physical_size_x = 350.0In [10]: ome.images[0].pixels.physical_size_x_unit = UnitsLength.NANOMETERIn [11]: for c in ome.images[0].pixels.channels:             c.acquisition_mode = AcquisitionMode.SPINNING_DISK_CONFOCAL```#### Elements can be added by constructing new OME model objects```pythonIn [12]: from ome_types.model import Instrument, Microscope, Objective, InstrumentRefIn [13]: microscope_mk4 = Microscope(             manufacturer='OME Instruments',             model='Lab Mk4',             serial_number='L4-5678',         )In [14]: objective_40x = Objective(             manufacturer='OME Objectives',             model='40xAir',             nominal_magnification=40.0,         )In [15]: instrument = Instrument(             microscope=microscope_mk4,             objectives=[objective_40x],         )In [16]: ome.instruments.append(instrument)In [17]: ome.images[0].instrument_ref = InstrumentRef(id=instrument.id)In [18]: ome.instrumentsOut[18]:[Instrument(    id='Instrument:1',    microscope=Microscope(       manufacturer='OME Instruments',       model='Lab Mk4',       serial_number='L4-5678',    ),    objectives=[&lt;1 Objectives&gt;], )]```### export to an OME-XML stringFinally, you can generate the OME-XML representation of the OME model object,for writing to a standalone `.ome.xml` file or inserting into the header of anOME-TIFF file:```pythonIn [19]: from ome_types import to_xmlIn [20]: print(to_xml(ome))&lt;OME ...&gt;    &lt;Plate ColumnNamingConvention=&quot;letter&quot; Columns=&quot;12&quot; ID=&quot;Plate:1&quot; ...&gt;        ...    &lt;/Plate&gt;    &lt;Instrument ID=&quot;Instrument:1&quot;&gt;        &lt;Microscope Manufacturer=&quot;OME Instruments&quot; Model=&quot;Lab Mk4&quot; SerialNumber=&quot;L4-5678&quot; /&gt;        &lt;Objective Manufacturer=&quot;OME Objectives&quot; Model=&quot;40xAir&quot; ID=&quot;Objective:1&quot;        NominalMagnification=&quot;40.0&quot; /&gt;    &lt;/Instrument&gt;    &lt;Image ID=&quot;Image:0&quot; Name=&quot;Series 1&quot;&gt;        &lt;AcquisitionDate&gt;2008-02-06T13:43:19&lt;/AcquisitionDate&gt;        &lt;Description&gt;This is the new description.&lt;/Description&gt;        &lt;InstrumentRef ID=&quot;Instrument:1&quot; /&gt;        &lt;Pixels ... PhysicalSizeX=&quot;350.0&quot; PhysicalSizeXUnit=&quot;nm&quot; ...&gt;            &lt;Channel AcquisitionMode=&quot;SpinningDiskConfocal&quot; ...&gt;             ...        &lt;/Pixels&gt;    &lt;/Image&gt;&lt;/OME&gt;```## Code generationThe bulk of this library (namely, modules inside `ome_types._autogenerated`) isgenerated at install time, and is therefore not checked into source (or visiblein the main branch of this repo).You can see the code generated by the main branch in the [builtbranch](https://github.com/tlambert03/ome-types/tree/built)The package at `src/ome_autogen` converts the [ome.xsdschema](https://www.openmicroscopy.org/Schemas/OME/2016-06/ome.xsd) into validpython code. To run the code generation script in a development environment,clone this repository and run:```shpython -m src.ome_autogen```The documentation and types for the full model can be in the [API Reference](https://ome-types.readthedocs.io/en/latest/ome_types.model.html)## ContributingTo clone and install this repository locally:```shellgit clone https://github.com/tlambert03/ome-types.gitcd ome-typespip install -e .[test,dev]```We use `pre-commit` to run various code-quality checks during continuousintegration. If you'd like to make sure that your code will pass these checksbefore you commit your code, you should install `pre-commit` after cloning thisrepository:```shellpre-commit install```### regenerating the modelsIf you modify anything in `src/ome_autogen`, you may need toregenerate the model with:```shellpython -m src.ome_autogen```### Running testsTo run tests:```pytest```</longdescription>
</pkgmetadata>