<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># News CrawlersContains various spiders which crawl websites for new content. If any newcontent is found, users are alerted via email.![Tests](https://github.com/jprevc/news_crawlers/actions/workflows/tests.yml/badge.svg)Installation------------------Install this application with    python -m pip install news_crawlersAfter installation, News Crawlers can be run from CLI, to view help you can write:    python -m news_crawlers -hConfiguration----------------------------NewsCrawlers's configuration is defined with a *news_crawlers.yaml* file.Configuration file path can then be provided via CLI, like this:    python -m news_crawlers -c {news_crawlers.yaml path}If path is not provided, application will search the file in *config* folder (if it exists) and in the current workingdirectory.When spider is run, it will append any new items found in *.nc_cache* folder. Location of that folder can be customizedwith a --cache option, like thispython -m news_crawlers --cache {data path}If not specified, application will put cache to *data/.nc_cache*, relative to current working directory.Within the configuration file, there should be a *spiders* segment, where spiders and their configurations are listed,for example:    spiders:            bolha:                notifications:                  email:                    email_user: &quot;__env_EMAIL_USER&quot;                    email_password: &quot;__env_EMAIL_PASS&quot;                    recipients: ['jost.prevc@gmail.com']                    message_body_format: &quot;Query: {query}\nURL: {url}\nPrice: {price}\n&quot;                  pushover:                    recipients: ['ukdwndomjog3swwos57umfydpsa2sk']                    send_separately: True                    message_body_format: &quot;Query: {query}\nPrice: {price}\n&quot;                urls:                  'pet_prijateljev': https://www.bolha.com/?ctl=search_ads&amp;keywords=pet+prijateljev                  'enid_blyton': https://www.bolha.com/?ctl=search_ads&amp;keywords=enid%20blytonSpider name (for example &quot;bolha&quot;, above), should match the *name* attribute of a spider, defined in spiders.py.Each spider should have a *notifications* and *urls* segment. *notifications* defines how user(s) will be notified onany found changes when crawling the urls, defined in *urls* segment.Note that prepending any configuration value with &quot;\_\_env\_&quot; will treat the subsequent string as an environmentvariable and will attempt to obtain the value from environment variables. For example &quot;__env_EMAIL_USER&quot; willbe replaced with the value of &quot;EMAIL_USER&quot; environment variable. This can be useful to avoid storing secrets within theconfiguration file.Crawling can also be set on a schedule, by adding a schedule segment to news_crawlers.yaml file:    schedule:        every: 15        units: minutesSo the entire *news_crawlers.yaml* file should look like this:    schedule:        every: 15        units: minutes    spiders:        bolha:            notifications:              email:                email_user: &quot;__env_EMAIL_USER&quot;                email_password: &quot;__env_EMAIL_PASS&quot;                recipients: ['jost.prevc@gmail.com']                message_body_format: &quot;Query: {query}\nURL: {url}\nPrice: {price}\n&quot;              pushover:                recipients: ['ukdwndomjog3swwos57umfydpsa2sk']                send_separately: True                message_body_format: &quot;Query: {query}\nPrice: {price}\n&quot;            urls:              'pet_prijateljev': https://www.bolha.com/?ctl=search_ads&amp;keywords=pet+prijateljev              'enid_blyton': https://www.bolha.com/?ctl=search_ads&amp;keywords=enid%20blytonNotification configuration------------------------------Next, you should configure notification, which will alert you about any found news. Currently, there are two options -Email via Gmail SMTP server or Pushover.### Email configurationVisit [google app passwords](https://myaccount.google.com/apppasswords) and generate a new app password for your account.Username and password can then be placed directly to configuration file or referenced via environment variables(see instructions above).### Pushover configuration[Pushover](https://pushover.net) is a platform which enables you to easily send and receive push notifications on yoursmart device. To get it running, you will first need to create a user account. You can sign-up onthis [link](https://pushover.net/signup). When sign-up is complete, you will receive a unique user token, which youwill have to copy and paste to your crawler configuration (see example configuration above). Any user that wants toreceive push notifications needs to create its own pushover username to receive their own user tokens, which willbe stored in crawler configuration.Next, you should register your crawler application on pushover. To do this, visit [registration site](https://pushover.net/apps/build)and fill out the provided form. Once your application is registered, you will receive an API token. This token can thenbe placed directly to configuration file or referenced via environment variables (see instructions above).To receive notifications, every user should download the Pushover app to the smart device on which they want toreceive push notifications. Once logged in, they will receive push notifications when any crawler finds news.- [Android](https://play.google.com/store/apps/details?id=net.superblock.pushover)- [AppStore](https://apps.apple.com/us/app/pushover-notifications/id506088175?ls=1)Note: Pushover trial version expires after 30 days. After that, you will need to create a one-time purchase with a costof 5$ to keep it working, see [pricing](https://pushover.net/pricing).Running the crawlers----------------------Run the scraper by executing the following command on the project root:    python -m news_crawlers scrapeYou can also run individual spiders with    python -m news_crawlers scrape -s {spider_name}This will run specified spider and then send a configured notifications if anynews are found.Contribution==================Checkout----------------Checkout this project with    git clone https://github.com/jprevc/news_crawlers.gitAdding new custom crawlers----------------------------New spiders need to be added to news_crawlers/spiders.py file. Spider is a class which must subclass Spider class.When crawling, crawler needs to yield all found items in a form of dictionary. Keys of each item need to correspond toreferenced values of &quot;message_body_format&quot; field within the configuration file.</longdescription>
</pkgmetadata>