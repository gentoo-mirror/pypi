<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Capsula&gt; :warning: **NOTE**: This project is still work in progress.*Capsula*, a Latin word meaning *box*, is a Python package designed to help researchers and developers easily capture and reproduce their command execution context. The primary aim of *Capsula* is to tackle the reproducibility problem by providing a way to capture the execution context at any point in time, preserving it for future use. This ensures that you can reproduce the exact conditions of a past command execution, fostering reproducibility and consistency over time.## Features1. **Context Capture (under development):** *Capsula* logs the details of the execution context for future reference and reproduction. The context includes, but not limited to, Python version, system environment variables, and the Git commit hash of the current working directory.2. **Execution Monitoring (to be implemented):** *Capsula* monitors the execution of Python scripts, Jupyter notebooks, and CLI commands, logging information such as the execution status, output, duration, etc.4. **Context Reproduction (to be implemented):** *Capsula* enables the reproduction of the captured context. This ensures the consistency and reproducibility of results.## InstallationYou can install *Capsula* via pip:```bashpip install capsula```At the root of your project, create a `capsula.toml` file wit the following content:```toml[capture]vault-directory = 'vault'capsule-template = '%Y%m%d_%H%M%S'include-cpu = falsepre-capture-commands = [    'poetry lock --check']environment-variables = [    'HOME',][capture.files]&quot;pyproject.toml&quot; = { hash = &quot;sha256&quot;, copy = true }&quot;poetry.lock&quot; = { hash = &quot;sha256&quot;, copy = true }[capture.git.repositories]capsula = '.'```## Usage### Context CaptureRunning `capsula capture` in the project root (the directory where `capsula.toml` is located) captures the execution context and stores it in a vault directory. The vault directory is specified in the `capsula.toml` file. The vault directory is organized by subdirectories (&quot;capsules&quot;), each of which contains the captured context of a single execution. The capsule name is generated using the `capsule-template` option in the `capsula.toml` file. The default template is `%Y%m%d_%H%M%S`, which generates a capsule name in the format of `YYYYMMDD_HHMMSS`. The context is stored in a JSON file named `context.json`.Example of `context.json`:```json{    &quot;platform&quot;: {        &quot;machine&quot;: &quot;x86_64&quot;,        &quot;node&quot;: &quot;DESKTOP-XXXXXXX&quot;,        &quot;platform&quot;: &quot;Linux-5.15.90.1-microsoft-standard-WSL2-x86_64-with-glibc2.31&quot;,        &quot;release&quot;: &quot;5.15.90.1-microsoft-standard-WSL2&quot;,        &quot;version&quot;: &quot;#1 SMP Fri Jan 27 02:56:13 UTC 2023&quot;,        &quot;system&quot;: &quot;Linux&quot;,        &quot;processor&quot;: &quot;x86_64&quot;,        &quot;python&quot;: {            &quot;executable_architecture&quot;: {                &quot;bits&quot;: &quot;64bit&quot;,                &quot;linkage&quot;: &quot;ELF&quot;            },            &quot;build_no&quot;: &quot;main&quot;,            &quot;build_date&quot;: &quot;Dec 30 2022 17:24:31&quot;,            &quot;compiler&quot;: &quot;GCC 9.4.0&quot;,            &quot;branch&quot;: &quot;&quot;,            &quot;implementation&quot;: &quot;CPython&quot;,            &quot;version&quot;: &quot;3.11.1&quot;        }    },    &quot;cpu&quot;: null,    &quot;environment_variables&quot;: {        &quot;HOME&quot;: &quot;/home/directory&quot;    },    &quot;cwd&quot;: &quot;/current/working/directory&quot;,    &quot;git&quot;: {        &quot;capsula&quot;: {            &quot;path&quot;: &quot;.&quot;,            &quot;sha&quot;: &quot;7dbaa0389ca4553b3d8b6e35c2d0e4d9e2501764&quot;,            &quot;branch&quot;: &quot;git-config&quot;,            &quot;remotes&quot;: [                {                    &quot;name&quot;: &quot;origin&quot;,                    &quot;url&quot;: &quot;git@github.com:shunichironomura/capsula.git&quot;                }            ]        }    },    &quot;files&quot;: {        &quot;pyproject.toml&quot;: {            &quot;hash_algorithm&quot;: &quot;sha256&quot;,            &quot;file_hash&quot;: &quot;e412f8efcdfc12aa7ec36f219a2037c90ade279df5fb11fdefa5a5c3f583a1df&quot;        },        &quot;poetry.lock&quot;: {            &quot;hash_algorithm&quot;: &quot;sha256&quot;,            &quot;file_hash&quot;: &quot;bd2ee84e4ab22528f89431ca4693c6db58aa304380b36cee7d3e21e19f756df2&quot;        }    }}```### Execution MonitoringRunning `capsula monitor &lt;commands&gt;` in the project root (the directory where `capsula.toml` is located) monitors the execution of the specified commands. The context is logged in the `context.json` file in the capsule directory, and the command execution is logged in the `pre-run-info.json` and `post-run-info.json` files in the capsule directory.## Try it out### Prerequisites- [Poetry](https://python-poetry.org/docs/#installation)### Steps1. Clone this repository:```bashgit clone git@github.com:shunichironomura/capsula.git```2. Install the package, including the examples:```bashpoetry install --with examples```3. Run the example:Context capture:```bashcapsula capture```Execution monitoring:```bashcapsula monitor python examples/calculate_pi.py```## RoadmapSee [#1](https://github.com/shunichironomura/capsula/issues/1).</longdescription>
</pkgmetadata>