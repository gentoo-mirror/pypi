<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>- **Thư viện Consumer của JB. Chạy consumer ở Process, phù hợp cho môi trường K8s** :- **NOTE: SDK sử dụng confluent-kafka depend requirements của module. SDK không có install_requires confluent-kafka :)** ::cheers::* Bản này yêu cầu confluent-kafka &gt;= 1.7.0 &amp; requests&gt;=2.25.1# create topicNote:- EnsureKafkaTopic.REPLICATION_ASSIGNMENT là giá trị các brokers isolate của từng module. Nếu giá trị này chưa được DevOps khởi tạo nó sẽ được lấy giá trị từ *DEFAULT_BROKER_ID_ASSIGN*  ```pythonfrom mobio.libs.kafka_lib.helpers.ensure_kafka_topic import EnsureKafkaTopicimport osfrom mobio.libs.kafka_lib import MobioEnvironmentEnsureKafkaTopic().create_kafka_topics(        [            # TEST WITH SET replica_assignment            {                EnsureKafkaTopic.TOPIC_NAME: &quot;giang-test1&quot;,                EnsureKafkaTopic.NUM_PARTITIONS: 8,                EnsureKafkaTopic.CONFIG: {&quot;compression.type&quot;: &quot;snappy&quot;},                EnsureKafkaTopic.REPLICATION_ASSIGNMENT: os.getenv(                    MobioEnvironment.SALE_BROKER_ID_ASSIGN # SALE_BROKER_ID_ASSIGN                ) # danh sách các broker_ids &quot;10,20,30&quot; ,            },            # TEST WITH SET replica_factor            {                EnsureKafkaTopic.TOPIC_NAME: &quot;giang-test2&quot;,                EnsureKafkaTopic.REPLICATION_ASSIGNMENT: os.getenv(                    MobioEnvironment.PROFILING_BROKER_ID_ASSIGN                )            },            # TEST WITH SET config            {                EnsureKafkaTopic.TOPIC_NAME: &quot;giang-test3&quot;,                EnsureKafkaTopic.NUM_PARTITIONS: 1,                EnsureKafkaTopic.CONFIG: {&quot;compression.type&quot;: &quot;snappy&quot;},                EnsureKafkaTopic.REPLICATION_ASSIGNMENT: os.getenv(                    MobioEnvironment.JB_BROKER_ID_ASSIGN                )            },            # TEST WITHOUT manual config            {                EnsureKafkaTopic.TOPIC_NAME: &quot;giang-test4&quot;,                EnsureKafkaTopic.NUM_PARTITIONS: 1,            },        ]    )```# Producer```pythonfrom mobio.libs.kafka_lib.helpers.kafka_producer_manager import KafkaProducerManagerKafkaProducerManager().flush_message(topic=&quot;test&quot;, key=&quot;uuid&quot;, value={&quot;test&quot;:1})```# Consumer```pythonimport osfrom time import sleepfrom pymongo import MongoClientfrom mobio.libs.kafka_lib.helpers.kafka_consumer_manager import BaseKafkaConsumerclass TestConsumer(BaseKafkaConsumer):    def message_handle(self, data):        print(&quot;TestConsumer: data: {}&quot;.format(data))if __name__ == &quot;__main__&quot;:    url_connection = os.getenv('TEST_MONGO_URI')    client_mongo = MongoClient(url_connection, connect=False)    TestConsumer(topic_name=&quot;test&quot;, group_id=&quot;test&quot;, client_mongo=client_mongo, retryable=True, lst_subscribe_topic=['test', 'test1'], retry_topic='test1')    sleep(1000)```# change logs* 0.1.8 (2023-08-25):  * thêm option lst_subscribe_topic    * Nếu truyền lst_subscribe_topic thì bỏ qua topic_name    * Nếu ko truyền lst_subscribe_topic thì lấy topic_name làm topic subscribe  * thêm option retry_topic    * Nếu không chỉ định sẽ lấy topic đầu tiên của list subscribe    * Nếu ko truyền list subscribe thì lấy topic_name làm retry* 0.1.7 (2023-04-18):  * cho phép truyền vào broker khi khởi tạo consumer, producer. Nếu không truyền thì sẽ lấy mặc định trong ENV KAFKA_BROKER  * singleton producer với *args &amp;&amp; **kwargs  * bỏ requirements &quot;m-singleton&gt;=0.3&quot;, &quot;m-caching&gt;=0.1.8&quot;* 0.1.6 (2023-04-05):  * k8s liveness v2* 0.1.5 (2022-10-12):  * raise exception khi close kafka, đảm bảo k8s sẽ restart lại pod* 0.1.4.2 (2022-09-19):  * fix bug topic được tạo đang random vào cả các broker isolate cho module khác.* 0.1.4.1 (2022-09-19):  * cho phép truyền vào brokers mà topic này sẽ được replicate* 0.1.4 (2022-08-23):  * Bổ sung thêm phần lưu mapping pod-name và client-id vào file * 0.1.3:  * Mặc định compress messages ở đầu producer  * Function create kafka topic hỗ trợ truyền số partitions và settings của topic  * 0.1.1: fix bug init Config</longdescription>
</pkgmetadata>