<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>farmfs======Tool for creating / distributing / maintaining symlink farms.## WarningFarmFS is still very early stage software. Please do not keep anything in it which you are not willing to lose.## Installation### To use Farmfspip install git+https://github.com/andrewguy9/farmfs.git@master### To hack on Farmfs```git clone https://github.com/andrewguy9/farmfs.gitcd farmfspython setup.py install```## Usage:```FarmFSUsage:  farmfs mkfs  farmfs (status|freeze|thaw) [&lt;path&gt;...]  farmfs snap (make|list|read|delete|restore) &lt;snap&gt;  farmfs fsck  farmfs count  farmfs similarity  farmfs gc  farmfs checksum &lt;path&gt;...  farmfs remote add &lt;remote&gt; &lt;root&gt;  farmfs remote remove &lt;remote&gt;  farmfs remote list  farmfs pull &lt;remote&gt; [&lt;snap&gt;]Options:```## What is FarmFSFarmfs is a git style interface to non text, usually immutable, sometimes large files.It takes your files and puts them into an immutable blob store then builds symlinks from the file names into the store.### Why would you do that?* You can snapshot your directory structure BIG_O(num_files).* You can diff two different farmfs stores with BIG_O(num_files) rather than BIG_O(sum(file_sizes))* You can identify corruption of your files because all entries in the blob store are checksumed.* If the same file contents appear in multiple places you only have to put it in the blob store once. (deduplication)## Getting StartedCreate a Farmfs store```mkdir myfarmcd myfarmfarmfs mkfs```Make some files```mkdir -p 1/2/3/4/5mkdir -p a/b/c/d/eecho &quot;value1&quot; &gt; 1/2/3/4/5/v1echo &quot;value1&quot; &gt; a/b/c/d/e/v1```Status can show us unmanged files.```farmfs status/Users/andrewguy9/Downloads/readme/1/2/3/4/5/v1/Users/andrewguy9/Downloads/readme/a/b/c/d/e/v1```Add the untracked files to the blob store.Notice it only needs to store &quot;value1&quot; once.```farmfs freezeProcessing /Users/andrewguy9/Downloads/readme/1/2/3/4/5/v1 with csum /Users/andrewguy9/Downloads/readme/.farmfs/userdataPutting link at /Users/andrewguy9/Downloads/readme/.farmfs/userdata/238/851/a91/77b60af767ca431ed521e55Processing /Users/andrewguy9/Downloads/readme/a/b/c/d/e/v1 with csum /Users/andrewguy9/Downloads/readme/.farmfs/userdataFound a copy of file already in userdata, skipping copy```Edit a file.First we need to thaw it, then we can change it.```farmfs thaw 1/2/3/4/5/v1farmfs status/Users/andrewguy9/Downloads/readme/1/2/3/4/5/v1echo &quot;value2&quot; &gt; 1/2/3/4/5/v1farmfs freeze 1/2/3/4/5/v1Processing /Users/andrewguy9/Downloads/readme/1/2/3/4/5/v1 with csum /Users/andrewguy9/Downloads/readme/.farmfs/userdataPutting link at /Users/andrewguy9/Downloads/readme/.farmfs/userdata/4ca/8c5/ae5/e759e237bfb80c51940de7afarmfs status```We don't want to loose our progress, so lets make a snapshot.```farmfs snap make mysnap```Now create more stuff```echo &quot;oops&quot; &gt; mistake.txtfarmfs freeze mistake.txtProcessing /Users/andrewguy9/Downloads/readme/mistake.txt with csum /Users/andrewguy9/Downloads/readme/.farmfs/userdataPutting link at /Users/andrewguy9/Downloads/readme/.farmfs/userdata/38a/f5c/549/26b620264ab1501150cf189```Well that was a mistake, lets roll back to the old snap.```farmfs snap restore mysnapRemoving /mistake.txt```Now that we have our files built, lets build another depot.```cd ..mkdir copycd copyfarmfs mkfs```We want to add our prior depot as a remote.```farmfs remote add origin ../myfarm```Now lets copy our work from before.```farmfs pull originmkdir /1mkdir /1/2mkdir /1/2/3mkdir /1/2/3/4mkdir /1/2/3/4/5mklink /1/2/3/4/5/v1 -&gt; /4ca/8c5/ae5/e759e237bfb80c51940de7aBlob missing from local, copying*** /Users/andrewguy9/Downloads/copy/.farmfs/userdata/4ca/8c5/ae5/e759e237bfb80c51940de7a /Users/andrewguy9/Downloads/myfarm/.farmfs/userdata/4ca/8c5/ae5/e759e237bfb80c51940de7amkdir /amkdir /a/bmkdir /a/b/cmkdir /a/b/c/dmkdir /a/b/c/d/emklink /a/b/c/d/e/v1 -&gt; /238/851/a91/77b60af767ca431ed521e55Blob missing from local, copying*** /Users/andrewguy9/Downloads/copy/.farmfs/userdata/238/851/a91/77b60af767ca431ed521e55 /Users/andrewguy9/Downloads/myfarm/.farmfs/userdata/238/851/a91/77b60af767ca431ed521e55```Lets see whats in our new depot:```find *11/21/2/31/2/3/41/2/3/4/51/2/3/4/5/v1aa/ba/b/ca/b/c/da/b/c/d/ea/b/c/d/e/v1```## Development:### Testing:#### Regression Testing:Regression tests can be run with `pytest`Tests are kept in the `tests` directory, which will be detected by `pytest automatically`.#### Performance Optimization:Performance testing cases are stored under the `perf` directory. These are useful for making development decisions are not generally useful as ongoing tests.These tests can by run using `pytest` or `tox`.`pytest`:To run a particular trial run:* `pytest -s perf/your_test.py [-k case_pattern]`.Notice that the `-s` is required to get a printout of the results.Example: `pytest -s perf/transducer.py -k transducers``tox`:To run a pattern in a particular environment run:* `tox -e [envs] -- [-k case_pattern]`* Available envs are `{py37,py27,pypy,pypy3}-perf`Example: `tox -e py27-perf,py37-perf -- -k transducers`### Debuggingfarmfs comes with a useful debugging tool `farmdbg`.```farmdbgUsage:  farmdbg reverse &lt;csum&gt;  farmdbg key read &lt;key&gt;  farmdbg key write &lt;key&gt; &lt;value&gt;  farmdbg key delete &lt;key&gt;  farmdbg key list [&lt;key&gt;]  farmdbg walk (keys|userdata|root|snap &lt;snapshot&gt;)  farmdbg checksum &lt;path&gt;...  farmdbg fix link &lt;file&gt; &lt;target&gt;  farmdbg rewrite-links &lt;target&gt;````farmdbg` can be used to dump parts of the keystore or blobstore, as well as walk and repair links.</longdescription>
</pkgmetadata>