<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># CosmosID-HUB Microbiome CLICommand line interface (CLI) and Python 3 client library for interacting with the CosmosID-HUB API. Only works withPython [3.6,3.7,3.8,3.9,3.10].## Requirements### OS Packages* python3* python3-pip### Python package* poetry# InstallationThis package provides:* core Python 3 client library;* a simple CLI for interacting with the CosmosID-HUB API;## Basic installationThe CLI with the core Python library can be installed using `pip3`.* simply run from console `sudo pip3 install cosmosid_cli`&gt; Note: pip3 and setuptools should be upgraded to latest version. Please update those packages on you workstation&gt; regarding to your OS update process before setup CosmosID-HUB CLI.&gt;&gt; ```shell&gt; E.g. for Ubuntu 14.04 perform following steps:&gt; $ sudo apt-get update&gt; $ sudo apt-get upgrade&gt; $ sudo -H pip3 install -U pip setuptools&gt;```&gt;&gt; If you had have previously installed CosmosID-HUB CLI just upgrade CLI&gt; to latest version.&gt;&gt; ```shell&gt; $ sudo -H pip3 install --upgrade cosmosid_cli&gt; ```To install package locally from folder with source files do the following:* install `poetry` check the [doc](https://python-poetry.org/docs/#osx--linux--bashonwindows-install-instructions)* `cd cosmosid-cli/package/`* `poetry install`## Installation from package management service Anaconda.orgAssure that you have Conda already installed or install it based on your system requirements - [link](https://docs.anaconda.com/anaconda/install/ )Follow the [cosmosid project page](https://anaconda.org/cosmosid/cosmosid-cli) to check the last version of cosmosid-cli available on Anaconda.orgThe CLI with Conda can be installed by the following command:```shellconda install -c cosmosid -c conda-forge cosmosid-cli```Verify the CLI version installed```shellcosmosid --version```## Using the CosmosID-HUB CLIThe CosmosID-HUB CLI supports authentication via CosmosID-HUB API Key.Your API key can be found on the [CosmosID-HUB profile page](https://app.cosmosid.com/settings).To automatically authenticate via CosmosID-HUB API Key you should createcredential file `~/.cosmosid` and store your API Key into it inthe following format:```json{  &quot;api_key&quot;: &quot;&lt;your api key string&gt;&quot;}```You can directly use your CosmosID-HUB API Key, rather than storing it in a credential file. To use API Key authentication,pass your key as an argument to the `cosmosid` command:```shellcosmosid --api_key=YOUR_API_KEY &lt;command&gt;```CLI supports files of following extensions: 'fasta', 'fna', 'fasta.gz', 'fastq', 'fq', 'fastq.gz', 'bam', 'sra'## CommandsThere are several types of commands supported by the CosmosID-HUB CLI1. Commands for retrieving data to terminal (output) from CosmosID cloud - files, runs, analysis.2. Commands for uploading metagenomics or amplicon samples to   CosmosID cloud for analysis - uploads.3. Commands for retrieving the reports archive from CosmosID cloud - reports&gt; Note: Each command has options. To get usage information for each CosmosID-HUB CLI command, the user can simply&gt; run `cosmosid &lt;command&gt; --help`### Retrieve FilesThe commands for retrieving data have options for output format. The user can get data into the terminal (or anotheroutput) in a different format - csv, json, table, value, yaml (table is default), and specify the column(s) to show. Inadditional there are CSV format options, user can quoteor unquote or partly quote output values - all, minimal, none, non-numeric (by default only non-numeric values arequoted)Example of output for the --help options for the &lt;files&gt; command:```shell$ cosmosid files --helpusage: cosmosid files [-h] [-f {csv,json,table,value,yaml}] [-c COLUMN]                      [--noindent] [--max-width &lt;integer&gt;] [--fit-width]                      [--print-empty] [--quote {all,minimal,none,nonnumeric}]                      [--parent PARENT]                      [--order {type,name,id,status,size,created}] [--up]Show files in a given directory.optional arguments:  -h, --help            show this help message and exit  --parent PARENT, -p PARENT                        ID of the parent directory. Default: Root  --order {type,name,id,status,reads,created}, -o {type,name,id,status,size,created}                        field for ordering  --up                  order directionoutput formatters:  output formatter options  -f {csv,json,table,value,yaml}, --format {csv,json,table,value,yaml}                        the output format, defaults to table  -c COLUMN, --column COLUMN                        specify the column(s) to include, can be repeatedjson formatter:  --noindent            whether to disable indenting the JSONtable formatter:  --max-width &lt;integer&gt;                        Maximum display width, 1 to disable. You can also use                        the CLIFF_MAX_TERM_WIDTH environment variable, but the                        parameter takes precedence.  --fit-width       Fit the table to the display width. Implied if --max-                        width greater than 0. Set the environment variable                        CLIFF_FIT_WIDTH=1 to always enable --print-empty     Print empty table if there is no data to show.CSV Formatter:  --quote {all,minimal,none,nonnumeric} when to include quotes, defaults to nonnumeric```To retrieve files (samples) stored in CosmosID simply run the `cosmosid` command with a `files` subcommand. For example:```shell#to get contents of your CosmosID root foldercosmosid files#to get contents of appropriate folder use its id as argumentcosmosid files --parent=&lt;folder_id&gt;#to get ordered list simply use the ordering argument with field name with/without order directioncosmosid files --parent=&lt;folder_id&gt; --order size --up```### Retrieve Sample RunsAn each file (sample) stored in CosmosID has one or more Sample Run(s) associated with it.To retrieve sample run(s) associated with a file simply run the `cosmosid` command with `runs` subcommand. For example:```shell#to get runs associated with a speciffic file (sample)cosmosid runs --id=&lt;file_id&gt;```### Upload filesThe CosmosID-HUB CLI supports uploading sample files into CosmosID for analysis.CosmosID supports the following file formats and extension names:.fasta, .fna, .fasta.gz, .fastq, .fq, .fastq.gz, bam, bam.gz, sra, sra.gz. (SRA files can be uploaded without extension)CosmosID supports the following types of analysis:* Metagenomics* Amplicon - 16S or ITS (only 16S and ITS supported for now)&gt; Note: you can get usage help for each command and arguments of CosmosID-HUB CLI by simply runnig `cosmosid --help`&gt; or `cosmosid &lt;command&gt; --help`To upload sample file to CosmosID run `cosmosid` command with `upload` subcommand. By default samples will be uploadedinto root folder. To upload sample into specific *existing* folder you must use id of the folder as parameter.The CosmosID-HUB CLI supports uploading multiple Single-Read and Paired-End samples. For Paired-End samples, the CLIautomatically parse and merge samples in pairs if the samples follow the naming conventions like: xxx_R1.fastq andxxx_R2.fastq OR xxx_R1_001.fastq and xxx_R2_001.fastq. Note: Paired-End samples require &quot;fastq&quot; formatTo upload all samples from folder run `cosmosid upload` command with path to folder specified by --dir/-d parameter&gt; Note: This command respects Paired-End samples grouping with the same rules as for regular uploadRunning example:`cosmosid upload --type metagenomics -f /pathtofile/test1_R1.fastq` -f /pathtofile/test1_R2.fastq -f/pathtofile/test2.fasta```shell#to upload one sample file for Metagenomics analysiscosmosid upload --file &lt;path to file&gt; --type metagenomics#to upload sample file into specific folder for Amplicon 16s analysiscosmosid upload --file &lt;path to file-1&gt; --parent &lt;folder id&gt; --type amplicon-16s#to upload all files from foldercosmosid upload -d /home/user/samples/ --type metagenomics```&gt; Note: uploading of a big file takes time, please be patientOnce file has been uploaded to CosmosID the analyzing process will automatically begin.You can check the status of metagenomics analysis on the page [CosmosID Samples](https://app.cosmosid.com/samples).Amplicon analysis results available only from CosmosID-HUB CLI for now.### Retrieving Analysis ResultsAnalysis results can be retrieved from CosmosID by useing run id or file id. The latest run analysis results will beretrieved when file id used.To retrieve analysis results for a specified run in CosmosID simply run `cosmosid` command with `analysis` subcommand.File For example:```shell#to get list of analysis for the latest run of filecosmosid analysis --id=&lt;file ID&gt;#to get list of analysis for a given run idcosmosid analysis --run_id=&lt;run ID&gt;#to get ordered list of analysis for a given file id simply use ordering argument with field name with/without order directioncosmosid analysis --id=&lt;file ID&gt; --order created --up```&gt; Note: There is no analysis results for Amplicon 16S and Amplicon ITS sample. Use report generation instead of getting&gt; list of analysis for Amplicon 16S and Amplicon ITS.### Generate Analysis Report ArchiveThe CosmosID-HUB CLI supports retrieving the archive of analysis reports from CosmosID for a given `File ID` with agiven `Run ID` and saving the archive to a given file.To retrieve an analysis report archive with TSV files run the `cosmosid` command with `reports` subcommand.```shell# to create analysis report archive for the latest run of sample and save it in# a current directory with a name equivalent to file name in CosmosIDcosmosid reports --id=&lt;file ID&gt;# to create analysis report archive for the given run of sample and save it in# a current directory with a name equivalent to file name in CosmosIDcosmosid reports --id=&lt;file ID&gt; --run_id=&lt;run ID&gt;# to create analysis report archive for the given run of sample and save it# in a given directorycosmosid reports --id=&lt;file ID&gt; --run_id=&lt;run ID&gt; --dir ~/cosmosid/reports# to create analysis report archive for the given run of sample and save it# into a given local filecosmosid reports --id=&lt;file ID&gt; --output /tmp/analysis_report.zip```### Retrieving Artifacts ResultsArtifacts results can be retrieved from CosmosID by using run id.To retrieve artifacts results for a specified run in CosmosID simply run `cosmosid` command with `artifacts` subcommand.File For example:```shell#to get list of artifacts for a given run idcosmosid artifacts --run_id=&lt;run ID&gt;##to create artifacts archive for the given run id of sample and store it to given pathcosmosid artifacts --run_id=&lt;run ID&gt; --type=fastqc-zip --dir /home/user##to create artifacts archive for the given run id of sample and store it with given name in current dircosmosid artifacts --run_id=&lt;run ID&gt; --type=fastqc-zip --output artifacts_report.zip##to create artifacts archive for the given run id of sample and store it with given name and given dircosmosid artifacts --run_id=&lt;run ID&gt; --type=fastqc-zip --dir /home/user --output artifacts_report.zip#to get url to download the archivecosmosid artifacts --run_id=&lt;run ID&gt; --type=fastqc-zip --url```### Download Original SamplesOriginal samples can be downloaded from CosmosID by using samples_ids.To download samples for a specified samples_id in CosmosID simply run `cosmosids` command with `download` subcommand.&gt; Note: We recommend installing pycurl for the best experience with a sample download,&gt; see: http://pycurl.io/docs/latest/index.html#installationFor example:```shell#to download the original samples and save them in the current dircosmosid download --samples_ids=&lt;sample_id&gt;#to download the originals samples and save them in the current dircosmosid download --samples_ids=&lt;sample_id&gt;,&lt;sample_id&gt; #separated by comma &quot;,&quot;#to download the originals samples and store them in the given pathcosmosid download --samples_ids=&lt;sample_id&gt;,&lt;sample_id&gt; --dir=&lt;path_to_directory&gt;#to download the originals samples without displaying download progresscosmosid download --samples_ids=&lt;samples_id&gt;,&lt;sample_id&gt; --no-display#to download the original samples with specified quantity of concurrent files downloadscosmosid download --samples_ids=&lt;sample_id&gt;,&lt;sample_id&gt; --concurrent-downloads=&lt;quantity&gt;```&gt; Note: You can specify chunk size by CHUNK_SIZE environment variable### Comparative analysisIt's possible to view list of comparative analyses and download them.#### List commands```shell#to get list of comparativescosmosid comparatives #to get list of analyses that are not united to comparativecosmosid comparative analyses#to get list of comparatives that are united to comparativecosmosid comparative analyses --comparative-id=&lt;comparative_id&gt;```#### Export commands```shell#to export comparative analyses without log scalecosmosid comparative analyses export --id=&lt;analysis_id&gt; #to export comparative analysescosmosid comparative analyses export --id=&lt;analysis_id&gt; --log-scale#to export comparative analyses with specified taxonomy level ('species' by default)cosmosid comparative analyses export --id=&lt;analysis_id&gt; --tax-level=class --tax-level=genus```</longdescription>
</pkgmetadata>