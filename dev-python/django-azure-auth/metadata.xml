<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>![Build](https://github.com/AgileTek/django-azure-auth/actions/workflows/push-actions.yml/badge.svg)# Django Azure AuthA simple Django app for user authentication with Azure Active Directory.## Description`django-azure-auth` is a Django app which wraps the great [MSAL](https://github.com/AzureAD/microsoft-authentication-library-for-python)package to enable authentication against Microsoft's Azure Active Directory in Django projects.The app includes `login`, `logout` and `callback` authentication views, a decoratorto protect individual views, and middleware which allows the entire site to require userauthentication by default, with the ability to exempt specified views.This project is in no way affiliated with Microsoft.## InstallationFrom PyPi:```bashpip install django-azure-auth```## Configuration### Azure setup- Register an app at https://portal.azure.com/.- Add a client secret and note it down.- Add a redirect URI of the format `https://&lt;domain&gt;/azure_auth/callback`.### SettingsAdd the following to your `settings.py`, replacing the variables in braces with the valuesfrom your Azure app:```pythonAZURE_AUTH = {    &quot;CLIENT_ID&quot;: &quot;&lt;client id&gt;&quot;,    &quot;CLIENT_SECRET&quot;: &quot;&lt;client secret&gt;&quot;,    &quot;REDIRECT_URI&quot;: &quot;https://&lt;domain&gt;/azure_auth/callback&quot;,    &quot;SCOPES&quot;: [&quot;User.Read&quot;],    &quot;AUTHORITY&quot;: &quot;https://login.microsoftonline.com/&lt;tenant id&gt;&quot;,   # Or https://login.microsoftonline.com/common if multi-tenant    &quot;LOGOUT_URI&quot;: &quot;https://&lt;domain&gt;/logout&quot;,    # Optional    &quot;PUBLIC_URLS&quot;: [&quot;&lt;public:view_name&gt;&quot;,]  # Optional, public views accessible by non-authenticated users    &quot;PUBLIC_PATHS&quot;: ['/go/',],  # Optional, public paths accessible by non-authenticated users}LOGIN_URL = &quot;/azure_auth/login&quot;LOGIN_REDIRECT_URL = &quot;/&quot;    # Or any other endpoint```#### Note: You should obfuscate the credentials by using environment variables.### Installed appsAdd the following to your `INSTALLED_APPS`:```pythonINSTALLED_APPS = (    &quot;...&quot;,    &quot;azure_auth&quot;,    &quot;...&quot;)```### Authentication backendConfigure the authentication backend:```pythonAUTHENTICATION_BACKENDS = (&quot;azure_auth.backends.AzureBackend&quot;,)```### URLsInclude the app's URLs in your `urlpatterns`:```pythonfrom django.urls import path, includeurlpatterns = [    path(&quot;azure_auth/&quot;, include(&quot;azure_auth.urls&quot;),),]```## Usage### DecoratorTo make user authentication a requirement for accessing an individual view, decorate theview like so:```pythonfrom azure_auth.decorators import azure_auth_requiredfrom django.shortcuts import HttpResponse@azure_auth_requireddef protected_view(request):    return HttpResponse(&quot;A view protected by the decorator&quot;)```### MiddlewareIf you want to protect your entire site by default, you can use the middleware by adding thefollowing to your `settings.py`:```pythonMIDDLEWARE = [    &quot;...&quot;,    &quot;azure_auth.middleware.AzureMiddleware&quot;,    &quot;...&quot;,]```Make sure you add the middleware after Django's `session` and `authentication` middlewares sothat the request includes the session and user objects. Public URLs which need to be accessed bynon-authenticated users should be specified in the `settings.AZURE_AUTH[&quot;PUBLIC_URLS&quot;]`, asshown above.## Planned development- Groups management## CreditsThis app is heavily inspired by and builds on functionality inhttps://github.com/shubhamdipt/django-microsoft-authentication, with both featureimprovements and code assurance through testing.Credit also to:- https://github.com/Azure-Samples/ms-identity-python-webapp- https://github.com/AzMoo/django-okta-auth</longdescription>
</pkgmetadata>