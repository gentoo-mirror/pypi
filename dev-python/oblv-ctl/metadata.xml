<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># oblv-ctlA Python library to access Oblivious APIs.## UsageFirst, create a client, with your API key. This key can be created in the[Oblivious Console UI](https://console.oblivious.ai/). Go to thesettings page, and create your ApiKey. Once done, the client can becreated as follows``` {.python}from oblv_ctl import authenticateclient = authenticate(apikey=*your_key_here*)```Using this client, all the Oblivious actions can be performed, including the deployment of enclaves. Below is a step-by-step guide, to creating your first deployment.The deployments can be created in two ways - using a pre-built static service or dynamically deploying the code.# Dynamic Service Deployment### 1 Create a serviceA service refers to a branch/tag of your repository that needs to bedeployed. For your first service. you can use the repository[ObliviousAI/FastAPI-Enclave-Services](https://github.com/ObliviousAI/FastAPI-Enclave-Services).Execute the below command to create the service.``` {.python}client.add_service(repo_owner=&quot;ObliviousAI&quot;,repo_name=&quot;FastAPI-Enclave-Services&quot;, ref=&quot;master&quot;, data = {    &quot;auth&quot;: [        {            &quot;auth_name&quot;: &quot;auth_name&quot;,            &quot;auth_type&quot;: &quot;signed_headers&quot;        }    ],    &quot;base_image&quot;: &quot;oblv_ubuntu_18_04_proxy_nsm_api_python_3_8&quot;,    &quot;build_args&quot;: [],    &quot;meta&quot;: {        &quot;author&quot;: &quot;Team Oblivious&quot;,        &quot;author_email&quot;: &quot;hello@oblivious.ai&quot;,        &quot;git&quot;: &quot;https://github.com/ObliviousAI/FastAPI-Enclave-Services.git&quot;,        &quot;version&quot;: &quot;0.1.0&quot;    },    &quot;paths&quot;: [        {            &quot;access&quot;: &quot;user&quot;,            &quot;path&quot;: &quot;/hello/&quot;,            &quot;short_description&quot;: &quot;Hello world example&quot;        }    ],    &quot;roles&quot;: [        {            &quot;role_auth&quot;: &quot;auth_name&quot;,            &quot;role_cardinality&quot;: 1,            &quot;role_description&quot;: &quot;Role for the data scientist&quot;,            &quot;role_name&quot;: &quot;user&quot;        }    ],    &quot;traffic&quot;: {        &quot;inbound&quot;: [            {                &quot;name&quot;: &quot;main_io&quot;,                &quot;port&quot;: 80,                &quot;type&quot;: &quot;tcp&quot;            }        ],        &quot;outbound&quot;: [            {                &quot;domain&quot;: &quot;example.com&quot;,                &quot;name&quot;: &quot;example&quot;,                &quot;port&quot;: 443,                &quot;type&quot;: &quot;tcp&quot;            }        ]    }})```The data provided here is sample service data. You can update the data as per your requirements, adhering to the schema.The response for the call above gives results as follows - &gt;{ \&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;message&quot;: &quot;Success&quot;, \&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;service&quot;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{ \&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ref&quot;: &quot;master&quot;, \&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;service_validated&quot;: true, \&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;sha&quot;: &quot;6b1b3e9cf6b0cb7264aad2fc80d91a009ccf0fc1&quot;, \&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;type&quot;: &quot;branch&quot; \&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} \&gt;} You have now successfully created your first service, and it can be now deployed to an enclave.### 2 Enclave CreationTo create an enclave, you need to decide on a few of the parameters --   **deployment_name** - A unique deployment name. You cannot have two    running deployments with the same name.-   **region_name** - could be one of the AWS regions from    - ***us-east-1*** (N. Virginia)     - ***us-west-2*** (Oregon)    - ***eu-central-1*** (Frankfurt)    - ***eu-west-2*** (London)-   **visibility** - ***private*** or ***public***-   **is_dev_env** - ***True*** or ***False***.-   **tags** - A list of tags for your deployment-   **account_type** - This is the VCS type, and only GitHub*** is    supported for now.-   **build_args** - Arguments specific to your deployment. It includes adding users to their roles with their public keys, runtime arguments and    any additional arguments for your build. It also includes the infra    size needed for the deployment. The options are -    -   ***c5.xlarge*** - CPU:4 RAM:8 GB \-- Credit Utilization: 68.0/hr    -   ***m5.xlarge*** - CPU:4 RAM:16 GB \-- Credit Utilization:        76.8/hr    -   ***r5.xlarge*** - CPU:4 RAM:32 GB \-- Credit Utilization:        100.8/hr    -   ***c5.2xlarge*** - CPU:8 RAM:16 GB \-- Credit Utilization:        136.0/hr    -   ***m5.2xlarge*** - CPU:8 RAM:32 GB \-- Credit Utilization:        153.6/hrA valid example for *build_args* for the service you created -```args = {    &quot;users&quot;: {      &quot;admin&quot;: [        {          &quot;user_name&quot;: &quot;&lt;your name&gt;&quot;,          &quot;public key&quot;: &quot;&lt;your public key&gt;&quot;        }      ]    },    &quot;infra_reqs&quot;: &quot;m5.xlarge&quot;,  }```&gt; üìù **Note:**&gt;&gt; &lt;b&gt;admin&lt;/b&gt; here&gt; is the role defined for the deployment in service.yaml&gt; file&gt;&gt; The service used,&gt; does not have requirements for any runtime or build arguments, so not&gt; needed here.``` {.python}from oblv_ctl.models import CreateDeploymentInputinput = CreateDeploymentInput(    owner=&quot;ObliviousAI&quot;,    repo=&quot;FastAPI-Enclave-Services&quot;,    account_type=&quot;github&quot;,    ref=&quot;master&quot;,    ref_type=&quot;branch&quot;,    region_name=&quot;us-east-1&quot;,    deployment_name=&quot;Depl&quot;,    visibility=&quot;private&quot;,    is_dev_env=True,    tags=[],    build_args=args)response = client.create_deployment(input)```On successful request, enclave creation is initiated, and it returns anid for the deployment, which can be later used to track the status andconnection details for the enclave.### 3 Enclave InformationTo check the state of the deployment, run``` {.python}client.deployment_info(response.deployment_id).current_state```&gt; 'CFT Initiated'When the deployment state becomes ***Running***, it indicates that theenclave is now available for connection.To connect to the enclave, you need **Oblv CLI** installed in yoursystem. The commands to use the CLI can be found in this[documentation](https://docs.oblivious.ai/cli/usage_examples).Cli binaries can be found [here](https://docs.oblivious.ai/cli/binaries)The URL to connect to the enclave using CLI can be accessed using``` {.python}client.deployment_info(response.deployment_id).instance.service_url```&gt;&gt;'https://conso-appli-15aiaxip9pcxk-94364694.enclave.oblivious.ai'&gt;The PCR codes can be found using``` {.python}client.deployment_info(response.deployment_id).pcr_codes```&gt;['d8dd856bacf4a8f0840ab530579b906091803e818e01dc4b8f51c247a7adfcfe55b4ef5f17be6d53bb952d92d87a376c','bcdf05fefccaa8e55bf2c8d6dee9e79bbff31e34bf28a99aa19e6b29c37ee80b214a414b7607236edf26fcb78654e63f','79477bad9504a347afb557a8ccd6f62ea61243311dff39f66944f5150242128da0cd070f0ce629c6beb6bb4f0b52f5ed' ]# Static Service DeploymentIn this type of deployment, services are prebuilt and kept ahead of time. You can either create you static service first and then go ahead for deployment, or you could simply use a service available in marketplace.### 1 Create a serviceExecute the below command to create a static service.```pythonoblv_client.add_static_service(    name=&quot;first deployment&quot;,    description=&quot;First Static Service creation&quot;,    repo_owner=&quot;ObliviousAI&quot;,    repo_name=&quot;FastAPI-Enclave-Services&quot;,    ref=&quot;60d7c177be25cc9758520580f78f7d6b135b17c8&quot;,    arguments={})```### 2 Enclave CreationExecute the below command to create deployment from static service. ```pythonfrom oblv_ctl.models import StaticDeploymentInputobj = StaticDeploymentInput(    service=&quot;&lt;service_id&gt;&quot;,    deployment_name=&quot;first_static_deployment&quot;,    region_name=&quot;us-east-1&quot;,    is_dev_env=True,    runtime_args=&quot;somthing&quot;,    users = {&quot;somerole&quot;: [{&quot;user_name&quot;: &quot;&lt;your name&gt;&quot;, &quot;public key&quot;: &quot;&lt;your public key&gt;&quot;}]},    infra_reqs=&quot;m5.xlarge&quot;,    marketplace=False)oblv_client.create_static_service_deployment(obj)```The next steps for getting deployment information and the pcr codes are same for both the service types and can be found [here](#3-enclave-information).</longdescription>
</pkgmetadata>