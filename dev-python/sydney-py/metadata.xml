<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># &lt;img src=&quot;https://raw.githubusercontent.com/vsakkas/sydney.py/master/images/logo.svg&quot; width=&quot;28px&quot; /&gt; Sydney.py[![Latest Release](https://img.shields.io/github/v/release/vsakkas/sydney.py.svg)](https://github.com/vsakkas/sydney.py/releases/tag/v0.18.0)[![Python](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)[![MIT License](https://img.shields.io/badge/license-MIT-blue)](https://github.com/vsakkas/sydney.py/blob/master/LICENSE)Python Client for Copilot (formerly named Bing Chat), also known as Sydney.&gt; [!NOTE]&gt; This is an **unofficial** client.## Features- Connect to Copilot, Microsoft's AI-powered personal assistant.- Ask questions and have a conversation in various conversation styles.- Compose content in various formats and tones.- Stream response tokens for real-time communication.- Retrieve citations and suggested user responses.- Enhance your prompts with images for an enriched experience.- Use asyncio for efficient and non-blocking I/O operations.## Requirements- Python 3.9 or newer- Microsoft account with access to [Copilot](https://copilot.microsoft.com/) *(optional)*## InstallationTo install Sydney.py, run the following command:```bashpip install sydney-py```or, if you use [poetry](https://python-poetry.org/):```bashpoetry add sydney-py```&gt; [!TIP]&gt; Make sure you're using the latest version of Sydney.py to ensure best compatibility with Copilot.## Usage### PrerequisitesTo use Sydney.py, you first need to extract all the cookies from the Copilot web page. These cookies are used to authenticate your requests to the Copilot API.To get the cookies, follow these steps on Microsoft Edge:- Go to the [Copilot web page](https://copilot.microsoft.com/).- Open the developer tools in your browser (usually by pressing `F12` or right-clicking on the chat dialog and selecting `Inspect`).- Select the `Network` tab to view all requests sent to Copilot.- Write a message on the chat dialog that appears on the web page.- Find a request named `create?bundleVersion=XYZ` and click on it.- Scroll down to the requests headers section and copy the entire value after the `Cookie:` field.Then, set it as an environment variable in your shell:```bashexport BING_COOKIES=&lt;your-cookies&gt;```or, in your Python code:```pythonos.environ[&quot;BING_COOKIES&quot;] = &quot;&lt;your-cookies&gt;&quot;```&gt; [!TIP]&gt; In some regions, using cookies is not required, in which case the above instructions can be skipped.&gt; [!IMPORTANT]&gt; For regions where a cookie is required, it is recommended to manually write messages to Copilot until a box containing a `Verifying` message appears, which should then switch to a `Success!` message. Without this step, it is possible that Sydney.py will fail with a `CaptchaChallenge` error.### ExampleYou can use Sydney.py to easily create a CLI client for Copilot:```pythonimport asynciofrom sydney import SydneyClientasync def main() -&gt; None:    async with SydneyClient() as sydney:        while True:            prompt = input(&quot;You: &quot;)            if prompt == &quot;!reset&quot;:                await sydney.reset_conversation()                continue            elif prompt == &quot;!exit&quot;:                break            print(&quot;Sydney: &quot;, end=&quot;&quot;, flush=True)            async for response in sydney.ask_stream(prompt):                print(response, end=&quot;&quot;, flush=True)            print(&quot;\n&quot;)if __name__ == &quot;__main__&quot;:    asyncio.run(main())```### Sydney ClientYou can create a Sydney Client and initialize a connection with Copilot which starts a conversation:```pythonsydney = SydneyClient()await sydney.start_conversation()# Conversationawait sydney.end_conversation()```Alternatively, you can use the `async with` statement to keep the code compact:```pythonasync with SydneyClient() as sydney:    # Conversation```### Conversation StyleYou can set the conversation style when creating a Sydney Client:```pythonsydney = SydneyClient(style=&quot;creative&quot;)```The available options are `creative`, `balanced` and `precise`.### Reset ConversationYou can reset the conversation in order to make the client forget the previous conversation. You can also change the conversation style without creating a new client:```pythonasync with SydneyClient() as sydney:    # Conversation    await sydney.reset_conversation(style=&quot;creative&quot;)```### AskYou can ask Copilot questions and (optionally) include citations in the results:```pythonasync with SydneyClient() as sydney:    response = await sydney.ask(&quot;When was Bing Chat released?&quot;, citations=True)    print(response)```You can also stream the response tokens:```pythonasync with SydneyClient() as sydney:    async for response in sydney.ask_stream(&quot;When was Bing Chat released?&quot;, citations=True):        print(response, end=&quot;&quot;, flush=True)```Both versions of the `ask` method support the same parameters.### AttachmentIt is also possible to provide a URL to an image as an attachment, which will be used as input together with the prompt:```pythonasync with SydneyClient() as sydney:    response = await sydney.ask(&quot;What does this picture show?&quot;, attachment=&quot;&lt;image-url&gt;&quot;)    print(response)```### Web ContextYou can also provide the contents of a web page as additional context to be used along with the prompt:```pythonasync with SydneyClient() as sydney:    response = await sydney.ask(&quot;Describe the webpage&quot;, context=&quot;&lt;web-page-source&gt;&quot;)    print(response)```### ComposeYou can ask Copilot to compose different types of content, such emails, articles, ideas and more:```pythonasync with SydneyClient() as sydney:    response = await sydney.compose(&quot;Why Python is a great language&quot;, format=&quot;ideas&quot;)    print(response)```You can also stream the response tokens:```pythonasync with SydneyClient() as sydney:   async for response in sydney.compose_stream(&quot;Why Python is a great language&quot;, format=&quot;ideas&quot;):        print(response, end=&quot;&quot;, flush=True)```The default available options for the `tone` parameter are:- `professional`- `casual`- `enthusiastic`- `informational`- `funny`It is also possible to provide any other value for the `tone` parameter.The available options for the `format` parameter are:- `paragraph`- `email`- `blogpost`- `ideas`The available options for the `length` parameter are:- `short`- `medium`- `long`Both versions of the `compose` method support the same parameters.### Suggested ResponsesYou can also receive the suggested user responses as generated by Copilot along with the text answer. Both `ask`, `ask_stream` support this feature:```pythonasync with SydneyClient() as sydney:    response, suggested_responses = await sydney.ask(&quot;When was Bing Chat released?&quot;, suggestions=True)    if suggested_responses:        print(&quot;Suggestions:&quot;)        for suggestion in suggested_responses:            print(suggestion)```And also `compose` and `compose_stream`:```pythonasync with SydneyClient() as sydney:    response, suggested_responses = await sydney.compose(        &quot;Why Python is a great language&quot;, format=&quot;ideas&quot;, suggestions=True    )    if suggested_responses:        print(&quot;Suggestions:&quot;)        for suggestion in suggested_responses:            print(suggestion)```&gt; [!NOTE]&gt; The suggested user responses are returned only if the suggestions parameter is true. Otherwise, all `ask` and `compose` methods return only the response.&gt; [!NOTE]&gt; When using the `ask_stream` or `compose_stream` method with the suggestions parameter, only the lastly returned suggested user responses may contain a value. For all previous iterations, the suggested user responses will be `None`.### Compose using SuggestionsYou can also improve or alter the results of `compose` by using either the suggested responses or any other prompt:```pythonasync with SydneyClient() as sydney:    response, suggested_responses = await sydney.compose(        prompt=&quot;Why Python is a great language&quot;, format=&quot;ideas&quot;, suggestions=True,    )    response, suggested_responses = await sydney.compose(        prompt=suggested_responses[0], format=&quot;ideas&quot;, suggestions=True    )    print(response)```### Raw ResponseYou can also receive the raw JSON response that comes from Copilot instead of a text answer. Both `ask` and `compose` support this feature:```pythonasync with SydneyClient() as sydney:    response = await sydney.ask(&quot;When was Bing Chat released?&quot;, raw=True)    print(response)```### ConversationsYou can also receive all existing conversations that were made with the current client:```pythonasync with SydneyClient() as sydney:    response = await sydney.get_conversations()    print(response)```### ExceptionsWhen something goes wrong, Sydney.py might throw one of the following exceptions:| Exception                     | Meaning                                   | Solution                ||-------------------------------|-------------------------------------------|-------------------------|| `NoConnectionException`       | No connection to Copilot was found        | Retry                   || `ConnectionTimeoutException`  | Attempt to connect to Copilot timed out   | Retry                   || `NoResponseException`         | No response was returned from Copilot     | Retry or use new cookie || `ThrottledRequestException`   | Request is throttled                      | Wait and retry          || `CaptchaChallengeException`   | Captcha challenge must be solved          | Use new cookie          || `ConversationLimitException`  | Reached conversation limit of N messages  | Start new conversation  || `CreateConversationException` | Failed to create conversation             | Retry or use new cookie || `GetConversationsException`   | Failed to get conversations               | Retry                   |*For more detailed documentation and options, please refer to the code docstrings.*## LicenseThis project is licensed under the MIT License - see the [LICENSE](https://github.com/vsakkas/sydney.py/blob/master/LICENSE) file for details.</longdescription>
</pkgmetadata>