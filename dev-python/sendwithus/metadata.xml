<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>sendwithus python-client========================[![Build Status](https://travis-ci.org/sendwithus/sendwithus_python.png)](https://travis-ci.org/sendwithus/sendwithus_python)## Requirements- [Python requests library](http://docs.python-requests.org/en/master/user/install/#install)## Installation    pip install sendwithus## UsageFor all examples, assume:```pythonimport sendwithusapi = sendwithus.api(api_key='YOUR-API-KEY')```### Error HandlingBy default, the API calls return a response object. However, you can use`sendwithus.api(api_key='YOUR-API-KEY', raise_errors=True)` which will raise the following errors:* `AuthenticationError` - Caused by an invalid API key* `APIError` - Caused by an invalid API request (4xx error)* `ServerError` - Caused by a server error (5xx error)Errors can be imported from the `sendwithus.exceptions` module.# Templates### Get Your Templates```pythonapi.templates()```### Get a Specific Template```pythonapi.get_template(    'YOUR-TEMPLATE-ID')```### Get a Specific Template Version```pythonapi.get_template(    'YOUR-TEMPLATE-ID',    version='YOUR-VERSION-ID')```### Create a Template```pythonapi.create_template(    name='Email Name',    subject='Email Subject',    html='&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Valid HTML&lt;/body&gt;&lt;/html&gt;',    text='Optional text content',    preheader='Optional preheader')```### Create a New Locale```pythonapi.create_new_locale(    'YOUR-TEMPLATE-ID',    locale='fr-FR',    version_name='Version Name',    subject='Email Subject',    html='&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Valid HTML&lt;/body&gt;&lt;/html&gt;',    text='Optional text content',    preheader='Optional preheader')```### Create a New Version```pythonapi.create_new_version(    template_id='YOUR-TEMPLATE-ID',    name='Version Name',    subject='Email Subject',    html='&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Valid HTML&lt;/body&gt;&lt;/html&gt;',    text='Optional text content',    preheader='Optional preheader',    locale='fr-FR')```### Update a Template Version```pythonapi.update_template_version(    template_id='YOUR-TEMPLATE-ID',    version_id='YOUR-VERSION-ID',    name='Email Name'    subject='Email Subject',    html='&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Valid HTML&lt;/body&gt;&lt;/html&gt;',    text='Optional text content',    preheader='Optional preheader')```We validate all HTML and will return an error if it's invalid.```pythonr.status_code# 400r.content# 'email html failed to validate'```# Send*NOTE* - If a customer does not exist by the specified email (recipient address), the send call will create a customer.- email_id                      &amp;mdash; Template ID to send- recipient   - address                    &amp;mdash; The recipient's email address   - name (optional)            &amp;mdash; The recipient's name- email_data (optional)         &amp;mdash; Object containing email template data- sender (optional)   - address                    &amp;mdash; The sender's email address   - reply_to                   &amp;mdash; The sender's reply-to address   - name                       &amp;mdash; The sender's name- cc (optional)                 &amp;mdash; A list of CC recipients, of the format {'address': 'cc@email.com'}- bcc (optional)                &amp;mdash; A list of BCC recipients, of the format {'address': 'bcc@email.com'}- headers (options)             &amp;mdash; Object contain SMTP headers to be included with the email- esp\_account (optional)       &amp;mdash; ID of the ESP Account to send this email through. ex: esp\_1a2b3c4d5e- files (optional)              &amp;mdash; List of file attachments (combined maximum 7MB)- inline (optional)             &amp;mdash; Inline attachment object- locale (optional)             &amp;mdash; Template locale to send (ie: en-US)- email_version_name (option)   &amp;mdash; Template version to send (ie: Version A)### Call with REQUIRED parameters onlyThe `email_data` field is optional, but highly recommended!```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'address': 'us@sendwithus.com'    })print r.status_code# 200```### Call with REQUIRED parameters and email_data```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'address': 'us@sendwithus.com'    },    email_data={        'first_name': 'Matt'    })print r.status_code# 200```### Optional SenderThe `sender['address']` is a required sender field. `sender['name']` and `sender['reply_to']` are both optional.```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    email_data={        'first_name': 'Matt'    },    sender={        'address': 'company@company.com',        'reply_to':'info@company.com',  # Optional        'name': 'Company'  # Optional    })print r.status_code# 200```### Optional CC```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    cc=[        {'address': 'company@company.com'},        {'address': 'info@company.com'}    ])print r.status_code# 200```### Optional BCC```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    bcc=[        {'address': 'company@company.com'},        {'address': 'info@company.com'}    ])print r.status_code# 200```### Optional Headers```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    headers={        'X-HEADER-ONE': 'header-value'    })print r.status_code# 200```### Optional ESP Account```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    esp_account='YOUR-ESP-ID')print r.status_code# 200```### Optional File Attachments```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    files=[        open('/home/Matt/report1.txt', 'r'),        open('/home/Matt/report2.txt', 'r')    ])print r.status_code# 200```### Optional File Attachments with explicit file names```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    files=[{        'file': open('/home/Matt/report1.txt', 'r'),        'filename': 'arbitrary_file_name.xyz'    }])print r.status_code# 200```### Optional Inline Image```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    inline=open('image.jpg', 'r'))print r.status_code# 200```### Optional Inline Image with explicit file names```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    inline={        'file': open('/home/Matt/image.jpg', 'r'),        'filename': 'cool_image.jpg'    })print r.status_code# 200```### Optional Locale```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    locale='fr-FR')print r.status_code# 200```### Optional Version Name```pythonr = api.send(    email_id='YOUR-TEMPLATE-ID',    recipient={        'name': 'Matt',        'address': 'us@sendwithus.com'    },    email_version_name='Version A')print r.status_code# 200```# Drip Campaigns### List all Drip CampaignsList all drip campaigns for the current profile```pythonapi.list_drip_campaigns()```### Start a Customer on a Drip CampaignStarts a customer on the first step of a specified drip campaign```pythonapi.start_on_drip_campaign(    'dc_1234asdf1234',    {'address': 'customer@email.com'})```### Start a Customer on a Drip Campaign with email_dataYou may specify extra data to be merged into the templates in the drip campaign.*Note* &amp;emdash; Any data provided in the `email_data` parameter for `start_on_drip_campaign()` will be used throughout the entire drip campaign.```pythonapi.start_on_drip_campaign(    'dc_1234asdf1234',    {'address': 'customer@email.com'},    email_data={'color': 'blue'},    sender={'address': 'from@email.com'},    cc=[{'address': 'cc@email.com'}],    tags=['tag_one', 'tag_two'],    esp_account='esp_1234',    locale='fr-FR')```### Remove a Customer from a Drip CampaignDeactivates all pending emails for a customer on a specified drip campaign```pythonapi.remove_from_drip_campaign(    'customer@email.com',    'dc_1234asdf1234')```### Remove a Customer from all Drip CampaignsYou can deactivate all pending drip campaign emails for a customer```pythonapi.drip_deactivate(    'customer@example.com')```### Remove a Customer from a Single Drip Campaigns```pythonapi.remove_from_drip_campaign(    'customer@example.com',    'dc_1234asdf1234')```### List the details of a specific Drip Campaign```pythonapi.drip_campaign_details(    'dc_1234asdf1234')```# Customers### Get a Customer```pythonapi.customer_details(    'customer@example.com')```### Create/Update Customer LocaleYou can use the same endpoint to create or update a customer. This is primarilyused to associate a locale with an email address so Sendwithus canautomatically send them the correct template. Note that if your templates areonly in one language then you don't need to use this feature.```pythonapi.customer_create(    'customer@example.com',    locale=&quot;fr-FR&quot;)```### Delete a Customer```pythonapi.customer_delete(    'customer@example.com')```# Snippets### Get All Snippets```pythonapi.snippets()```### Get a Specific Snippet```pythonapi.get_snippet(    'snp_1234asdf1234')```### Create a Snippet```pythonapi.create_snippet(    name='My Snippet',    body='&lt;h1&gt;Snippets!&lt;/h1&gt;')```### Update a Snippet```pythonapi.update_snippet(    'snp_1234asdf1234',    name='My Snippet',    body='&lt;h1&gt;Snippets!&lt;/h1&gt;')```# Internationalization (i18n) API### Get translation package (.pot file)```pythonapi.get_translation_template(    `my_translation_tag`)```### Post translated strings and .po files```pythonwith open('my_translation_file', 'rb') as f:    api.create_translation_file(        `my_translation_tag`,        f.read()    )```# Render### Render a Template with dataThe Render API allows you to render a template with data, using the exact same rendering workflow that Sendwithus uses when delivering your email.`Strict` is set to `False` as a default, if `Strict=True` this API call will fail on any missing `email_data`.```pythonapi.render(    email_id='YOUR-TEMPLATE-ID',    email_data={        'amount': '$12.00'    },    locale='fr-FR',    version_name='French-Version',    strict=False)```# Batch APISendwithus' API has a [batch endpoint](https://support.sendwithus.com/api/#batchapi) that can take multiple requests and execute them concurrently. *Note* that Sendwithus recommends keeping batch requests to 10 items or less.### Creating and Executing a Batch Request```pythonapi = sendwithus.api('YOUR-API-KEY')batch = api.start_batch()emails = [    'user+1@example.com',    'user+2@example.com',    # ...    'user+10@example.com']# Generate the batch requestfor email in emails:    batch.send(        email_id='YOUR-TEMPLATE-ID',        recipient={            'address': email        }    )print batch.command_length()  # show number of items in the batch requestresults = batch.execute()     # returns a `requests` Response Object```# Expected Responses### Success```bash    &gt;&gt;&gt; r.status_code    200    &gt;&gt;&gt; r.json().get('success')    True    &gt;&gt;&gt; r.json().get('status')    u'OK'    &gt;&gt;&gt; r.json().get('receipt_id')    u'numeric-receipt-id'```### Error cases* malformed request```bash    &gt;&gt;&gt; r.status_code    400```* bad API key```bash    &gt;&gt;&gt; r.status_code    403```## Run TestsUse [tox](https://tox.readthedocs.io/en/latest/) to run the tests:```bashtox```### Testing Multiple Python VersionsThis assumes you have [tox](https://tox.readthedocs.io/en/latest/) installed and used[pyenv](https://github.com/yyuu/pyenv) to install multiple versions of python.Once all the supported python versions are installed simply run:```bashtox```This will run the tests against all the versions specified in `tox.ini`.## Troubleshooting### General Troubleshooting-   Enable debug mode-   Make sure you're using the latest Python client-   Capture the response data and check your logs &amp;mdash; often this will have the exact error### Enable Debug ModeDebug mode prints out the underlying request information as well as the data payload that gets sent to Sendwithus. You will most likely find this information in your logs. To enable it, simply put `DEBUG=True` as a parameter when instantiating the API object. Use the debug mode to compare the data payload getting sent to [Sendwithus' API docs](https://support.sendwithus.com/api &quot;Official Sendwithus API Docs&quot;).```pythonimport sendwithusapi = sendwithus.api(api_key='YOUR-API-KEY', DEBUG=True)```### Response RangesSendwithus' API typically sends responses back in these ranges:-   2xx &amp;emdash; Successful Request-   4xx &amp;emdash; Failed Request (Client error)-   5xx &amp;emdash; Failed Request (Server error)If you're receiving an error in the 400 response range follow these steps:-   Double check the data and ID's getting passed to Sendwithus-   Ensure your API key is correct-   Log and check the body of the response### InternalTo package```bash  python setup.py sdist bdist_wheel upload```</longdescription>
</pkgmetadata>