<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># GPAS CLIThe command line and Python API client for the GPAS mycobacterial platform. Enables secure sample upload with client-side human read removal and retrieval of analytical outputs.## Install### Installing MinicondaIf a conda package manager is already installed, skip to [Installing the GPAS CLI](#installing-or-updating-the-gpas-cli), otherwise:**Linux**- In a terminal console, install Miniconda, following instructions and accepting default options:  ```bash  curl -O https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh  bash Miniconda3-latest-Linux-x86_64.sh  ```**MacOS**The GPAS CLI requires an `x86_64` conda installation. If your Mac has an Apple processor, you must disable or delete any existing `arm64` conda installations before continuing.- If your Mac has an Apple processor, using Terminal, firstly run:  ```bash  arch -x86_64 zsh  ```- Install Miniconda using Terminal, following instructions and accepting default options:  ```bash  curl -O https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh  bash Miniconda3-latest-MacOSX-x86_64.sh  ```### Installing or updating the GPAS CLI- If using a Mac with an Apple processor, using Terminal, firstly run:  ```bash  arch -x86_64 zsh  ```- Perform the installation/upgrade:  ```bash  conda create --yes -n gpas -c conda-forge -c bioconda hostile  conda activate gpas  pip install gpas  ```- Test:  ```  gpas --version  ```## UsageEnsure that the conda environment is active:```bashconda activate gpas```#### HelpRun `gpas --help` for an overview of CLI subcommands. For help with a specific subcommand, use e.g. `gpas auth --help`#### Authentication (`gpas auth`)The first time you use the CLI, you will need to authenticate by running `gpas auth` and entering your username and password. This token will be used automatically for subsequent commands.```gpas authEnter your username: bede.constantinides@ndm.ox.ac.ukEnter your password: ***************```#### Uploading samples (`gpas upload`)Performs metadata validation and client-side removal of human reads in each of your samples before uploading sequences to the GPAS platform.```bashgpas upload tests/data/illumina.csv```This generates a mapping CSV (e.g. `a5w2e8.mapping.csv`) linking your local sample names with their randomly generated remote identifiers (GUIDs). Keep this file safe as it's useful for downloading and relinking results later.#### Downloading output files (`gpas download`)Download the output files associated with a batch of samples given the mapping CSV generated during upload, or one or more sample GUIDs. When a mapping CSV is used, downloaded file names are prefixed with the sample names provided at upload by default. Otherwise downloaded files are prefixed with the sample GUID.```bash# Download the main reports for all samples in a5w2e8.mapping.csvgpas download a5w2e8.mapping.csv# Download the main and speciation reports for samples in a5w2e8.mapping.csvgpas download a5w2e8.mapping.csv --filenames main_report.json,speciation_report.json# Download the main report for one samplegpas download 3bf7d6f9-c883-4273-adc0-93bb96a499f6# Download the main report for two samplesgpas download 3bf7d6f9-c883-4273-adc0-93bb96a499f6,6f004868-096b-4587-9d50-b13e09d01882# Save downloaded files to a specific directorygpas download a5w2e8.mapping.csv --out-dir results```## SupportFor technical support, please open an issue or contact `support@gpas.global`## Development**Development install**```bashgit clone https://github.com/GlobalPathogenAnalysisService/cli.gitcd cliconda env create -y -f environment-dev.ymlpip install --editable .```**Updating**```bashgit pull origin maingpas --version```### Using a local development server```bashexport GPAS_HOST=&quot;localhost:8000&quot;export GPAS_PROTOCOL=&quot;http&quot;```To unset:```bashunset GPAS_HOSTunset GPAS_PROTOCOL```### Releasing a new version```bashpytest# Increment version string inside src/gpas/__init__.pygit tag 0.xx.0  # Tag new versiongit push origin main --tags  # Push including tagsflit buildflit publish  # Uploads to PyPI given appropriate permission# Announce in Slack CLI channel# PR gpas/gpas/settings.py with new version```</longdescription>
</pkgmetadata>