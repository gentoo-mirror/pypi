<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>zerorpc=======.. image:: https://travis-ci.org/0rpc/zerorpc-python.svg?branch=master    :target: https://travis-ci.org/0rpc/zerorpc-pythonMailing list: zerorpc@googlegroups.com (https://groups.google.com/d/forum/zerorpc)zerorpc is a flexible RPC implementation based on zeromq and messagepack. Service APIs exposed with zerorpc are called &quot;zeroservices&quot;.zerorpc can be used programmatically or from the command-line. It comeswith a convenient script, &quot;zerorpc&quot;, allowing to:* expose Python modules without modifying a single line of code,* call those modules remotely through the command line.Installation------------On most systems, its a matter of::  $ pip install zerorpcDepending of the support from Gevent and PyZMQ on your system, you might need to install `libev` (for gevent) and `libzmq` (for pyzmq) with the development files.Create a server with a one-liner--------------------------------Let's see zerorpc in action with a simple example. In a first terminal,we will expose the Python &quot;time&quot; module::  $ zerorpc --server --bind tcp://*:1234 time.. note::   The bind address uses the zeromq address format. You are not limited   to TCP transport: you could as well specify ipc:///tmp/time to use   host-local sockets, for instance. &quot;tcp://\*:1234&quot; is a short-hand to   &quot;tcp://0.0.0.0:1234&quot; and means &quot;listen on TCP port 1234, accepting    connections on all IP addresses&quot;.Call the server from the command-line-------------------------------------Now, in another terminal, call the exposed module::  $ zerorpc --client --connect tcp://127.0.0.1:1234 strftime %Y/%m/%d  Connecting to &quot;tcp://127.0.0.1:1234&quot;  &quot;2011/03/07&quot;Since the client usecase is the most common one, &quot;--client&quot; is the defaultparameter, and you can remove it safely::  $ zerorpc --connect tcp://127.0.0.1:1234 strftime %Y/%m/%d  Connecting to &quot;tcp://127.0.0.1:1234&quot;  &quot;2011/03/07&quot;Moreover, since the most common usecase is to *connect* (as opposed to *bind*)you can also omit &quot;--connect&quot;::  $ zerorpc tcp://127.0.0.1:1234 strftime %Y/%m/%d  Connecting to &quot;tcp://127.0.0.1:1234&quot;  &quot;2011/03/07&quot;See remote service documentation--------------------------------You can introspect the remote service; it happens automatically if you don'tspecify the name of the function you want to call::  $ zerorpc tcp://127.0.0.1:1234  Connecting to &quot;tcp://127.0.0.1:1234&quot;  tzset       tzset(zone)  ctime       ctime(seconds) -&gt; string  clock       clock() -&gt; floating point number  struct_time &lt;undocumented&gt;  time        time() -&gt; floating point number  strptime    strptime(string, format) -&gt; struct_time  gmtime      gmtime([seconds]) -&gt; (tm_year, tm_mon, tm_mday, tm_hour, tm_min,  mktime      mktime(tuple) -&gt; floating point number  sleep       sleep(seconds)  asctime     asctime([tuple]) -&gt; string  strftime    strftime(format[, tuple]) -&gt; string  localtime   localtime([seconds]) -&gt; (tm_year,tm_mon,tm_mday,tm_hour,tm_min,Specifying non-string arguments-------------------------------Now, see what happens if we try to call a function expecting a non-stringargument::  $ zerorpc tcp://127.0.0.1:1234 sleep 3  Connecting to &quot;tcp://127.0.0.1:1234&quot;  Traceback (most recent call last):  [...]  TypeError: a float is requiredThat's because all command-line arguments are handled as strings. Don't worry,we can specify any kind of argument using JSON encoding::  $ zerorpc --json tcp://127.0.0.1:1234 sleep 3  Connecting to &quot;tcp://127.0.0.1:1234&quot;  [wait for 3 seconds...]  nullzeroworkers: reversing bind and connect---------------------------------------Sometimes, you don't want your client to connect to the server; you wantyour server to act as a kind of worker, and connect to a hub or queue whichwill dispatch requests. You can achieve this by swapping &quot;--bind&quot; and&quot;--connect&quot;::  $ zerorpc --bind tcp://*:1234 strftime %Y/%m/%dWe now have &quot;something&quot; wanting to call the &quot;strftime&quot; function, and waitingfor a worker to connect to it. Let's start the worker::  $ zerorpc --server tcp://127.0.0.1:1234 timeThe worker will connect to the listening client and ask him &quot;what should I do?&quot;; the client will send the &quot;strftime&quot; function call; the worker willexecute it and return the result. The first program will display thelocal time and exit. The worker will remain running.Listening on multiple addresses-------------------------------What if you want to run the same server on multiple addresses? Just repeatthe &quot;--bind&quot; option::  $ zerorpc --server --bind tcp://*:1234 --bind ipc:///tmp/time timeYou can then connect to it using either &quot;zerorpc tcp://\*:1234&quot; or&quot;zerorpc ipc:///tmp/time&quot;.Wait, there is more! You can even mix &quot;--bind&quot; and &quot;--connect&quot;. That meansthat your server will wait for requests on a given address, *and* connectas a worker on another. Likewise, you can specify &quot;--connect&quot; multiple times,so your worker will connect to multiple queues. If a queue is not running,it won't affect the worker (that's the magic of zeromq)... warning:: A client should probably not connect to multiple addresses!   Almost all other scenarios will work; but if you ask a client to connect   to multiple addresses, and at least one of them has no server at the end,   the client will ultimately block. A client can, however, bind multiple   addresses, and will dispatch requests to available workers. If you want   to connect to multiple remote servers for high availability purposes,   you insert something like HAProxy in the middle.Exposing a zeroservice programmatically---------------------------------------Of course, the command-line is simply a convenience wrapper for the zerorpcpython API. Below are a few examples.Here's how to expose an object of your choice as a zeroservice::    class Cooler(object):        &quot;&quot;&quot; Various convenience methods to make things cooler. &quot;&quot;&quot;        def add_man(self, sentence):            &quot;&quot;&quot; End a sentence with &quot;, man!&quot; to make it sound cooler, and            return the result. &quot;&quot;&quot;            return sentence + &quot;, man!&quot;        def add_42(self, n):            &quot;&quot;&quot; Add 42 to an integer argument to make it cooler, and return the            result. &quot;&quot;&quot;            return n + 42        def boat(self, sentence):            &quot;&quot;&quot; Replace a sentence with &quot;I'm on a boat!&quot;, and return that,            because it's cooler. &quot;&quot;&quot;            return &quot;I'm on a boat!&quot;    import zerorpc    s = zerorpc.Server(Cooler())    s.bind(&quot;tcp://0.0.0.0:4242&quot;)    s.run()Let's save this code to *cooler.py* and run it::  $ python cooler.pyNow, in another terminal, let's try connecting to our awesome zeroservice::  $ zerorpc -j tcp://localhost:4242 add_42 1  43  $ zerorpc tcp://localhost:4242 add_man 'I own a mint-condition Volkswagen Golf'  &quot;I own a mint-condition Volkswagen Golf, man!&quot;  $ zerorpc tcp://localhost:4242 boat 'I own a mint-condition Volkswagen Golf, man!'  &quot;I'm on a boat!&quot;Congratulations! You have just made the World a little cooler with your firstzeroservice, man!</longdescription>
</pkgmetadata>