<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Cashu Nutshell**Cashu is a Chaumian Ecash wallet and mint for Bitcoin Lightning. Cashu Nutshell is the reference implementation in Python.**&lt;a href=&quot;https://pypi.org/project/cashu/&quot;&gt;&lt;img alt=&quot;Release&quot; src=&quot;https://img.shields.io/pypi/v/cashu?color=black&quot;&gt;&lt;/a&gt; &lt;a href=&quot;https://pepy.tech/project/cashu&quot;&gt; &lt;img alt=&quot;Downloads&quot; src=&quot;https://pepy.tech/badge/cashu&quot;&gt;&lt;/a&gt; &lt;a href=&quot;https://app.codecov.io/gh/cashubtc/cashu&quot;&gt;&lt;img alt=&quot;Coverage&quot; src=&quot;https://img.shields.io/codecov/c/gh/cashubtc/cashu&quot;&gt;&lt;/a&gt;*Disclaimer: The author is NOT a cryptographer and this work has not been reviewed. This means that there is very likely a fatal flaw somewhere. Cashu is still experimental and not production-ready.*Cashu is an Ecash implementation based on David Wagner's variant of Chaumian blinding ([protocol specs](https://github.com/cashubtc/nuts)). Token logic based on [minicash](https://github.com/phyro/minicash) ([description](https://gist.github.com/phyro/935badc682057f418842c72961cf096c)) which implements a [Blind Diffie-Hellman Key Exchange](https://cypherpunks.venona.com/date/1996/03/msg01848.html) scheme written down [here](https://gist.github.com/RubenSomsen/be7a4760dd4596d06963d67baf140406). The database mechanics in Cashu Nutshell and the Lightning backend uses parts from [LNbits](https://github.com/lnbits/lnbits-legend).&lt;p align=&quot;center&quot;&gt;&lt;a href=&quot;#cashu-client-protocol&quot;&gt;Cashu protocol&lt;/a&gt; ·&lt;a href=&quot;#easy-install&quot;&gt;Quick Install&lt;/a&gt; ·&lt;a href=&quot;#hard-install-poetry&quot;&gt;Manual install&lt;/a&gt; ·&lt;a href=&quot;#configuration&quot;&gt;Configuration&lt;/a&gt; ·&lt;a href=&quot;#using-cashu&quot;&gt;Using Cashu&lt;/a&gt; ·&lt;a href=&quot;#running-a-mint&quot;&gt;Run a mint&lt;/a&gt;&lt;/p&gt;### Feature overview of Nutshell- Full Bitcoin Lightning support- CLI Cashu wallet and mint server- Include the wallet and mint library into other Python projects- PostgreSQL and SQLite database support- Wallet: Builtin Tor for hiding IPs- Wallet: Multimint support- Wallet: Send and receive tokens on nostr## The Cashu protocolThere are ongoing efforts to implement alternative Cashu clients that use the same protocol. See the [documentation page](https://docs.cashu.space/) for more information on other projects. If you are interested in helping with Cashu development, please refer to the protocol specs [protocol specs](https://github.com/cashubtc/nuts). ## Easy InstallThe easiest way to use Cashu is to install the package it via pip:```bashpip install cashu```To update Cashu, use `pip install cashu -U`. If you have problems running the command above on Ubuntu, run `sudo apt install -y pip pkg-config` and `pip install wheel`. On macOS, you might have to run `pip install wheel` and `brew install pkg-config`.You can skip the entire next section about Poetry and jump right to [Using Cashu](#using-cashu).## Hard install: PoetryThese steps help you install Python via pyenv and Poetry. If you already have Poetry running on your computer, you can skip this step and jump right to [Install Cashu](#poetry-install-cashu).#### Poetry: Prerequisites```bash# on ubuntu:sudo apt install -y build-essential pkg-config libffi-dev libpq-dev zlib1g-dev libssl-dev python3-dev libsqlite3-dev ncurses-dev libbz2-dev libreadline-dev lzma-dev# install python using pyenvcurl https://pyenv.run | bash# !! follow the instructions of pyenv init to setup pyenv !!pyenv init# restart your shell (or source your .rc file), then install python:pyenv install 3.9.13# install poetrycurl -sSL https://install.python-poetry.org | python3 -echo export PATH=\&quot;$HOME/.local/bin:$PATH\&quot; &gt;&gt; ~/.bashrcsource ~/.bashrc```#### Poetry: Install Cashu```bash# install cashugit clone https://github.com/callebtc/cashu.git --recurse-submodulescd cashupyenv local 3.9.13poetry install```#### Poetry: Update CashuTo update Cashu to the newest version enter```bashgit pull &amp;&amp; poetry install```#### Poetry: Using CashuCashu should be now installed. To execute the following commands, activate your virtual Poetry environment via```bashpoetry shell```If you don't activate your environment, just prepend `poetry run` to all following commands.## Configuration```bashmv .env.example .env# edit .env filevim .env```To use the wallet with the [public test mint](#test-instance), you need to change the appropriate entries in the `.env` file. #### Test instance*Warning: this instance is just for demonstration only. The server could vanish at any moment so consider any Satoshis you deposit a donation.*Change the appropriate `.env` file settings to```bashMINT_URL=https://8333.space:3338```# Using Cashu```bashcashu info```Returns:```bashVersion: 0.12.3Debug: FalseCashu dir: /home/user/.cashuWallet: walletMint URL: https://8333.space:3338```#### Check balance```bashcashu balance```#### Generate a Lightning invoice This command will return a Lightning invoice that you need to pay to mint new ecash tokens.```bashcashu invoice 420```The client will check every few seconds if the invoice has been paid. If you abort this step but still pay the invoice, you can use the command `cashu invoice &lt;amount&gt; --hash &lt;hash&gt;`.#### Pay a Lightning invoice```bashcashu pay lnbc120n1p3jfmdapp5r9jz...```#### Send tokensTo send tokens to another user, enter```bashcashu send 69```You should see the encoded token. Copy the token and send it to another user such as via email or a messenger. The token looks like this:```basheyJwcm9vZnMiOiBbey...```You can now see that your available balance has dropped by the amount that you reserved for sending if you enter `cashu balance`:```bashBalance: 420 sat```#### Receive tokensTo receive tokens, another user enters:```bashcashu receive eyJwcm9vZnMiOiBbey...```You should see the balance increase:```bashBalance: 0 satBalance: 69 sat```# Starting the wallet API daemonNutshell wallet can be used in daemon mode that can be controlled through a REST API:```bashcashu -d```You can find the API docs at [http://localhost:4448/docs](http://localhost:4448/docs).# Running a mintThis command runs the mint on your local computer. Skip this step if you want to use the [public test mint](#test-instance) instead.```bashpython -m cashu.mint```You can turn off Lightning support and mint as many tokens as you like by setting `LIGHTNING=FALSE` in the `.env` file.# Running testsTo run the tests in this repository, first install the dev dependencies with ```bashpoetry install --with dev```Then, make sure to set up your `.env` file to use your local mint and disable Lightning and Tor:```bashLIGHTNING=FALSETOR=FALSE```You can run the tests with```bashpoetry run pytest tests```</longdescription>
</pkgmetadata>