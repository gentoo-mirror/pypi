<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Django Property FilterDjango-property-filter is an extension to [django-filter](https://pypi.org/projhttps://pypi.org/project/django-filter/ect/django-filter/) and provides functionality to filter querysets by class properties.It does so by providing sub-classes for Filters and Filtersets to keep existing django-filter functionality.&lt;table&gt;    &lt;tr&gt;        &lt;td&gt;License&lt;/td&gt;        &lt;td&gt;&lt;img src='https://img.shields.io/pypi/l/django-property-filter.svg'&gt;&lt;/td&gt;        &lt;td&gt;Version&lt;/td&gt;        &lt;td&gt;&lt;img src='https://img.shields.io/pypi/v/django-property-filter.svg'&gt;&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;Github Action&lt;/td&gt;        &lt;td&gt;&lt;img src='https://github.com/ericziethen/django-property-filter/workflows/CI/badge.svg'&gt;&lt;/td&gt;        &lt;td&gt;Coverage&lt;/td&gt;        &lt;td&gt;&lt;img src='https://codecov.io/gh/ericziethen/django-property-filter/branch/master/graph/badge.svg'&gt;&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;Wheel&lt;/td&gt;        &lt;td&gt;&lt;img src='https://img.shields.io/pypi/wheel/django-property-filter.svg'&gt;&lt;/td&gt;        &lt;td&gt;Implementation&lt;/td&gt;        &lt;td&gt;&lt;img src='https://img.shields.io/pypi/implementation/django-property-filter.svg'&gt;&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;Status&lt;/td&gt;        &lt;td&gt;&lt;img src='https://img.shields.io/pypi/status/django-property-filter.svg'&gt;&lt;/td&gt;        &lt;td&gt;Downloads&lt;/td&gt;        &lt;td&gt;&lt;img src='https://img.shields.io/pypi/dm/django-property-filter.svg'&gt;&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;Supported versions&lt;/td&gt;        &lt;td&gt;&lt;img src='https://img.shields.io/pypi/pyversions/django-property-filter.svg'&gt;&lt;/td&gt;    &lt;/tr&gt;&lt;/table&gt;For more details and examples check the [documentation](https://django-property-filter.readthedocs.io/en/stable/).## Requirements* Python: 3.7, 3.8, 3.9, 3.10, 3.11* Django: 3.2, 4.0, 4.1* Django-filter: 2.3+## Limitations### PerformanceBecause this app preserved Django Filtersets and filters them agains fields that are not Database fields all filtering happens in memory.Compared with direct sql optimized queries that might be slower and more memory intensive.### Limit on returned resultsIn theory there is no limit for most databases how many results can be returned from a filter query unless the database implements a limit which will impact how many results django-property-filter can return.Sqlite3 defines different limits depending on the version used.For further details see the documentation for [limitations](https://django-property-filter.readthedocs.io/en/stable/guide/overview.html#limitations)## InstallationInstall using pip:```pythonpip install django-property-filter```Then add 'django_property_filter' to your INSTALLED_APPS.```pythonINSTALLED_APPS = [    ...    'django_property_filter',]```## Usage### Example ModelOur Model```pythonfrom django.db import modelsclass BookSeries(models.Model):    name = models.CharField(max_length=255)    @property    def book_count(self):      return Book.objects.filter(series=self).count()class Book(models.Model):    title = models.CharField(max_length=255)    price = models.DecimalField()    discount_percentage = models.IntegerField()    author = models.TextField()    series = models.ForeignKey(BookSeries)    @property    def discounted_price(self):      return self.price * self.discount_percentage \ 100```### Implicit Filter CreationIf we want to filter by discounted price as well as number of books in a series,which both are properties and not fields in the database, we would do thefollowing.::```pythonfrom django_property_filter import PropertyFilterSet, PropertyNumberFilterclass BookFilterSet(PropertyFilterSet):  class Meta:      model = Book      exclude = ['price']      property_fields = [        ('discounted_price', PropertyNumberFilter, ['lt', 'exact']),        ('series.book_count.', PropertyNumberFilter, ['gt', 'exact']),      ]```This will create 4 Filters    1.) A &quot;less than&quot; and an &quot;exact&quot; filter for the &quot;discounted_price&quot; property        of the Book Model    2.) A &quot;greater than&quot; and an &quot;exact&quot; filter for the &quot;book_count&quot; property        of the related Model &quot;series&quot;.The order in which the property filters are applied are in the same order asthey are defined. In the above filter will be in order of    1.) discounted_price: lt    2.) discounted_price: exact    3.) series.book_count: gt    4.) series.book_count: exactThis can be usefull to speed up the filtering by property filters if filtersare defined first that are likely to filter a large number of values.E.g. a boolean field might be filtering an average of half the values, while afield representing a name will likely filter fewer.Since PropertyFilterSet is and extension to django-filter's Filterset whichrequires either the Meta attribute &quot;fields&quot; or &quot;exclude&quot; to be set we excludedthe &quot;price&quot; field. If we had instead used::    fields = ['price']It would also have created an &quot;exact&quot; filter for the book price.The only difference to using a normal FilterSet from django-filter is the&quot;property_fields&quot; field.The &quot;property_fields&quot; is a list of tuples with 3 values.    1.) The property name.         If the property is on a related Model it should be separated by &quot;__&quot;,        and can span multiple levels e.g. fk__fk__fk__property    2.) The specific Property Filter to use.        This is necessary since it can't be determined what the return type        of the property will be in all cases    3.) The list of lookup expressions.### Explicit Filter CreationIt is also possible to create Filters explicitely.```pythonfrom django_property_filter import PropertyNumberFilter, PropertyFilterSetclass BookFilterSet(PropertyFilterSet):    prop_number_gte = PropertyNumberFilter(field_name='discounted_price', lookup_expr='gte')    prop_number_lt = PropertyNumberFilter(field_name='discounted_price', lookup_expr='lt')    class Meta:        model = NumberClass        fields = ['prop_number_gte', 'prop_number_lt']```This creates a &quot;greater than or equel&quot; and a &quot;less than&quot; filter for thediscounted_price property.The order in which the property filters are applied are in the same order asthey are defined. In the above filter will be in order of    1.) prop_number_gte    2.) prop_number_ltThis can be usefull to speed up the filtering by property filters if filtersare defined first that are likely to filter a large number of values.E.g. a boolean field might be filtering an average of half the values, while afield representing a name will likely filter fewer.## Development# Run the Django Test Project to see the filters in action* go to &quot;tests\django_test_proj&quot;* run &quot;python manage.py makemigrations&quot;* run &quot;python manage.py migrate&quot;* run &quot;python manage.py setup_data&quot;* run &quot;python manage.py runserver&quot;## Issue Raising ##Raising bugs, feature requests and questions is possible via the public repository &lt;a href=&quot;https://github.com/ericziethen/django-property-filter-issue-reporting&quot; target=&quot;_blank&quot;&gt;django-property-filter-issue-reporting&lt;/a&gt;</longdescription>
</pkgmetadata>