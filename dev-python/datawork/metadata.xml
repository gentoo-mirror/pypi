<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>Datawork==========Este módulo es una implementación específica de *Tasktools.Scheduler* paraprocesar los datos recibidos desde estaciones GNSS y almacenados en una database*Retrhinkdb*.El propósito de *Datawork* es realizar el trabajo pesado con la informaciónnueva que se ha recibido. En primer caso será obtener las diferencias deposición según *ECEF*. Luego será direccionar la información calculada adiversos canales:- geojson- earlybird- status## InstalaciónPara instalar *Datawork* será necesario tener instalado *Python v3.7* osuperior. Crear un ambiente virtual.```bashpip install datawork```O bien, clonando del repositorio e instalando:```bashgit clone https://gitlab.com/pineiden/datawork.gitcd dataworkpython setup.py install```## ¿Cómo opera?Al iniciar recupera la lista de estaciones y su metadata mediante una conexíónsocket al *Collector*.El TaskAssignator toma la lista y activa las tareas que están a la espera en el*Scheduler*, al activarse comienza a operar un loop con tres elementosprincipales:- Objecto rethinkdb para fuente- Objeto rethinkdb para destino ENU- Procesador de informaciónTambién, de forma paralela, permanecen en operación:- Entrega a distintas colas RabbitMQ de la información procesada- Cliente socket conectado a Collector- Servidor socket a la escucha de conexiones.En operación el sistema rescata desde el momento anterior hasta el presente lalista de nuevos elementos en la tabla correspondiente a la estación. Si seobtiene una lista no vacía se procede a transformar y envíar a los diferentes destinos.## Comando 'Datawork'Se dispone de un comando *Datawork* para activar el proceso, para casosparticulares revisar la ayuda.```bashdatawork --help```## ¿Qué poner como parámetros de ambiente virtual?```bash#!/bin/bash                                                                                   # This hook is sourced after this virtualenv is activated.                                                                                                                                                      export COLLECTOR_DBUSER='dbuser'export COLLECTOR_DBPASS='epdasdasd'export COLLECTOR_DBNAME='dbname'export COLLECTOR_DBHOST='localhost'export COLLECTOR_PORT=2345# SETTINGS Collector LOCAL                                                                                                                                                                                      export COLLECTOR_EST_X_PROC=3export COLLECTOR_TSLEEP=1export COLLECTOR_WORKERS=6export GSOF_TIMEOUT=8export CLL_STATUS=&quot;ALL&quot;export CLL_GROUP='[&quot;QSCO&quot;]'#Datawork                                                                                                         export DATAWORK_EST_X_PROC=8export DATAWORK_TSLEEP=2export DATAWORK_WORKERS=12export GSOF_TIMEOUT=2export DW_STATUS=&quot;ALL&quot; # OPTIONS: &quot;GROUP&quot; &quot;ALL&quot;                                                                                                                                                                 export DW_GROUP='[&quot;QSCO&quot;]'export DW_DIR=&quot;/home/datawork/datawork_system/datawork/datawork&quot;export GUI_WORKERS=10export GUI_STATIONS_BY_WORKER=12export SELECT_GROUP=4alias dbus_coords=&quot;dbus-monitor type=signal interface=\&quot;csn.coord.interface\&quot;&quot;#export COLLECTOR_SOCKET_IP=&quot;10.54.217.15&quot;                                                                                                                                                                      export COLLECTOR_SOCKET_IP='atlas.csn.uchile.cl'export COLLECTOR_SOCKET_PORT=6677#export RDB_SOURCE='atlas.csn.uchile.cl'                                                                                                                                                                        export RDB_SOURCE='atlas.csn.uchile.cl'export RDB_ENU='10.54.218.66'#export DATAWORK_SOCKET_IP=&quot;10.54.218.66&quot;                                                                                                                                                                       export DATAWORK_SOCKET_IP=&quot;localhost&quot;export DATAWORK_SOCKET_PORT=6666export MQ_HOST=&quot;10.54.217.95&quot;# Es la dirección ip on url del host dónde se ubica el servicio                                                                                                                                                 #export MQ_NAME=&quot;enugeojson_prod&quot;                                                                                                                                                                               # Es el nombre de usuario que accede a la cola                                                                                                                                                                  #export MQ_PASS=&quot;pwd&quot;                                                                                                                                                                                  # Es el la password asociada                                                                                                                                                                                    #export MQ_VHOST=&quot;gpsdata&quot;                                                                                                                                                                                      # Es el nombre del host virtual de la cola                                                                                                                                                                      #export MQ_CODE=&quot;geo_enu_data&quot;                                                                                                                                                                                  # Es el nombre en código de la cola                                                                                                                                                                             #export MQ_QUEUE_NAME=&quot;gpsstream&quot;                                                                                                                                                                              echo &quot;Loading Rabbit MQ data&quot;export MQ_HOST=&quot;10.54.217.95&quot;# Es la dirección ip on url del host dónde se ubica el servicio                                                                                                                                                 export MQ_NAME=&quot;enugeojson_prod&quot;# Es el nombre de usuario que accede a la cola                                                                                                                                                                  export MQ_PASS=&quot;pwd&quot;# Es el la password asociada                                                                                                                                                                                    export MQ_VHOST=&quot;gpsdata&quot;# Es el nombre del host virtual de la cola                                                                                                                                                                      export MQ_CODE=&quot;geo_enu&quot;export MQ_QUEUE_NAME=&quot;gpss&quot;```</longdescription>
</pkgmetadata>