<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Satip&lt;!-- ALL-CONTRIBUTORS-BADGE:START - Do not remove or modify this section --&gt;[![All Contributors](https://img.shields.io/badge/all_contributors-6-orange.svg?style=flat-square)](#contributors-)&lt;!-- ALL-CONTRIBUTORS-BADGE:END --&gt;[![PyPI version](https://badge.fury.io/py/satip.svg)](https://badge.fury.io/py/satip)[![codecov](https://codecov.io/gh/openclimatefix/Satip/branch/main/graph/badge.svg?token=GTQDR2ZZ2S)](https://codecov.io/gh/openclimatefix/Satip)&gt; Satip is a library for &lt;b&gt;sat&lt;/b&gt;ellite &lt;b&gt;i&lt;/b&gt;mage &lt;b&gt;p&lt;/b&gt;rocessing, and provides all of the functionality necessary for retrieving, and storing EUMETSAT data&lt;br&gt;### InstallationTo install the `satip` library please run:```bashpip install satip```Or if you're working in the development environment you can run the following from the directory root:```bashpip install -e .```#### CondaOr, if you want to use `conda` from the a cloned Satip repository:```bashconda env create -f environment.ymlconda activate satippip install -e .```If you plan to work on the development of Satip then also consider installing these development tools:```bashconda install pytest flake8 jedi mypy black pre-commitpre-commit install```## Operation### Getting your own API keyIn order to contribute to development or just test-run some scripts, you will need your own Eumetsat-API-key. Please follow these steps:1. Go to https://eoportal.eumetsat.int and register an account.2. You can log in and got to https://data.eumetsat.int/ to check available data services. From there go to your profile and choose the option &quot;API key&quot; or go to https://api.eumetsat.int/api-key/ directly.3. Please make sure that you added the key and secret to your user's environment variables.### Downloading EUMETSAT DataThe following command will download the last 2 hours of RSS imagery into NetCDF files at the specified location```bashpython satip/app.py --api-key=&lt;EUMETSAT API Key&gt; --api-secret=&lt;EUMETSAT API Secret&gt; --save-dr=&quot;/path/to/saving/files/&quot; --history=&quot;2 hours&quot;```To download more historical data, the command below will download the native files, compress with bz2, and save into a subdirectory.```bashpython satip/get_raw_eumetsat_data.py --user-key=&lt;EUMETSAT API Key&gt; --user-secret=&lt;EUMETSAT API Secret&gt;```### Converting Native files to Zarr`scripts/convert_native_to_zarr.py` converts EUMETSAT `.nat` files to Zarr datasets, using very mild lossy [JPEG-XL](https://en.wikipedia.org/wiki/JPEG_XL) compression. (JPEG-XL is the &quot;new kid on the block&quot; of image compression algorithms). JPEG-XL makes the files about a quarter the size of the equivalent `bz2` compressed files, whilst the images are visually indistinguishable. JPEG-XL cannot represent NaNs so NaNs. JPEG-XL understands float32 values in the range `[0, 1]`. NaNs are encoded as the value `0.025`. All &quot;real&quot; values are in the range `[0.075, 1]`. We leave a gap between &quot;NaNs&quot; and &quot;real values&quot; because there is very slight &quot;ringing&quot; around areas of constant value (see [this comment for more details](https://github.com/openclimatefix/Satip/issues/67#issuecomment-1036456502)). Use `satip.jpeg_xl_float_with_nans.JpegXlFloatWithNaNs` to decode the satellite data. This class will reconstruct the NaNs and rescale the data to the range `[0, 1]`.## Running in ProductionThe live service uses `app.py` as the entrypoint for running the live data download for OCF's forecasting service, and has a few configuration options, configurable by command line argument or environment variable.`--api-key` or `API_KEY` is the EUMETSAT API key`--api-secret` or `API_SECRET` is the EUMETSAT API secret`--save-dir` or `SAVE_DIR` is the top level directory to save the output files, a `latest` subfolder will be added to that directory to contain the latest data`--history` or `HISTORY` is the amount of history timesteps to use in the `latest.zarr` files`--db-url` or `DB_URL` is the URL to the database to save to when a run has finished`--use-rescaler` or `USE_RESCALER` tells whether to rescale the satellite data to between 0 and 1 or not when saving to disk. Primarily used as backwards compatibility for the current production models, all new training and production Zarrs should use the rescaled data.## TestingTo run tests, simply run ```pytest .``` from the root of the repository. To generate the test plots, run ```python scripts/generate_test_plots.py```.## Contributors âœ¨Thanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):&lt;!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section --&gt;&lt;!-- prettier-ignore-start --&gt;&lt;!-- markdownlint-disable --&gt;&lt;table&gt;  &lt;tr&gt;    &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;https://www.jacobbieker.com&quot;&gt;&lt;img src=&quot;https://avatars.githubusercontent.com/u/7170359?v=4?s=100&quot; width=&quot;100px;&quot; alt=&quot;&quot;/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Jacob Bieker&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;https://github.com/openclimatefix/Satip/commits?author=jacobbieker&quot; title=&quot;Code&quot;&gt;ðŸ’»&lt;/a&gt;&lt;/td&gt;    &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;http://jack-kelly.com&quot;&gt;&lt;img src=&quot;https://avatars.githubusercontent.com/u/460756?v=4?s=100&quot; width=&quot;100px;&quot; alt=&quot;&quot;/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Jack Kelly&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;https://github.com/openclimatefix/Satip/commits?author=JackKelly&quot; title=&quot;Code&quot;&gt;ðŸ’»&lt;/a&gt;&lt;/td&gt;    &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;https://github.com/AyrtonB&quot;&gt;&lt;img src=&quot;https://avatars.githubusercontent.com/u/29051639?v=4?s=100&quot; width=&quot;100px;&quot; alt=&quot;&quot;/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Ayrton Bourn&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;https://github.com/openclimatefix/Satip/commits?author=AyrtonB&quot; title=&quot;Code&quot;&gt;ðŸ’»&lt;/a&gt;&lt;/td&gt;    &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;http://laurencewatson.com&quot;&gt;&lt;img src=&quot;https://avatars.githubusercontent.com/u/1125376?v=4?s=100&quot; width=&quot;100px;&quot; alt=&quot;&quot;/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Laurence Watson&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;https://github.com/openclimatefix/Satip/commits?author=Rabscuttler&quot; title=&quot;Code&quot;&gt;ðŸ’»&lt;/a&gt;&lt;/td&gt;    &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;https://github.com/notger&quot;&gt;&lt;img src=&quot;https://avatars.githubusercontent.com/u/1180540?v=4?s=100&quot; width=&quot;100px;&quot; alt=&quot;&quot;/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Notger Heinz&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;https://github.com/openclimatefix/Satip/commits?author=notger&quot; title=&quot;Documentation&quot;&gt;ðŸ“–&lt;/a&gt;&lt;/td&gt;    &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;https://github.com/peterdudfield&quot;&gt;&lt;img src=&quot;https://avatars.githubusercontent.com/u/34686298?v=4?s=100&quot; width=&quot;100px;&quot; alt=&quot;&quot;/&gt;&lt;br /&gt;&lt;sub&gt;&lt;b&gt;Peter Dudfield&lt;/b&gt;&lt;/sub&gt;&lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;https://github.com/openclimatefix/Satip/commits?author=peterdudfield&quot; title=&quot;Documentation&quot;&gt;ðŸ“–&lt;/a&gt;&lt;/td&gt;  &lt;/tr&gt;&lt;/table&gt;&lt;!-- markdownlint-restore --&gt;&lt;!-- prettier-ignore-end --&gt;&lt;!-- ALL-CONTRIBUTORS-LIST:END --&gt;This project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification. Contributions of any kind welcome!</longdescription>
</pkgmetadata>