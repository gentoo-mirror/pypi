<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>[![PyPI version](https://badge.fury.io/py/vban-cmd.svg)](https://badge.fury.io/py/vban-cmd)[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://github.com/onyx-and-iris/vban-cmd-python/blob/dev/LICENSE)[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)[![Imports: isort](https://img.shields.io/badge/%20imports-isort-%231674b1?style=flat&amp;labelColor=ef8336)](https://pycqa.github.io/isort/)![Tests Status](./tests/basic.svg?dummy=8484744)![Tests Status](./tests/banana.svg?dummy=8484744)![Tests Status](./tests/potato.svg?dummy=8484744)# VBAN CMDThis python interface allows you to get and set Voicemeeter parameter values over a network.It may be used standalone or to extend the [Voicemeeter Remote Python API](https://github.com/onyx-and-iris/voicemeeter-api-python)There is no support for audio transfer in this package, only parameters.For an outline of past/future changes refer to: [CHANGELOG](CHANGELOG.md)## Tested against-   Basic 1.0.8.4-   Banana 2.0.6.4-   Potato 3.0.2.4## Requirements-   [Voicemeeter](https://voicemeeter.com/)-   Python 3.10 or greater## Installation`pip install vban-cmd`## `Use`#### ConnectionLoad VBAN connection info from toml config. A valid `vban.toml` might look like this:```toml[connection]ip = &quot;gamepc.local&quot;port = 6980streamname = &quot;Command1&quot;```It should be placed next to your `__main__.py` file.Alternatively you may pass `ip`, `port`, `streamname` as keyword arguments.#### `__main__.py`Simplest use case, use a context manager to request a VbanCmd class of a kind.Login and logout are handled for you in this scenario.```pythonimport vban_cmdclass ManyThings:    def __init__(self, vban):        self.vban = vban    def things(self):        self.vban.strip[0].label = &quot;podmic&quot;        self.vban.strip[0].mute = True        print(            f&quot;strip 0 ({self.vban.strip[0].label}) mute has been set to {self.vban.strip[0].mute}&quot;        )    def other_things(self):        self.vban.bus[3].gain = -6.3        self.vban.bus[4].eq = True        info = (            f&quot;bus 3 gain has been set to {self.vban.bus[3].gain}&quot;,            f&quot;bus 4 eq has been set to {self.vban.bus[4].eq}&quot;,        )        print(&quot;\n&quot;.join(info))def main():    with vban_cmd.api(kind_id, ip=&quot;gamepc.local&quot;, port=6980, streamname=&quot;Command1&quot;) as vban:        do = ManyThings(vban)        do.things()        do.other_things()        # set many parameters at once        vban.apply(            {                &quot;strip-2&quot;: {&quot;A1&quot;: True, &quot;B1&quot;: True, &quot;gain&quot;: -6.0},                &quot;bus-2&quot;: {&quot;mute&quot;: True},            }        )if __name__ == &quot;__main__&quot;:    kind_id = &quot;banana&quot;    main()```Otherwise you must remember to call `vban.login()`, `vban.logout()` at the start/end of your code.## `kind_id`Pass the kind of Voicemeeter as an argument. kind_id may be:-   `basic`-   `banana`-   `potato`## `Available commands`### StripThe following properties are available.-   `mono`: boolean-   `solo`: boolean-   `mute`: boolean-   `label`: string-   `gain`: float, -60 to 12-   `A1 - A5`, `B1 - B3`: boolean-   `comp`: float, from 0.0 to 10.0-   `gate`: float, from 0.0 to 10.0-   `limit`: int, from -40 to 12example:```pythonvban.strip[3].gain = 3.7print(vban.strip[0].label)```The following methods are available.-   `appgain(name, value)`: string, float, from 0.0 to 1.0Set the gain in db by value for the app matching name.-   `appmute(name, value)`: string, boolSet mute state as value for the app matching name.example:```pythonvban.strip[5].appmute(&quot;Spotify&quot;, True)vban.strip[5].appgain(&quot;Spotify&quot;, 0.5)```##### Gainlayers-   `gain`: float, from -60.0 to 12.0example:```pythonvban.strip[3].gainlayer[3].gain = 3.7```Gainlayers are defined for potato version only.##### LevelsThe following properties are available.-   `prefader`example:```pythonprint(vban.strip[3].levels.prefader)```Level properties will return -200.0 if no audio detected.### BusThe following properties are available.-   `mono`: boolean-   `eq`: boolean-   `eq_ab`: boolean-   `mute`: boolean-   `label`: string-   `gain`: float, -60 to 12example:```pythonvban.bus[4].eq = trueprint(vban.bus[0].label)```##### ModesThe following properties are available.-   `normal`: boolean-   `amix`: boolean-   `bmix`: boolean-   `composite`: boolean-   `tvmix`: boolean-   `upmix21`: boolean-   `upmix41`: boolean-   `upmix61`: boolean-   `centeronly`: boolean-   `lfeonly`: boolean-   `rearonly`: booleanThe following methods are available.-   `get()`: Returns the current bus modeexample:```pythonvban.bus[4].mode.amix = Trueprint(vban.bus[2].mode.get())```##### LevelsThe following properties are available.-   `all`example:```pythonprint(vban.bus[0].levels.all)````levels.all` will return -200.0 if no audio detected.### Strip | BusThe following methods are available.-   `fadeto(amount, time)`: float, int-   `fadeby(amount, time)`: float, intModify gain to or by the selected amount in db over a time interval in ms.example:```pythonvban.strip[0].fadeto(-10.3, 1000)vban.bus[3].fadeby(-5.6, 500)```### CommandCertain 'special' commands are defined by the API as performing actions rather than setting values. The following methods are available:-   `show()` : Bring Voiceemeter GUI to the front-   `shutdown()` : Shuts down the GUI-   `restart()` : Restart the audio engine-   `reset()`: Applies the `reset` config. (phys strip B1, virt strip A1, gains, comp, gate 0.0, mute, mono, solo, eq false)The following properties are write only and accept boolean values.-   `showvbanchat`: boolean-   `lock`: booleanexample:```pythonvban.command.restart()vban.command.showvbanchat = true```### Multiple parameters-   `apply`    Set many strip/bus parameters at once, for example:```pythonvban.apply(    {        &quot;strip-2&quot;: {&quot;A1&quot;: True, &quot;B1&quot;: True, &quot;gain&quot;: -6.0},        &quot;bus-2&quot;: {&quot;mute&quot;: True},    })```Or for each class you may do:```pythonvban.strip[0].apply(mute: true, gain: 3.2, A1: true)vban.vban.outstream[0].apply(on: true, name: 'streamname', bit: 24)```## Config Files`vban.apply_config(&lt;configname&gt;)`You may load config files in TOML format.Three example configs have been included with the package. Remember to savecurrent settings before loading a user config. To set one you may do:```pythonimport vban_cmdwith vban_cmd.api('banana') as vban:    vban.apply_config('example')```will load a config file at configs/banana/example.toml for Voicemeeter Banana.## EventsLevel updates are considered high volume, by default they are NOT listened for. Use `subs` keyword arg to initialize event updates.example:```pythonimport vban_cmd# Listen for level updatesopts = {    &quot;ip&quot;: &quot;&lt;ip address&gt;&quot;,    &quot;streamname&quot;: &quot;Command1&quot;,    &quot;port&quot;: 6980,    &quot;subs&quot;: {&quot;ldirty&quot;: True},}with vban_cmd.api('banana', **opts) as vban:    ...```#### `vban.subject`Use the Subject class to register an app as event observer.The following methods are available:-   `add`: registers an app as an event observer-   `remove`: deregisters an app as an event observerexample:```python# register an app to receive updatesclass App():    def __init__(self, vban):        vban.subject.add(self)        ...```#### `vban.event`Use the event class to toggle updates as necessary.The following properties are available:-   `pdirty`: boolean-   `ldirty`: booleanexample:```pythonvban.event.ldirty = Truevban.event.pdirty = False```Or add, remove a list of events.The following methods are available:-   `add()`-   `remove()`-   `get()`example:```pythonvban.event.remove([&quot;pdirty&quot;, &quot;ldirty&quot;])# get a list of currently subscribedprint(vban.event.get())```## VbanCmd class`vban_cmd.api(kind_id: str, **opts: dict)`You may pass the following optional keyword arguments:-   `ip`: str, ip or hostname of remote machine-   `streamname`: str, name of the stream to connect to.-   `port`: int=6980, vban udp port of remote machine.-   `subs`: dict={&quot;pdirty&quot;: True, &quot;ldirty&quot;: False}, controls which updates to listen for.    -   `pdirty`: parameter updates    -   `ldirty`: level updates#### `vban.pdirty`True iff a parameter has been changed.#### `vban.ldirty`True iff a level value has been changed.#### `vban.sendtext(script)`Sends a script block as a string request, for example:```pythonvban.sendtext(&quot;Strip[0].Mute=1;Bus[0].Mono=1&quot;)```#### `vban.public_packet`Returns a Voicemeeter rt data packet object. Designed to be used internally by the interface but available for parsing through this read only property object. States not guaranteed to be current (requires use of dirty parameters to confirm).### `Errors`-   `errors.VBANCMDError`: Base VMCMD error class.### `Tests`First make sure you installed the [development dependencies](https://github.com/onyx-and-iris/vban-cmd-python#installation)Then from tests directory:`pytest -v`## Resources-   [Voicemeeter VBAN TEXT](https://vb-audio.com/Voicemeeter/VBANProtocol_Specifications.pdf#page=19)-   [Voicemeeter RT Packet Service](https://vb-audio.com/Voicemeeter/VBANProtocol_Specifications.pdf#page=27)</longdescription>
</pkgmetadata>