<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>![Build](https://github.com/Clinical-Genomics/fluffy/workflows/Build/badge.svg)[![codecov](https://codecov.io/gh/Clinical-Genomics/fluffy/branch/master/graph/badge.svg)](https://codecov.io/gh/Clinical-Genomics/fluffy)# FluFFyPipeNIPT analysis pipeline, using WisecondorX for detecting aneuplodies and large CNVs, AMYCNE for FFY and PREFACE for FF prediction (optional). FluFFYPipe produces a variety of output files, as well as a per batch csv summary.&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://github.com/J35P312/FluFFyPipe/blob/master/logo/IMG_20200320_132001.jpg&quot; width=&quot;400&quot; height=&quot;400&quot; &gt;&lt;/p&gt;# Run FluFFyPipeRun NIPT analysis, using a previously comnputed reference:    fluffy --sample &lt;samplesheet&gt;  --project &lt;input_folder&gt; --out &lt;output_folder&gt; --analyseRun NIPT analysis, using an internally computed reference (i.e the reference is built using all samples listed in samplesheet):    fluffy --sample &lt;samplesheet&gt;  --project &lt;input_folder&gt; --out &lt;output_folder&gt; --analyse --batch-refoptionally, skip preface:    fluffy --sample &lt;samplesheet&gt;  --project &lt;input_folder&gt; --out &lt;output_folder&gt; --skip_preface --analyseAll output will be written to the output folder, this output includes:```bam fileswisecondorX outputtiddit coverage summaryFetal fraction estimation```as well as a summary csv and multiqc html (per batch)the input folder is a project folder containing one folder per sample, each of these subfolders contain the fastq file(s).The samplesheet contains at least a &quot;sampleID&quot; column, the sampleID should match the subfolders in the input folder. The samplesheet may contain other columns, such as flowcell and index folder: such columns will be printed to the summary csv.If the samplesheet contains a SampleName column, fluffy will name the output according to SampleNameCreate a WisecondorX reference    fluffy --sample &lt;samplesheet&gt;  --project &lt;input_folder&gt; --out &lt;output_folder&gt; --referencesamplesheet should contain atleast a &quot;sampleID&quot; column. All samples in the samplesheet will be used to construct the reference, visit the WisecondorX manual for more information.# Optional fluffy parameters:Analysis mode:--dry_run - run the pipeline without generating files-l-add paramters to the slurm header of the script, should be given on the following format parameter:valueexample: qos:high Reference mode:--dry_run - run the pipeline without generating filesRerun mode:--dry_run - run the pipeline without generating files# Troubleshooting and rerunThere are three statuses of the fluffy pipeline:running, complete, and failedThe status of a fluffy run is found in the&lt;output_folder&gt;/analysis_status.jsonThe status of all jobs are listed in&lt;output_folder&gt;/sacct/fluffy_&lt;date&gt;.log.statusWhere &lt;date&gt; is the timepoint when the jobs were submittedUse grep to find the failed jobs:grep -v COMPLETE &lt;output_folder&gt;/sacct/fluffy_&lt;date&gt;.log.statusThe output logs are stored in: &lt;output_folder&gt;/logsBefore continuing, you may want to generate the summary csv for all completed cases:bash &lt;output_folder&gt;/scripts/summarizebatch-&lt;hash&gt;where &lt;hash&gt; is a randomly generated string.use the rerun module to rerun failed fluffy analyses:fluffy --sample &lt;samplesheet&gt;  --project &lt;input_folder&gt; --out &lt;output_folder&gt; --skip_preface rerun# Install FluFFyPipeFluFFyPipe requires python 3, slurm, slurmpy, and singularity, python-coloredlogs.fluffy may be installed using pip:pip install fluffy-cgalternatively, fluffy is cloned and installed from github:git clone https://github.com/Clinical-Genomics/fluffycd fluffypip install -e .Next download the FluFFyPipe singularity container     singularity pull library://jeisfeldt/default/fluffy:sha256.dbef92cd5eab8558c2729f73a191d73a7576a24e9bb44dde7372c0cd405c4ef6 copy the example config (found in example_config), and edit the variables.You will need to download/create the following files:Reference fasta (indexed using bwa)WisecondorX reference files (created using the reference mode)PREFACE model file (optional)blacklist bed file (used by wisecondorX)FluFFyPipe singularity collection (singularity pull --name FluFFyPipe.sif shub://J35P312/FluFFyPipe)</longdescription>
</pkgmetadata>