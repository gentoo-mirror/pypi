<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># css_inline[&lt;img alt=&quot;build status&quot; src=&quot;https://img.shields.io/github/actions/workflow/status/Stranger6667/css-inline/build.yml?style=flat-square&amp;labelColor=555555&amp;logo=github&quot; height=&quot;20&quot;&gt;](https://github.com/Stranger6667/css-inline)[&lt;img alt=&quot;pypi&quot; src=&quot;https://img.shields.io/pypi/v/css_inline.svg?style=flat-square&quot; height=&quot;20&quot;&gt;](https://pypi.org/project/css_inline/)[&lt;img alt=&quot;versions&quot; src=&quot;https://img.shields.io/pypi/pyversions/css_inline.svg?style=flat-square&quot; height=&quot;20&quot;&gt;](https://pypi.org/project/css_inline/)[&lt;img alt=&quot;license&quot; src=&quot;https://img.shields.io/pypi/l/css_inline.svg?style=flat-square&quot; height=&quot;20&quot;&gt;](https://opensource.org/licenses/MIT)[&lt;img alt=&quot;codecov.io&quot; src=&quot;https://img.shields.io/codecov/c/gh/Stranger6667/css-inline?logo=codecov&amp;style=flat-square&amp;token=tOzvV4kDY0&quot; height=&quot;20&quot;&gt;](https://app.codecov.io/github/Stranger6667/css-inline)[&lt;img alt=&quot;gitter&quot; src=&quot;https://img.shields.io/gitter/room/Stranger6667/css-inline?style=flat-square&quot; height=&quot;20&quot;&gt;](https://gitter.im/Stranger6667/css-inline)`css-inline` inlines CSS into HTML documents, using components from Mozilla's Servo project.This process is essential for sending HTML emails as you need to use &quot;style&quot; attributes instead of &quot;style&quot; tags.For instance, the library transforms HTML like this:```html&lt;html&gt;    &lt;head&gt;        &lt;title&gt;Test&lt;/title&gt;        &lt;style&gt;h1 { color:blue; }&lt;/style&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;h1&gt;Big Text&lt;/h1&gt;    &lt;/body&gt;&lt;/html&gt;```into:```html&lt;html&gt;    &lt;head&gt;        &lt;title&gt;Test&lt;/title&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;h1 style=&quot;color:blue;&quot;&gt;Big Text&lt;/h1&gt;    &lt;/body&gt;&lt;/html&gt;```- Uses reliable components from Mozilla's Servo- 10-300x faster than alternatives- Inlines CSS from `style` and `link` tags- Removes `style` and `link` tags- Resolves external stylesheets (including local files)- Can process multiple documents in parallel- Works on Linux, Windows, and macOS- Supports HTML5 &amp; CSS3## InstallationInstall with `pip`:```pip install css_inline```Pre-compiled wheels for most popular platforms are provided. If your platform is not supported, you will needa Rust compiler to build this package from source. The minimum supported Rust version is 1.60.## Usage```pythonimport css_inlineHTML = &quot;&quot;&quot;&lt;html&gt;&lt;head&gt;    &lt;title&gt;Test&lt;/title&gt;    &lt;style&gt;h1 { color:blue; }&lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;Big Text&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;inlined = css_inline.inline(HTML)# HTML becomes this:## &lt;html&gt;# &lt;head&gt;#    &lt;title&gt;Test&lt;/title&gt;#    &lt;style&gt;h1 { color:blue; }&lt;/style&gt;# &lt;/head&gt;# &lt;body&gt;#     &lt;h1 style=&quot;color:blue;&quot;&gt;Big Text&lt;/h1&gt;# &lt;/body&gt;# &lt;/html&gt;```If you want to inline many HTML documents, you can utilize `inline_many` that processes the input in parallel.```pythonimport css_inlinecss_inline.inline_many([&quot;&lt;...&gt;&quot;, &quot;&lt;...&gt;&quot;])````inline_many` will spawn threads on the Rust level; thus, you can expect it's running faster than `css_inline.inline` via Python's `multiprocessing` or `threading` modules.### ConfigurationFor configuration options use the `CSSInliner` class:```pythonimport css_inlineinliner = css_inline.CSSInliner(keep_style_tags=True)inliner.inline(&quot;...&quot;)```- `keep_style_tags`. Specifies whether to keep &quot;style&quot; tags after inlining. Default: `False`- `keep_link_tags`. Specifies whether to keep &quot;link&quot; tags after inlining. Default: `False`- `base_url`. The base URL used to resolve relative URLs. If you'd like to load stylesheets from your filesystem, use the `file://` scheme. Default: `None`- `load_remote_stylesheets`. Specifies whether remote stylesheets should be loaded. Default: `True`- `extra_css`. Extra CSS to be inlined. Default: `None`- `preallocate_node_capacity`. **Advanced**. Preallocates capacity for HTML nodes during parsing. This can improve performance when you have an estimate of the number of nodes in your HTML document. Default: `32`You can also skip CSS inlining for an HTML tag by adding the `data-css-inline=&quot;ignore&quot;` attribute to it:```html&lt;head&gt;    &lt;title&gt;Test&lt;/title&gt;    &lt;style&gt;h1 { color:blue; }&lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;!-- The tag below won't receive additional styles --&gt;    &lt;h1 data-css-inline=&quot;ignore&quot;&gt;Big Text&lt;/h1&gt;&lt;/body&gt;```The `data-css-inline=&quot;ignore&quot;` attribute also allows you to skip `link` and `style` tags:```html&lt;head&gt;    &lt;title&gt;Test&lt;/title&gt;    &lt;!-- Styles below are ignored --&gt;    &lt;style data-css-inline=&quot;ignore&quot;&gt;h1 { color:blue; }&lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;Big Text&lt;/h1&gt;&lt;/body&gt;```If you'd like to load stylesheets from your filesystem, use the `file://` scheme:```pythonimport css_inline# styles/email is relative to the current directoryinliner = css_inline.CSSInliner(base_url=&quot;file://styles/email/&quot;)inliner.inline(&quot;...&quot;)```## Standards support &amp; restrictions`css-inline` is built on top of [html5ever](https://crates.io/crates/html5ever) and [cssparser](https://crates.io/crates/cssparser) and relies on their behavior for HTML &amp; CSS parsing.- Only HTML 5 is supported, not XHTML.- Only CSS 3 is supported.- Only UTF-8 encoding for string representation. Other document encodings are not yet supported.If you'd like to work around some XHTML compatibility issues like closing empty tags (`&lt;hr&gt;` vs. `&lt;hr/&gt;`), you can use the following snippet that involves `lxml`:```pythonimport css_inlinefrom lxml import html, etreedocument = &quot;...&quot;  # Your HTML documentinlined = css_inline.inline(document)tree = html.fromstring(inlined)inlined = etree.tostring(tree).decode(encoding=&quot;utf-8&quot;)```## PerformanceDue to the usage of efficient tooling from Mozilla's Servo project (`html5ever`, `rust-cssparser` and others) thislibrary has excellent performance characteristics. In comparison with other Python projects, it is usually &gt;10x faster than the nearest alternative.For inlining CSS in the html document from the `Usage` section above there is the following breakdown in the benchmarks:- `css_inline 0.9.0` - 9.72 us- `premailer 3.10.0` - 207.95 us (**x21.39**)- `toronado 0.1.0` - 1.03 ms (**x106.86**)- `inlinestyler 0.2.5` - 1.69 ms (**x174.64**)- `pynliner 0.8.0` - 2.05 ms (**x211.89**)Realistic email 1:- `css_inline 0.9.0` - 262.33 us- `premailer 3.10.0` - 2.11 ms (**x8.08**)- `toronado 0.1.0` - 25.51 ms (**x97.28**)- `inlinestyler 0.2.5` - 4313 ms (**x164.43**)- `pynliner 0.8.0` - 72.55 ms (**x276.57**)Realistic email 2:- `css_inline 0.9.0` - 151.83 us- `premailer 3.10.0` - 4.12 ms (**x27.18**)- `toronado 0.1.0` - `Error: Pseudo-elements are not supported`- `inlinestyler 0.2.5` - 28.85 ms (**x190.03**)- `pynliner 0.8.0` - `Error: No match was found`You can take a look at the benchmarks' code at `benches/bench.py` file.The results above were measured with stable `rustc 1.70.0` on `Python 3.11.0`.## Comparison with other librariesBesides performance, `css-inline` differs from other Python libraries for CSS inlining.- Generally supports more CSS features than other libraries (for example, `toronado` and `pynliner` do not support pseudo-elements);- It has fewer configuration options and not as flexible as `premailer`;- Works on fewer platforms than LXML-based libraries (`premailer`, `inlinestyler`, `toronado`, and optionally `pynliner`);- Does not have debug logs yet;- Supports only HTML 5.## Python support`css_inline` supports CPython 3.7, 3.8, 3.9, 3.10, 3.11 and PyPy 3.7, 3.8, 3.9.## Extra materialsIf you want to know how this library was created &amp; how it works internally, you could take a look at these articles:- [Rust crate](https://dygalo.dev/blog/rust-for-a-pythonista-2/)- [Python bindings](https://dygalo.dev/blog/rust-for-a-pythonista-3/)## LicenseThis project is licensed under the terms of the [MIT license](https://opensource.org/licenses/MIT).</longdescription>
</pkgmetadata>