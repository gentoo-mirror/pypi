<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># SpeckerThe JSON Configuration Validator- [Specker](#specker)  - [About](#about)    - [How does it work?](#how-does-it-work)  - [Usage](#usage)    - [Spec Files](#spec-files)    - [Validation](#validation)  - [Examples](#examples)    - [Example Data](#example-data)      - [Example Spec: `myfile.json.spec`](#example-spec-myfilejsonspec)      - [Example Spec: `myfile.json_time.spec`](#example-spec-myfilejson_timespec)      - [Example Spec: `myfile.json_env.spec`](#example-spec-myfilejson_envspec)      - [Example Spec: `myfile.json_env.deep.spec`](#example-spec-myfilejson_envdeepspec)    - [Example - Validation without Chaining](#example---validation-without-chaining)    - [Example - Validation with Chaining](#example---validation-with-chaining)    - [Example - Deep Chain Validation](#example---deep-chain-validation)  - [Utils](#utils)## AboutSpecker is a way to validate a configuration (Dictonary, or JSON) against a defined set of rules, while also providing defaults. Additionally, because the configuration is now documented as one of the Spec files, documentation for the specific configuration can be generated from the Spec file!### How does it work?Specker uses a dictionary block for each specified parameter in order to validate that it is the correct type, and that it exists, if required. If it is not a required value, a default can also be set. Spec files contain a defined group or configuration file, for example, if we wanted to validate `myconfig.json`, we would create a Spec called `myconfig.json.spec`. This Spec would be loaded, and then the contents of `myconfig.json` would be compared against it.## Usage### Spec FilesSee `SPECFILES.md` for information on the required values for each entry in a Spec. Spec files must be saved as a `.spec` file. For speed, specs should be kept in their own directory, so no other files need to be searched through.Spec Files are made up of many blocks of Spec rules which define what a configuration block must look like. Specker is even capable of self-specing itself! You can see the Spec file for all other Spec files by examining the `specs/specker.spec` file.### ValidationUsing Specker is easy! Once you've made your Spec file(s), you only need to load Specker, and your configuration, then compare the two!`SpeckerLoader.compare()` will return a boolean pass/fail. Failure will occur if any of the spec validation fails. Validation messages are logged in via `logging.*`. This includes having values that are not in the spec file.```### Load Your Configurationimport jsontry:    with open(&quot;myfile.json&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:        config_content = json.loads(f.read())except BaseException as e:    print(f&quot;Failed to load myfile, {e}&quot;)    exit(1)### Load and Use Specker# Import the Specker Loaderfrom specker.loader import SpeckerLoader# Initialize the Loader, and point it to your Spec directoryspec_loader = SpecLoader(&quot;../specs/&quot;) # Load all .spec files from this directory```Specker by default will only validate the dictionary you pass, and no further dictionaries or lists within it. By adding `spec_chain`s, Specker can traverse deeper into the tree.The Example below describes a 'root' level spec, as well as a 'sub' level spec, and how to validate a configuration against them.## Examples### Example Data#### Example Spec: `myfile.json.spec````{    &quot;name&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: &quot;&quot;,        &quot;type&quot;: &quot;str&quot;,        &quot;comment&quot;: &quot;Job Name (Identifier)&quot;,        &quot;example&quot;: &quot;myexample&quot;    },    &quot;time&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: {},        &quot;type&quot;: &quot;dict&quot;,        &quot;comment&quot;: &quot;Time Configuration&quot;    },    &quot;environment&quot;: {        &quot;required&quot;: false,        &quot;default&quot;: {},        &quot;type&quot;: &quot;dict&quot;,        &quot;comment&quot;: &quot;Environment Variables to use during Command execution&quot;    },    &quot;visibility&quot;: {        &quot;required&quot;: false,        &quot;default&quot;: &quot;hidden&quot;,        &quot;type&quot;: &quot;str&quot;,        &quot;values&quot;: [ &quot;hidden&quot;, &quot;visible&quot;, &quot;admin&quot;, &quot;deleted&quot; ],        &quot;comment&quot;: &quot;Visbility of Command Information&quot;    }}```#### Example Spec: `myfile.json_time.spec````{    &quot;minute&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: &quot;&quot;,        &quot;type&quot;: &quot;str&quot;,        &quot;comment&quot;: &quot;Minute(s) to Run at&quot;,        &quot;example&quot;: &quot;*/5&quot;    },    &quot;hour&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: &quot;&quot;,        &quot;type&quot;: &quot;str&quot;,        &quot;comment&quot;: &quot;Hour(s) to Run at&quot;,        &quot;example&quot;: &quot;*/2&quot;    },    &quot;day-of-month&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: &quot;&quot;,        &quot;type&quot;: &quot;str&quot;,        &quot;comment&quot;: &quot;Day(s) of Month to Run at&quot;,        &quot;example&quot;: &quot;*&quot;    },    &quot;month&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: &quot;&quot;,        &quot;type&quot;: &quot;str&quot;,        &quot;comment&quot;: &quot;Month(s) to Run at&quot;,        &quot;example&quot;: &quot;*&quot;    },    &quot;day-of-week&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: &quot;&quot;,        &quot;type&quot;: &quot;str&quot;,        &quot;comment&quot;: &quot;Day(s) of Week to Run at&quot;,        &quot;example&quot;: &quot;1&quot;    }}```#### Example Spec: `myfile.json_env.spec````{    &quot;my_special_var&quot;: {        &quot;type&quot;: &quot;str&quot;,        &quot;required&quot;: true,        &quot;default&quot;: &quot;&quot;,        &quot;comment&quot;: &quot;My Special Variable&quot;,        &quot;example&quot;: &quot;a_cool_thing&quot;    },    &quot;my_deep_validation&quot;: {        &quot;type&quot;: &quot;dict&quot;,        &quot;required&quot;: true,        &quot;default&quot;: {},        &quot;comment&quot;: &quot;A Deeper dictionary&quot;,        &quot;spec_chain&quot;: &quot;myfile.json_env.deep&quot;    }}```#### Example Spec: `myfile.json_env.deep.spec````{    &quot;my_other_var&quot;: {        &quot;type&quot;: &quot;str&quot;,        &quot;required&quot;: true,        &quot;default&quot;: &quot;not_set&quot;,        &quot;comment&quot;: &quot;Some other deep level variable&quot;,        &quot;values&quot;: [ &quot;a&quot;, &quot;b&quot;, &quot;foo&quot;, &quot;bar&quot;, &quot;not_set&quot; ]    }}```### Example - Validation without ChainingNow that we have our Specs, we can compare them against our configuration data.```# Initialize the Loader, and point it to your Spec directoryspec_loader = SpecLoader(&quot;../specs/&quot;) # Load all .spec files from this directory# Load `myfile.json.spec` and compare `config_content` against it.spec_result = spec_loader.compare(&quot;myfile.json&quot;,config_content)if not spec_result:    exit(1)# Because we are not chaining specs together, the `time` dictionary must be validated separatelyspec_result = spec_loader.compare(&quot;myfile.json_time&quot;,config_content[&quot;time&quot;])if not spec_result:    exit(1)exit(0)```### Example - Validation with ChainingBefore we compare our specs, we will make one modification to `myspec.json.spec`. Within the `time` definition, we will add `&quot;spec_chain&quot;: &quot;myspec.json_time&quot;`.```{    &quot;name&quot;: {        ...    },    &quot;time&quot;: {        &quot;required&quot;: true,        &quot;default&quot;: {},        &quot;type&quot;: &quot;dict&quot;,        &quot;comment&quot;: &quot;Time Configuration&quot;,        &quot;spec_chain&quot;: &quot;myspec.json_time&quot;    },    &quot;environment&quot;: {        ...    },    ....}```Now that we have our Specs, we can compare them against our configuration file:```# Initialize the Loader, and point it to your Spec directoryspec_loader = SpecLoader(&quot;../specs/&quot;) # Load all .spec files from this directory# Load `myfile.json.spec` and compare `config_content` against it.spec_result = spec_loader.compare(&quot;myfile.json&quot;,config_content)if not spec_result:    exit(1)exit(0)```### Example - Deep Chain ValidationIf we additionally change the `environment` definition in `myspec.json.spec` to add `&quot;spec_chain&quot;: &quot;myspec.json_env&quot;`, we can show deeper chained validation.In this case, `myspec.json.spec` will be the starting point. Upon reaching the `environment` definition, it will utilize the `myspec.json_env.spec` spec to validate the `environment` dictionary. Upon reaching the `my_deep_validation` definition, it will utilize the `myspec_json_env.deep.spec` spec to validate the `my_deep_validation` dictionary.No code is shown, as this case would be exactly the same code as the [validation with chaining example](#example---validation-with-chaining)## UtilsTo aid in documentation, Specker comes with `generate-spec-docs.py`, a script to generate a .md file from a directory of Spec files. (See `SPECFILES.md`, this is a generated document).You can additionally validate a Spec file using `validate-spec-file.py`, to ensure that your Spec file is built properly.</longdescription>
</pkgmetadata>