<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>Wordpress API - Python Client===============================.. image:: https://travis-ci.org/derwentx/wp-api-python.svg?branch=master    :target: https://travis-ci.org/derwentx/wp-api-python    .. image:: https://api.codeclimate.com/v1/badges/4df627621037b2df7e5d/maintainability   :target: https://codeclimate.com/github/derwentx/wp-api-python/maintainability   :alt: Maintainability    .. image:: https://api.codeclimate.com/v1/badges/4df627621037b2df7e5d/test_coverage   :target: https://codeclimate.com/github/derwentx/wp-api-python/test_coverage   :alt: Test Coverage.. image:: https://snyk.io/test/github/derwentx/wp-api-python/badge.svg?targetFile=requirements.txt    :target: https://snyk.io/test/github/derwentx/wp-api-python?targetFile=requirements.txtA Python wrapper for the Wordpress and WooCommerce REST APIs with oAuth1a 3leg support.Supports the Wordpress REST API v1-2, WooCommerce REST API v1-3 and WooCommerce WP-API v1-2 (with automatic OAuth3a handling).Forked from the excellent WooCommerce API written by Claudio Sanches and modified to work with Wordpress: https://github.com/woocommerce/wc-api-pythonI created this fork because I prefer the way that the wc-api-python client interfaces withthe Wordpress API compared to the existing python client, https://pypi.python.org/pypi/wordpress_jsonwhich does not support OAuth authentication, only Basic Authentication (very unsecure)Any comments about how you're using the API and suggestions about how this repository could be improved are welcome :).You can find my contact info in my GitHub profile.Roadmap-------- [x] Create initial fork- [x] Implement 3-legged OAuth on Wordpress client- [x] Better local storage of OAuth credentials to stop unnecessary API keys being generated- [x] Support image upload to WC Api- [ ] Better handling of timeouts with a back-off- [ ] Implement iterator for convenient access to API itemsRequirements------------Wordpress version 4.7+ comes pre-installed with REST API v2, so you don't need to have the WP REST API plugin if you have the latest Wordpress.You should have the following plugins installed on your wordpress site:- **WP REST API** (only required for WP &lt; v4.7, recommended version: 2.0+)- **WP REST API - OAuth 1.0a Server** (optional, if you want oauth within the wordpress API. https://github.com/WP-API/OAuth1)- **WP REST API - Meta Endpoints** (optional)- **WooCommerce** (optional, if you want to use the WooCommerce API)The following python packages are also used by the package- **requests**- **beautifulsoup**Installation------------Install with pip.. code-block:: bash    pip install wordpress-apiDownload this repo and use setuptools to install the package.. code-block:: bash    pip install setuptools    git clone https://github.com/derwentx/wp-api-python    python setup.py installTesting-------Some of the tests make API calls to a dockerized woocommerce container. Don'tworry! It's really simple to set up. You just need to install docker and run.. code-block:: bash    docker-compose up -d    # this just waits until the docker container is set up and exits    docker exec -it wpapipython_woocommerce_1 bash -c 'until [ -f .done ]; do sleep 1; done; echo &quot;complete&quot;'Then you can test with:.. code-block:: bash    pip install -r requirements-test.txt    python setup.py testPublishing----------Note to self because I keep forgetting how to use Twine &gt;_&lt;.. code-block:: bash    python setup.py sdist bdist_wheel    # Check that you've updated changelog    twine upload dist/wordpress-api-$(python setup.py --version) -r pypitest    twine upload dist/wordpress-api-$(python setup.py --version) -r pypiGetting started---------------Generate API credentials (Consumer Key &amp; Consumer Secret) following these instructions: http://v2.wp-api.org/guide/authentication/Simply go to Users -&gt; Applications and create an Application, e.g. &quot;REST API&quot;.Enter a callback URL that you will be able to remember later such as &quot;http://example.com/oauth1_callback&quot; (not really important for this client).Store the resulting Key and Secret somewhere safe.Check out the Wordpress API endpoints and data that can be manipulated in http://v2.wp-api.org/reference/.Setup-----Wordpress API with Basic authentication:----(Note: requires Basic Authentication plugin).. code-block:: python    from wordpress import API    wpapi = API(        url=&quot;http://example.com&quot;,        api=&quot;wp-json&quot;,        version='wp/v2',        wp_user=&quot;XXXX&quot;,        wp_pass=&quot;XXXX&quot;,        basic_auth = True,        user_auth = True,    )WP REST API v2:----(Note: the username and password are required so that it can fill out the oauth request token form automatically for you.Requires OAuth 1.0a plugin. ).. code-block:: python    #...    wpapi = API(        url=&quot;http://example.com&quot;,        consumer_key=&quot;XXXXXXXXXXXX&quot;,        consumer_secret=&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;,        api=&quot;wp-json&quot;,        version=&quot;wp/v2&quot;,        wp_user=&quot;XXXX&quot;,        wp_pass=&quot;XXXX&quot;,        oauth1a_3leg=True,        creds_store=&quot;~/.wc-api-creds.json&quot;    )Legacy WooCommerce API v3:----.. code-block:: python    #...    wcapi = API(        url=&quot;http://example.com&quot;,        consumer_key=&quot;ck_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;,        consumer_secret=&quot;cs_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;,        api=&quot;wc-api&quot;,        version=&quot;v3&quot;    )New WC REST API:----Note: oauth1a 3legged works with Wordpress but not with WooCommerce. However oauth1a signing still works.If you try to do oauth1a_3leg with WooCommerce it just says &quot;consumer_key not valid&quot;, even if it is valid... code-block:: python    #...    wcapi = API(        url=&quot;http://example.com&quot;,        consumer_key=&quot;ck_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;,        consumer_secret=&quot;cs_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;,        api=&quot;wp-json&quot;,        version=&quot;wc/v2&quot;,        callback='http://127.0.0.1/oauth1_callback'    )Options~~~~~~~+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+|         Option        |     Type    | Required |                                              Description                                                         |+=======================+=============+==========+==================================================================================================================+| ``url``               | ``string``  | yes      | Your Store URL, example: http://wp.dev/                                                                          |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``consumerKey``       | ``string``  | yes      | Your API consumer key                                                                                            |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``consumerSecret``    | ``string``  | yes      | Your API consumer secret                                                                                         |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``api``               | ``string``  | no       | Determines which api to use, defaults to ``wp-json``, can be arbitrary: ``wc-api``, ``oembed``                   |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``version``           | ``string``  | no       | API version, default is ``wp/v2``, can be ``v3`` or  ``wc/v1`` if using ``wc-api``                               |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``timeout``           | ``integer`` | no       | Connection timeout, default is ``5``                                                                             |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``verify_ssl``        | ``bool``    | no       | Verify SSL when connect, use this option as ``False`` when need to test with self-signed certificates            |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``basic_auth``        | ``bool``    | no       | Force Basic Authentication, can be through query string or headers (default)                                     |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``query_string_auth`` | ``bool``    | no       | Use query string for Basic Authentication when ``True`` and using HTTPS, default is ``False`` which uses header  |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``oauth1a_3leg``      | ``string``  | no       | use oauth1a 3-legged authentication                                                                              |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+| ``creds_store``       | ``string``  | no       | JSON file where oauth verifier is stored (only used with OAuth_3Leg)                                             |+-----------------------+-------------+----------+------------------------------------------------------------------------------------------------------------------+Methods-------+--------------+----------------+------------------------------------------------------------------+|    Params    |      Type      |                           Description                            |+==============+================+==================================================================+| ``endpoint`` | ``string``     | API endpoint, example: ``posts`` or ``user/12``                  |+--------------+----------------+------------------------------------------------------------------+| ``data``     | ``dictionary`` | Data that will be converted to JSON                              |+--------------+----------------+------------------------------------------------------------------+GET~~~- ``.get(endpoint)``POST~~~~- ``.post(endpoint, data)``PUT~~~- ``.put(endpoint, data)``DELETE~~~~~~- ``.delete(endpoint)``OPTIONS~~~~~~~- ``.options(endpoint)``Upload an image-----(Note: this only works on WP API with basic auth).. code-block:: python    assert os.path.exists(img_path), &quot;img should exist&quot;    data = open(img_path, 'rb').read()    filename = os.path.basename(img_path)    _, extension = os.path.splitext(filename)    headers = {        'cache-control': 'no-cache',        'content-disposition': 'attachment; filename=%s' % filename,        'content-type': 'image/%s' % extension    }    endpoint = &quot;/media&quot;    return wpapi.post(endpoint, data, headers=headers)Response--------All methods will return `Response &lt;http://docs.python-requests.org/en/latest/api/#requests.Response&gt;`_ object.Example of returned data:.. code-block:: bash    &gt;&gt;&gt; from wordpress import api as wpapi    &gt;&gt;&gt; r = wpapi.get(&quot;posts&quot;)    &gt;&gt;&gt; r.status_code    200    &gt;&gt;&gt; r.headers['content-type']    'application/json; charset=UTF-8'    &gt;&gt;&gt; r.encoding    'UTF-8'    &gt;&gt;&gt; r.text    u'{&quot;posts&quot;:[{&quot;title&quot;:&quot;Flying Ninja&quot;,&quot;id&quot;:70,...' // Json text    &gt;&gt;&gt; r.json()    {u'posts': [{u'sold_individually': False,... // Dictionary dataA note on DELETE requests.=====The extra keyword arguments passed to the function of a `__request` call (such as `.delete()`) to a `wordpress.API` object are used to modify a `Requests.request` call, this is to allow you to specify custom parameters to modify how the request is made such as `headers`. At the moment it only passes the `headers` parameter to requests, but if I see a use case for it, I can forward more of the parameters to `Requests`.The `delete` function doesn’t accept a data object because a HTTP DELETE request does not typically have a payload, and some implementations of a HTTP server would reject a DELETE request that has a payload.You can still pass api request parameters in the query string of the URL. I would suggest using a library like `urlparse` / `urllib.parse` to modify the query string if you are automatically deleting users.According the the [documentation](https://developer.wordpress.org/rest-api/reference/users/#delete-a-user) for deleting a user, you need to pass the `force` and `reassign` parameters to the API, which can be done by appending them to the endpoint URL... code-block:: python    &gt;&gt;&gt; response = wpapi.delete(‘/users/&lt;Id&gt;?reassign=&lt;other_id&gt;&amp;force=true’)    &gt;&gt;&gt; response.json()    {“deleted”:true, ... }A Note on Encoding====In Python2, make sure to only `POST` unicode string objects or strings thathave been correctly encoded as utf-8. Serializing objects containing non-utf8byte strings in Python2 is broken by importing `unicode_literals` from`__future__` because of a bug in `json.dumps`. You may be able to get aroundthis problem by serializing the data yourself.Changelog---------1.2.8 - 2018/10/13~~~~~~~~~~~~~~~~~~- Much better python3 support- really good tests- added NoAuth option for adding custom headers (like JWT)1.2.7 - 2018/06/18~~~~~~~~~~~~~~~~~~- Don't crash on &quot;-1&quot; response from API.- Fix windows encoding error1.2.6 - 2018/01/29~~~~~~~~~~~~~~~~~~- Better Python3 support- Tested on Python v3.6.2 and v2.7.131.2.5 - 2017/12/07~~~~~~~~~~~~~~~~~~- Better UTF-8 support1.2.4 - 2017/10/01~~~~~~~~~~~~~~~~~~- Support for image upload- More accurate documentation of WP authentication methods1.2.3 - 2017/09/07~~~~~~~~~~~~~~~~~~- Better local storage of OAuth creds to stop unnecessary API keys being generated- Improve parsing of API errors to display much more useful error information1.2.2 - 2017/06/16~~~~~~~~~~~~~~~~~~- support basic auth without https- rename oauth module to auth (since auth covers oauth and basic auth)- tested with latest versions of WP and WC1.2.1 - 2016/12/13~~~~~~~~~~~~~~~~~~- tested to handle complex queries like filter[limit]- fix: Some edge cases where queries were out of order causing signature mismatch- hardened helper and api classes and added corresponding test cases1.2.0 - 2016/09/28~~~~~~~~~~~~~~~~~~- Initial fork- Implemented 3-legged OAuth- Tested with pagination</longdescription>
</pkgmetadata>