<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>&lt;a href=&quot;https://explosion.ai&quot;&gt;&lt;img src=&quot;https://explosion.ai/assets/img/logo.svg&quot; width=&quot;125&quot; height=&quot;125&quot; align=&quot;right&quot; /&gt;&lt;/a&gt;# sense2vec: Contextually-keyed word vectorssense2vec ([Trask et. al](https://arxiv.org/abs/1511.06388), 2015) is a nicetwist on [word2vec](https://en.wikipedia.org/wiki/Word2vec) that lets you learnmore interesting and detailed word vectors. This library is a simple Pythonimplementation for loading, querying and training sense2vec models. For moredetails, check out[our blog post](https://explosion.ai/blog/sense2vec-reloaded). To explore thesemantic similarities across all Reddit comments of 2015 and 2019, see the[interactive demo](https://demos.explosion.ai/sense2vec).ü¶Ü **Version 2.0 (for spaCy v3) out now!**[Read the release notes here.](https://github.com/explosion/sense2vec/releases/)[![Azure Pipelines](https://img.shields.io/azure-devops/build/explosion-ai/public/12/master.svg?logo=azure-pipelines&amp;style=flat-square&amp;label=build)](https://dev.azure.com/explosion-ai/public/_build?definitionId=12)[![Current Release Version](https://img.shields.io/github/v/release/explosion/sense2vec.svg?style=flat-square&amp;logo=github)](https://github.com/explosion/sense2vec/releases)[![pypi Version](https://img.shields.io/pypi/v/sense2vec.svg?style=flat-square&amp;logo=pypi&amp;logoColor=white)](https://pypi.org/project/sense2vec/)[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg?style=flat-square)](https://github.com/ambv/black)## ‚ú® Features![](https://user-images.githubusercontent.com/13643239/69330759-d3981600-0c53-11ea-8f64-e5c075f7ea10.jpg)- Query **vectors for multi-word phrases** based on part-of-speech tags and  entity labels.- spaCy **pipeline component** and **extension attributes**.- Fully **serializable** so you can easily ship your sense2vec vectors with your  spaCy model packages.- Optional **caching of nearest neighbors** for super fast &quot;most similar&quot;  queries.- **Train your own vectors** using a pretrained spaCy model, raw text and  [GloVe](https://github.com/stanfordnlp/GloVe) or Word2Vec via  [fastText](https://github.com/facebookresearch/fastText)  ([details](#-training-your-own-sense2vec-vectors)).- [Prodigy](https://prodi.gy) **annotation recipes** for evaluating models,  creating lists of similar multi-word phrases and converting them to match  patterns, e.g. for rule-based NER or to bootstrap NER annotation  ([details &amp; examples](#-prodigy-recipes)).## üöÄ Quickstart### Standalone usage```pythonfrom sense2vec import Sense2Vecs2v = Sense2Vec().from_disk(&quot;/path/to/s2v_reddit_2015_md&quot;)query = &quot;natural_language_processing|NOUN&quot;assert query in s2vvector = s2v[query]freq = s2v.get_freq(query)most_similar = s2v.most_similar(query, n=3)# [('machine_learning|NOUN', 0.8986967),#  ('computer_vision|NOUN', 0.8636297),#  ('deep_learning|NOUN', 0.8573361)]```### Usage as a spaCy pipeline component&gt; ‚ö†Ô∏è Note that this example describes usage with [spaCy v3](https://spacy.io/usage/v3). For usage with spaCy v2, download `sense2vec==1.0.3` and check out the [`v1.x`](https://github.com/explosion/sense2vec/tree/v1.x) branch of this repo.```pythonimport spacynlp = spacy.load(&quot;en_core_web_sm&quot;)s2v = nlp.add_pipe(&quot;sense2vec&quot;)s2v.from_disk(&quot;/path/to/s2v_reddit_2015_md&quot;)doc = nlp(&quot;A sentence about natural language processing.&quot;)assert doc[3:6].text == &quot;natural language processing&quot;freq = doc[3:6]._.s2v_freqvector = doc[3:6]._.s2v_vecmost_similar = doc[3:6]._.s2v_most_similar(3)# [(('machine learning', 'NOUN'), 0.8986967),#  (('computer vision', 'NOUN'), 0.8636297),#  (('deep learning', 'NOUN'), 0.8573361)]```### Interactive demos&lt;img width=&quot;34%&quot; src=&quot;https://user-images.githubusercontent.com/13643239/68093565-1bb6ea80-fe97-11e9-8192-e293acc290fe.png&quot; align=&quot;right&quot; /&gt;To try out our pretrained vectors trained on Reddit comments, check out the[interactive sense2vec demo](https://explosion.ai/demos/sense2vec).This repo also includes a [Streamlit](https://streamlit.io) demo script forexploring vectors and the most similar phrases. After installing `streamlit`,you can run the script with `streamlit run` and **one or more paths topretrained vectors** as **positional arguments** on the command line. Forexample:```bashpip install streamlitstreamlit run https://raw.githubusercontent.com/explosion/sense2vec/master/scripts/streamlit_sense2vec.py /path/to/vectors```### Pretrained vectorsTo use the vectors, download the archive(s) and pass the extracted directory to`Sense2Vec.from_disk` or `Sense2VecComponent.from_disk`. The vector files are**attached to the GitHub release**. Large files have been split into multi-partdownloads.| Vectors              |   Size | Description                  | üì• Download (zipped)                                                                                                                                                                                                                                                                                                      || -------------------- | -----: | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- || `s2v_reddit_2019_lg` |   4 GB | Reddit comments 2019 (01-07) | [part 1](https://github.com/explosion/sense2vec/releases/download/v1.0.0/s2v_reddit_2019_lg.tar.gz.001), [part 2](https://github.com/explosion/sense2vec/releases/download/v1.0.0/s2v_reddit_2019_lg.tar.gz.002), [part 3](https://github.com/explosion/sense2vec/releases/download/v1.0.0/s2v_reddit_2019_lg.tar.gz.003) || `s2v_reddit_2015_md` | 573 MB | Reddit comments 2015         | [part 1](https://github.com/explosion/sense2vec/releases/download/v1.0.0/s2v_reddit_2015_md.tar.gz)                                                                                                                                                                                                                       |To merge the multi-part archives, you can run the following:```bashcat s2v_reddit_2019_lg.tar.gz.* &gt; s2v_reddit_2019_lg.tar.gz```## ‚è≥ Installation &amp; Setupsense2vec releases are available on pip:```bashpip install sense2vec```To use pretrained vectors, download[one of the vector packages](#pretrained-vectors), unpack the `.tar.gz` archiveand point `from_disk` to the extracted data directory:```pythonfrom sense2vec import Sense2Vecs2v = Sense2Vec().from_disk(&quot;/path/to/s2v_reddit_2015_md&quot;)```## üë©üíª Usage### Usage with spaCy v3The easiest way to use the library and vectors is to plug it into your spaCypipeline. The `sense2vec` package exposes a `Sense2VecComponent`, which can beinitialised with the shared vocab and added to your spaCy pipeline as a[custom pipeline component](https://spacy.io/usage/processing-pipelines#custom-components).By default, components are added to the _end of the pipeline_, which is therecommended position for this component, since it needs access to the dependencyparse and, if available, named entities.```pythonimport spacyfrom sense2vec import Sense2VecComponentnlp = spacy.load(&quot;en_core_web_sm&quot;)s2v = nlp.add_pipe(&quot;sense2vec&quot;)s2v.from_disk(&quot;/path/to/s2v_reddit_2015_md&quot;)```The component will add several[extension attributes and methods](https://spacy.io/usage/processing-pipelines#custom-components-attributes)to spaCy's `Token` and `Span` objects that let you retrieve vectors andfrequencies, as well as most similar terms.```pythondoc = nlp(&quot;A sentence about natural language processing.&quot;)assert doc[3:6].text == &quot;natural language processing&quot;freq = doc[3:6]._.s2v_freqvector = doc[3:6]._.s2v_vecmost_similar = doc[3:6]._.s2v_most_similar(3)```For entities, the entity labels are used as the &quot;sense&quot; (instead of the token'spart-of-speech tag):```pythondoc = nlp(&quot;A sentence about Facebook and Google.&quot;)for ent in doc.ents:    assert ent._.in_s2v    most_similar = ent._.s2v_most_similar(3)```#### Available attributesThe following extension attributes are exposed on the `Doc` object via the `._`property:| Name          | Attribute Type | Type | Description                                                                         || ------------- | -------------- | ---- | ----------------------------------------------------------------------------------- || `s2v_phrases` | property       | list | All sense2vec-compatible phrases in the given `Doc` (noun phrases, named entities). |The following attributes are available via the `._` property of `Token` and`Span` objects ‚Äì for example `token._.in_s2v`:| Name               | Attribute Type | Return Type        | Description                                                                        || ------------------ | -------------- | ------------------ | ---------------------------------------------------------------------------------- || `in_s2v`           | property       | bool               | Whether a key exists in the vector map.                                            || `s2v_key`          | property       | unicode            | The sense2vec key of the given object, e.g. `&quot;duck|NOUN&quot;`.                         || `s2v_vec`          | property       | `ndarray[float32]` | The vector of the given key.                                                       || `s2v_freq`         | property       | int                | The frequency of the given key.                                                    || `s2v_other_senses` | property       | list               | Available other senses, e.g. `&quot;duck|VERB&quot;` for `&quot;duck|NOUN&quot;`.                      || `s2v_most_similar` | method         | list               | Get the `n` most similar terms. Returns a list of `((word, sense), score)` tuples. || `s2v_similarity`   | method         | float              | Get the similarity to another `Token` or `Span`.                                   |&gt; ‚ö†Ô∏è **A note on span attributes:** Under the hood, entities in `doc.ents` are&gt; `Span` objects. This is why the pipeline component also adds attributes and&gt; methods to spans and not just tokens. However, it's not recommended to use the&gt; sense2vec attributes on arbitrary slices of the document, since the model&gt; likely won't have a key for the respective text. `Span` objects also don't&gt; have a part-of-speech tag, so if no entity label is present, the &quot;sense&quot;&gt; defaults to the root's part-of-speech tag.#### Adding sense2vec to a trained pipelineIf you're training and packaging a spaCy pipeline and want to include a sense2vec component in it, you can load in the data via the [`[initialize]` block](https://spacy.io/usage/training#config-lifecycle) of the training config:```ini[initialize.components][initialize.components.sense2vec]data_path = &quot;/path/to/s2v_reddit_2015_md&quot;```### Standalone usageYou can also use the underlying `Sense2Vec` class directly and load in thevectors using the `from_disk` method. See below for the available API methods.```pythonfrom sense2vec import Sense2Vecs2v = Sense2Vec().from_disk(&quot;/path/to/reddit_vectors-1.1.0&quot;)most_similar = s2v.most_similar(&quot;natural_language_processing|NOUN&quot;, n=10)```&gt; ‚ö†Ô∏è **Important note:** To look up entries in the vectors table, the keys need&gt; to follow the scheme of `phrase_text|SENSE` (note the `_` instead of spaces&gt; and the `|` before the tag or label) ‚Äì for example, `machine_learning|NOUN`.&gt; Also note that the underlying vector table is case-sensitive.## üéõ API### &lt;kbd&gt;class&lt;/kbd&gt; `Sense2Vec`The standalone `Sense2Vec` object that holds the vectors, strings andfrequencies.#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.__init__`Initialize the `Sense2Vec` object.| Argument       | Type                        | Description                                                                                                            || -------------- | --------------------------- | ---------------------------------------------------------------------------------------------------------------------- || `shape`        | tuple                       | The vector shape. Defaults to `(1000, 128)`.                                                                           || `strings`      | `spacy.strings.StringStore` | Optional string store. Will be created if it doesn't exist.                                                            || `senses`       | list                        | Optional list of all available senses. Used in methods that generate the best sense or other senses.                   || `vectors_name` | unicode                     | Optional name to assign to the `Vectors` table, to prevent clashes. Defaults to `&quot;sense2vec&quot;`.                         || `overrides`    | dict                        | Optional custom functions to use, mapped to names registered via the registry, e.g. `{&quot;make_key&quot;: &quot;custom_make_key&quot;}`. || **RETURNS**    | `Sense2Vec`                 | The newly constructed object.                                                                                          |```pythons2v = Sense2Vec(shape=(300, 128), senses=[&quot;VERB&quot;, &quot;NOUN&quot;])```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.__len__`The number of rows in the vectors table.| Argument    | Type | Description                              || ----------- | ---- | ---------------------------------------- || **RETURNS** | int  | The number of rows in the vectors table. |```pythons2v = Sense2Vec(shape=(300, 128))assert len(s2v) == 300```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.__contains__`Check if a key is in the vectors table.| Argument    | Type          | Description                      || ----------- | ------------- | -------------------------------- || `key`       | unicode / int | The key to look up.              || **RETURNS** | bool          | Whether the key is in the table. |```pythons2v = Sense2Vec(shape=(10, 4))s2v.add(&quot;avocado|NOUN&quot;, numpy.asarray([4, 2, 2, 2], dtype=numpy.float32))assert &quot;avocado|NOUN&quot; in s2vassert &quot;avocado|VERB&quot; not in s2v```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.__getitem__`Retrieve a vector for a given key. Returns None if the key is not in the table.| Argument    | Type            | Description           || ----------- | --------------- | --------------------- || `key`       | unicode / int   | The key to look up.   || **RETURNS** | `numpy.ndarray` | The vector or `None`. |```pythonvec = s2v[&quot;avocado|NOUN&quot;]```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.__setitem__`Set a vector for a given key. Will raise an error if the key doesn't exist. Toadd a new entry, use `Sense2Vec.add`.| Argument | Type            | Description        || -------- | --------------- | ------------------ || `key`    | unicode / int   | The key.           || `vector` | `numpy.ndarray` | The vector to set. |```pythonvec = s2v[&quot;avocado|NOUN&quot;]s2v[&quot;avacado|NOUN&quot;] = vec```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.add`Add a new vector to the table.| Argument | Type            | Description                                                  || -------- | --------------- | ------------------------------------------------------------ || `key`    | unicode / int   | The key to add.                                              || `vector` | `numpy.ndarray` | The vector to add.                                           || `freq`   | int             | Optional frequency count. Used to find best matching senses. |```pythonvec = s2v[&quot;avocado|NOUN&quot;]s2v.add(&quot;ü•ë|NOUN&quot;, vec, 1234)```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.get_freq`Get the frequency count for a given key.| Argument    | Type          | Description                                       || ----------- | ------------- | ------------------------------------------------- || `key`       | unicode / int | The key to look up.                               || `default`   | -             | Default value to return if no frequency is found. || **RETURNS** | int           | The frequency count.                              |```pythonvec = s2v[&quot;avocado|NOUN&quot;]s2v.add(&quot;ü•ë|NOUN&quot;, vec, 1234)assert s2v.get_freq(&quot;ü•ë|NOUN&quot;) == 1234```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.set_freq`Set a frequency count for a given key.| Argument | Type          | Description                   || -------- | ------------- | ----------------------------- || `key`    | unicode / int | The key to set the count for. || `freq`   | int           | The frequency count.          |```pythons2v.set_freq(&quot;avocado|NOUN&quot;, 104294)```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.__iter__`, `Sense2Vec.items`Iterate over the entries in the vectors table.| Argument   | Type  | Description                               || ---------- | ----- | ----------------------------------------- || **YIELDS** | tuple | String key and vector pairs in the table. |```pythonfor key, vec in s2v:    print(key, vec)for key, vec in s2v.items():    print(key, vec)```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.keys`Iterate over the keys in the table.| Argument   | Type    | Description                   || ---------- | ------- | ----------------------------- || **YIELDS** | unicode | The string keys in the table. |```pythonall_keys = list(s2v.keys())```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.values`Iterate over the vectors in the table.| Argument   | Type            | Description               || ---------- | --------------- | ------------------------- || **YIELDS** | `numpy.ndarray` | The vectors in the table. |```pythonall_vecs = list(s2v.values())```#### &lt;kbd&gt;property&lt;/kbd&gt; `Sense2Vec.senses`The available senses in the table, e.g. `&quot;NOUN&quot;` or `&quot;VERB&quot;` (added atinitialization).| Argument    | Type | Description           || ----------- | ---- | --------------------- || **RETURNS** | list | The available senses. |```pythons2v = Sense2Vec(senses=[&quot;VERB&quot;, &quot;NOUN&quot;])assert &quot;VERB&quot; in s2v.senses```#### &lt;kbd&gt;property&lt;/kbd&gt; `Sense2vec.frequencies`The frequencies of the keys in the table, in descending order.| Argument    | Type | Description                                        || ----------- | ---- | -------------------------------------------------- || **RETURNS** | list | The `(key, freq)` tuples by frequency, descending. |```pythonmost_frequent = s2v.frequencies[:10]key, score = s2v.frequencies[0]```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2vec.similarity`Make a semantic similarity estimate of two keys or two sets of keys. The defaultestimate is cosine similarity using an average of vectors.| Argument    | Type                     | Description                         || ----------- | ------------------------ | ----------------------------------- || `keys_a`    | unicode / int / iterable | The string or integer key(s).       || `keys_b`    | unicode / int / iterable | The other string or integer key(s). || **RETURNS** | float                    | The similarity score.               |```pythonkeys_a = [&quot;machine_learning|NOUN&quot;, &quot;natural_language_processing|NOUN&quot;]keys_b = [&quot;computer_vision|NOUN&quot;, &quot;object_detection|NOUN&quot;]print(s2v.similarity(keys_a, keys_b))assert s2v.similarity(&quot;machine_learning|NOUN&quot;, &quot;machine_learning|NOUN&quot;) == 1.0```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.most_similar`Get the most similar entries in the table. If more than one key is provided, theaverage of the vectors is used. To make this method faster, see the[script for precomputing a cache](scripts/06_precompute_cache.py) of the nearestneighbors.| Argument     | Type                      | Description                                             || ------------ | ------------------------- | ------------------------------------------------------- || `keys`       | unicode / int / iterable¬† | The string or integer key(s) to compare to.             || `n`          | int                       | The number of similar keys to return. Defaults to `10`. || `batch_size` | int                       | The batch size to use. Defaults to `16`.                || **RETURNS**  | list                      | The `(key, score)` tuples of the most similar vectors.  |```pythonmost_similar = s2v.most_similar(&quot;natural_language_processing|NOUN&quot;, n=3)# [('machine_learning|NOUN', 0.8986967),#  ('computer_vision|NOUN', 0.8636297),#  ('deep_learning|NOUN', 0.8573361)]```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.get_other_senses`Find other entries for the same word with a different sense, e.g. `&quot;duck|VERB&quot;`for `&quot;duck|NOUN&quot;`.| Argument      | Type          | Description                                                       || ------------- | ------------- | ----------------------------------------------------------------- || `key`         | unicode / int | The key to check.                                                 || `ignore_case` | bool          | Check for uppercase, lowercase and titlecase. Defaults to `True`. || **RETURNS**   | list          | The string keys of other entries with different senses.           |```pythonother_senses = s2v.get_other_senses(&quot;duck|NOUN&quot;)# ['duck|VERB', 'Duck|ORG', 'Duck|VERB', 'Duck|PERSON', 'Duck|ADJ']```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.get_best_sense`Find the best-matching sense for a given word based on the available senses andfrequency counts. Returns `None` if no match is found.| Argument      | Type    | Description                                                                                             || ------------- | ------- | ------------------------------------------------------------------------------------------------------- || `word`        | unicode | The word to check.                                                                                      || `senses`      | list    | Optional list of senses to limit the search to. If not set / empty, all senses in the vectors are used. || `ignore_case` | bool    | Check for uppercase, lowercase and titlecase. Defaults to `True`.                                       || **RETURNS**   | unicode | The best-matching key or None.                                                                          |```pythonassert s2v.get_best_sense(&quot;duck&quot;) == &quot;duck|NOUN&quot;assert s2v.get_best_sense(&quot;duck&quot;, [&quot;VERB&quot;, &quot;ADJ&quot;]) == &quot;duck|VERB&quot;```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.to_bytes`Serialize a `Sense2Vec` object to a bytestring.| Argument    | Type  | Description                               || ----------- | ----- | ----------------------------------------- || `exclude`   | list  | Names of serialization fields to exclude. || **RETURNS** | bytes | The serialized `Sense2Vec` object.        |```pythons2v_bytes = s2v.to_bytes()```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.from_bytes`Load a `Sense2Vec` object from a bytestring.| Argument     | Type        | Description                               || ------------ | ----------- | ----------------------------------------- || `bytes_data` | bytes       | The data to load.                         || `exclude`    | list        | Names of serialization fields to exclude. || **RETURNS**  | `Sense2Vec` | The loaded object.                        |```pythons2v_bytes = s2v.to_bytes()new_s2v = Sense2Vec().from_bytes(s2v_bytes)```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.to_disk`Serialize a `Sense2Vec` object to a directory.| Argument  | Type             | Description                               || --------- | ---------------- | ----------------------------------------- || `path`    | unicode / `Path` | The path.                                 || `exclude` | list             | Names of serialization fields to exclude. |```pythons2v.to_disk(&quot;/path/to/sense2vec&quot;)```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.from_disk`Load a `Sense2Vec` object from a directory.| Argument    | Type             | Description                               || ----------- | ---------------- | ----------------------------------------- || `path`      | unicode / `Path` | The path to load from                     || `exclude`   | list             | Names of serialization fields to exclude. || **RETURNS** | `Sense2Vec`      | The loaded object.                        |```pythons2v.to_disk(&quot;/path/to/sense2vec&quot;)new_s2v = Sense2Vec().from_disk(&quot;/path/to/sense2vec&quot;)```---### &lt;kbd&gt;class&lt;/kbd&gt; `Sense2VecComponent`The pipeline component to add sense2vec to spaCy pipelines.#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2VecComponent.__init__`Initialize the pipeline component.| Argument        | Type                                                                                                                  | Description                                                                                                 || --------------- | --------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- || `vocab`         | `Vocab`                                                                                                               | The shared `Vocab`. Mostly used for the shared `StringStore`.                                               || `shape`         | tuple                                                                                                                 | The vector shape.                                                                                           || `merge_phrases` | bool                                                                                                                  | Whether to merge sense2vec phrases into one token. Defaults to `False`.                                     || `lemmatize`     | bool                                                                                                                  | Always look up lemmas if available in the vectors, otherwise default to original word. Defaults to `False`. || `overrides`     | Optional custom functions to use, mapped to names registred via the registry, e.g. `{&quot;make_key&quot;: &quot;custom_make_key&quot;}`. || **RETURNS**     | `Sense2VecComponent`                                                                                                  | The newly constructed object.                                                                               |```pythons2v = Sense2VecComponent(nlp.vocab)```#### &lt;kbd&gt;classmethod&lt;/kbd&gt; `Sense2VecComponent.from_nlp`Initialize the component from an nlp object. Mostly used as the componentfactory for the entry point (see setup.cfg) and to auto-register via the`@spacy.component` decorator.| Argument    | Type                 | Description                   || ----------- | -------------------- | ----------------------------- || `nlp`       | `Language`           | The `nlp` object.             || `**cfg`     | -                    | Optional config parameters.   || **RETURNS** | `Sense2VecComponent` | The newly constructed object. |```pythons2v = Sense2VecComponent.from_nlp(nlp)```#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2VecComponent.__call__`Process a `Doc` object with the component. Typically only called as part of thespaCy pipeline and not directly.| Argument    | Type  | Description              || ----------- | ----- | ------------------------ || `doc`       | `Doc` | The document to process. || **RETURNS** | `Doc` | the processed document.  |#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2Vec.init_component`Register the component-specific extension attributes here and only if thecomponent is added to the pipeline and used ‚Äì otherwise, tokens will still getthe attributes even if the component is only created and not added.#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2VecComponent.to_bytes`Serialize the component to a bytestring. Also called when the component is addedto the pipeline and you run `nlp.to_bytes`.| Argument    | Type  | Description               || ----------- | ----- | ------------------------- || **RETURNS** | bytes | The serialized component. |#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2VecComponent.from_bytes`Load a component from a bytestring. Also called when you run `nlp.from_bytes`.| Argument     | Type                 | Description        || ------------ | -------------------- | ------------------ || `bytes_data` | bytes                | The data to load.  || **RETURNS**  | `Sense2VecComponent` | The loaded object. |#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2VecComponent.to_disk`Serialize the component to a directory. Also called when the component is addedto the pipeline and you run `nlp.to_disk`.| Argument | Type             | Description || -------- | ---------------- | ----------- || `path`   | unicode / `Path` | The path.   |#### &lt;kbd&gt;method&lt;/kbd&gt; `Sense2VecComponent.from_disk`Load a `Sense2Vec` object from a directory. Also called when you run`nlp.from_disk`.| Argument    | Type                 | Description           || ----------- | -------------------- | --------------------- || `path`      | unicode / `Path`     | The path to load from || **RETURNS** | `Sense2VecComponent` | The loaded object.    |---### &lt;kbd&gt;class&lt;/kbd&gt; `registry`Function registry (powered by[`catalogue`](https://github.com/explosion/catalogue)) to easily customize thefunctions used to generate keys and phrases. Allows you to decorate and namecustom functions, swap them out and serialize the custom names when you save outthe model. The following registry options are available:| Name                      | Description                                                                                                                                                                                                                                        || ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- || `registry.make_key`       | Given a `word` and `sense`, return a string of the key, e.g. `&quot;word|sense&quot;.`                                                                                                                                                                       || `registry.split_key`      | Given a string key, return a `(word, sense)` tuple.                                                                                                                                                                                                || `registry.make_spacy_key` | Given a spaCy object (`Token` or `Span`) and a boolean `prefer_ents` keyword argument (whether to prefer the entity label for single tokens), return a `(word, sense)` tuple. Used in extension attributes to generate a key for tokens and spans. |  || `registry.get_phrases`    | Given a spaCy `Doc`, return a list of `Span` objects used for sense2vec phrases (typically noun phrases and named entities).                                                                                                                       || `registry.merge_phrases`  | Given a spaCy `Doc`, get all sense2vec phrases and merge them into single tokens.¬†                                                                                                                                                                 |Each registry has a `register` method that can be used as a function decoratorand takes one argument, the name of the custom function.```pythonfrom sense2vec import registry@registry.make_key.register(&quot;custom&quot;)def custom_make_key(word, sense):    return f&quot;{word}###{sense}&quot;@registry.split_key.register(&quot;custom&quot;)def custom_split_key(key):    word, sense = key.split(&quot;###&quot;)    return word, sense```When initializing the `Sense2Vec` object, you can now pass in a dictionary ofoverrides with the names of your custom registered functions.```pythonoverrides = {&quot;make_key&quot;: &quot;custom&quot;, &quot;split_key&quot;: &quot;custom&quot;}s2v = Sense2Vec(overrides=overrides)```This makes it easy to experiment with different strategies and serializing thestrategies as plain strings (instead of having to pass around and/or pickle thefunctions themselves).## üöÇ Training your own sense2vec vectorsThe [`/scripts`](/scripts) directory contains command line utilities forpreprocessing text and training your own vectors.### RequirementsTo train your own sense2vec vectors, you'll need the following:- A **very large** source of raw text (ideally more than you'd use for word2vec,  since the senses make the vocabulary more sparse). We recommend at least 1  billion words.- A [pretrained spaCy model](https://spacy.io/models) that assigns  part-of-speech tags, dependencies and named entities, and populates the  `doc.noun_chunks`. If the language you need doesn't provide a built in  [syntax iterator for noun phrases](https://spacy.io/usage/adding-languages#syntax-iterators),  you'll need to write your own. (The `doc.noun_chunks` and `doc.ents` are what  sense2vec uses to determine what's a phrase.)- [GloVe](https://github.com/stanfordnlp/GloVe) or  [fastText](https://github.com/facebookresearch/fastText) installed and built.  You should be able to clone the repo and run `make` in the respective  directory.### Step-by-step processThe training process is split up into several steps to allow you to resume atany given point. Processing scripts are designed to operate on single files,making it easy to parallellize the work. The scripts in this repo require either[Glove](https://github.com/stanfordnlp/GloVe) or[fastText](https://github.com/facebookresearch/fastText) which you need toclone and `make`.For Fasttext, the scripts will require the path to the created binary file.If you're working on Windows, you can build with `cmake`, or alternativelyuse the `.exe` file from this **unofficial**repo with FastText binary builds for Windows:https://github.com/xiamx/fastText/releases.|        | Script                                                                                                                                       | Description                                                                                                                                                                                 || ------ | -------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- || **1.** | [`01_parse.py`](scripts/01_parse.py)                                                                                                         | Use spaCy to parse the raw text and output binary collections of `Doc` objects (see [`DocBin`](https://spacy.io/api/docbin)).                                                               || **2.** | [`02_preprocess.py`](scripts/02_preprocess.py)                                                                                               | Load a collection of parsed `Doc` objects produced in the previous step and output text files in the sense2vec format (one sentence per line and merged phrases with senses).               || **3.** | [`03_glove_build_counts.py`](scripts/03_glove_build_counts.py)                                                                               | Use [GloVe](https://github.com/stanfordnlp/GloVe) to build the vocabulary and counts. Skip this step if you're using Word2Vec via [FastText](https://github.com/facebookresearch/fastText). || **4.** | [`04_glove_train_vectors.py`](scripts/04_glove_train_vectors.py)&lt;br /&gt;[`04_fasttext_train_vectors.py`](scripts/04_fasttext_train_vectors.py) | Use [GloVe](https://github.com/stanfordnlp/GloVe) or [FastText](https://github.com/facebookresearch/fastText) to train vectors.                                                             || **5.** | [`05_export.py`](scripts/05_export.py)                                                                                                       | Load the vectors and frequencies and output a sense2vec component that can be loaded via `Sense2Vec.from_disk`.                                                                             || **6.** | [`06_precompute_cache.py`](scripts/06_precompute_cache.py)                                                                                   | **Optional:** Precompute nearest-neighbor queries for every entry in the vocab to make `Sense2Vec.most_similar` faster.                                                                     |For more detailed documentation of the scripts, check out the source or run themwith `--help`. For example, `python scripts/01_parse.py --help`.## üç≥ Prodigy recipesThis package also seamlessly integrates with the [Prodigy](https://prodi.gy)annotation tool and exposes recipes for using sense2vec vectors to quicklygenerate lists of multi-word phrases and bootstrap NER annotations. To use arecipe, `sense2vec` needs to be installed in the same environment as Prodigy.For an example of a real-world use case, check out this[NER project](https://github.com/explosion/projects/tree/master/ner-fashion-brands)with downloadable datasets.The following recipes are available ‚Äì see below for more detailed docs.| Recipe                                                              | Description                                                          || ------------------------------------------------------------------- | -------------------------------------------------------------------- || [`sense2vec.teach`](#recipe-sense2vecteach)                         | Bootstrap a terminology list using sense2vec.                        || [`sense2vec.to-patterns`](#recipe-sense2vecto-patterns)             | Convert phrases dataset to token-based match patterns.               || [`sense2vec.eval`](#recipe-sense2veceval)                           | Evaluate a sense2vec model by asking about phrase triples.           || [`sense2vec.eval-most-similar`](#recipe-sense2veceval-most-similar) | Evaluate a sense2vec model by correcting the most similar entries.   || [`sense2vec.eval-ab`](#recipe-sense2veceval-ab)                     | Perform an A/B evaluation of two pretrained sense2vec vector models. |### &lt;kbd&gt;recipe&lt;/kbd&gt; `sense2vec.teach`Bootstrap a terminology list using sense2vec. Prodigy will suggest similar termsbased on the most similar phrases from sense2vec, and the suggestions willbe adjusted as you annotate and accept similar phrases. For each seed term, thebest matching sense according to the sense2vec vectors will be used.```bashprodigy sense2vec.teach [dataset] [vectors_path] [--seeds] [--threshold][--n-similar] [--batch-size] [--resume]```| Argument             | Type       | Description                               || -------------------- | ---------- | ----------------------------------------- || `dataset`            | positional | Dataset to save annotations to.           || `vectors_path`       | positional | Path to pretrained sense2vec vectors.     || `--seeds`, `-s`      | option     | One or more comma-separated seed phrases. || `--threshold`, `-t`  | option     | Similarity threshold. Defaults to `0.85`. || `--n-similar`, `-n`  | option     | Number of similar items to get at once.   || `--batch-size`, `-b` | option     | Batch size for submitting annotations.    || `--resume`, `-R`     | flag       | Resume from an existing phrases dataset.  |#### Example```bashprodigy sense2vec.teach tech_phrases /path/to/s2v_reddit_2015_md--seeds &quot;natural language processing, machine learning, artificial intelligence&quot;```### &lt;kbd&gt;recipe&lt;/kbd&gt; `sense2vec.to-patterns`Convert a dataset of phrases collected with `sense2vec.teach` to token-basedmatch patterns that can be used with[spaCy's `EntityRuler`](https://spacy.io/usage/rule-based-matching#entityruler)or recipes like `ner.match`. If no output file is specified, the patterns arewritten to stdout. The examples are tokenized so that multi-token terms arerepresented correctly, e.g.:`{&quot;label&quot;: &quot;SHOE_BRAND&quot;, &quot;pattern&quot;: [{ &quot;LOWER&quot;: &quot;new&quot; }, { &quot;LOWER&quot;: &quot;balance&quot; }]}`.```bashprodigy sense2vec.to-patterns [dataset] [spacy_model] [label] [--output-file][--case-sensitive] [--dry]```| Argument                  | Type       | Description                                  || ------------------------- | ---------- | -------------------------------------------- || `dataset`                 | positional | Phrase dataset to convert.                   || `spacy_model`             | positional | spaCy model for tokenization.                || `label`                   | positional | Label to apply to all patterns.              || `--output-file`, `-o`     | option     | Optional output file. Defaults to stdout.    || `--case-sensitive`, `-CS` | flag       | Make patterns case-sensitive.                || `--dry`, `-D`             | flag       | Perform a dry run and don't output anything. |#### Example```bashprodigy sense2vec.to-patterns tech_phrases en_core_web_sm TECHNOLOGY--output-file /path/to/patterns.jsonl```### &lt;kbd&gt;recipe&lt;/kbd&gt; `sense2vec.eval`Evaluate a sense2vec model by asking about phrase triples: is word A moresimilar to word B, or to word C? If the human mostly agrees with the model, thevectors model is good. The recipe will only ask about vectors with the samesense and supports different example selection strategies.```bashprodigy sense2vec.eval [dataset] [vectors_path] [--strategy] [--senses][--exclude-senses] [--n-freq] [--threshold] [--batch-size] [--eval-whole][--eval-only] [--show-scores]```| Argument                  | Type       | Description                                                                                                   || ------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------- || `dataset`                 | positional | Dataset to save annotations to.                                                                               || `vectors_path`            | positional | Path to pretrained sense2vec vectors.                                                                         || `--strategy`, `-st`       | option     | Example selection strategy. `most similar` (default) or `random`.                                             || `--senses`, `-s`          | option     | Comma-separated list of senses to limit the selection to. If not set, all senses in the vectors will be used. || `--exclude-senses`, `-es` | option     | Comma-separated list of senses to exclude. See `prodigy_recipes.EVAL_EXCLUDE_SENSES` fro the defaults.        || `--n-freq`, `-f`          | option     | Number of most frequent entries to limit to.                                                                  || `--threshold`, `-t`       | option     | Minimum similarity threshold to consider examples.                                                            || `--batch-size`, `-b`      | option     | Batch size to use.                                                                                            || `--eval-whole`, `-E`      | flag       | Evaluate the whole dataset instead of the current session.                                                    || `--eval-only`, `-O`       | flag       | Don't annotate, only evaluate the current dataset.                                                            || `--show-scores`, `-S`     | flag       | Show all scores for debugging.                                                                                |#### Strategies| Name                 | Description                                                                                                                                                           || -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- || `most_similar`       | Pick a random word from a random sense and get its most similar entries of the same sense. Ask about the similarity to the last and middle entry from that selection. || `most_least_similar` | Pick a random word from a random sense and get the least similar entry from its most similar entries, and then the last most similar entry of that.                   || `random`             | Pick a random sample of 3 words from the same random sense.                                                                                                           |#### Example```bashprodigy sense2vec.eval vectors_eval /path/to/s2v_reddit_2015_md--senses NOUN,ORG,PRODUCT --threshold 0.5```![UI preview of sense2vec.eval](https://user-images.githubusercontent.com/13643239/67994212-668cf400-fc44-11e9-8fe2-bf264ae32b0a.png)### &lt;kbd&gt;recipe&lt;/kbd&gt; `sense2vec.eval-most-similar`Evaluate a vectors model by looking at the most similar entries it returns for arandom phrase and unselecting the mistakes.```bashprodigy sense2vec.eval [dataset] [vectors_path] [--senses] [--exclude-senses][--n-freq] [--n-similar] [--batch-size] [--eval-whole] [--eval-only][--show-scores]```| Argument                  | Type       | Description                                                                                                   || ------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------- || `dataset`                 | positional | Dataset to save annotations to.                                                                               || `vectors_path`            | positional | Path to pretrained sense2vec vectors.                                                                         || `--senses`, `-s`          | option     | Comma-separated list of senses to limit the selection to. If not set, all senses in the vectors will be used. || `--exclude-senses`, `-es` | option     | Comma-separated list of senses to exclude. See `prodigy_recipes.EVAL_EXCLUDE_SENSES` fro the defaults.        || `--n-freq`, `-f`          | option     | Number of most frequent entries to limit to.                                                                  || `--n-similar`, `-n`       | option     | Number of similar items to check. Defaults to `10`.                                                           || `--batch-size`, `-b`      | option     | Batch size to use.                                                                                            || `--eval-whole`, `-E`      | flag       | Evaluate the whole dataset instead of the current session.                                                    || `--eval-only`, `-O`       | flag       | Don't annotate, only evaluate the current dataset.                                                            || `--show-scores`, `-S`     | flag       | Show all scores for debugging.                                                                                |```bashprodigy sense2vec.eval-most-similar vectors_eval_sim /path/to/s2v_reddit_2015_md--senses NOUN,ORG,PRODUCT```### &lt;kbd&gt;recipe&lt;/kbd&gt; `sense2vec.eval-ab`Perform an A/B evaluation of two pretrained sense2vec vector models by comparingthe most similar entries they return for a random phrase. The UI shows tworandomized options with the most similar entries of each model and highlightsthe phrases that differ. At the end of the annotation session the overall statsand preferred model are shown.```bashprodigy sense2vec.eval [dataset] [vectors_path_a] [vectors_path_b] [--senses][--exclude-senses] [--n-freq] [--n-similar] [--batch-size] [--eval-whole][--eval-only] [--show-mapping]```| Argument                  | Type       | Description                                                                                                   || ------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------- || `dataset`                 | positional | Dataset to save annotations to.                                                                               || `vectors_path_a`          | positional | Path to pretrained sense2vec vectors.                                                                         || `vectors_path_b`          | positional | Path to pretrained sense2vec vectors.                                                                         || `--senses`, `-s`          | option     | Comma-separated list of senses to limit the selection to. If not set, all senses in the vectors will be used. || `--exclude-senses`, `-es` | option     | Comma-separated list of senses to exclude. See `prodigy_recipes.EVAL_EXCLUDE_SENSES` fro the defaults.        || `--n-freq`, `-f`          | option     | Number of most frequent entries to limit to.                                                                  || `--n-similar`, `-n`       | option     | Number of similar items to check. Defaults to `10`.                                                           || `--batch-size`, `-b`      | option     | Batch size to use.                                                                                            || `--eval-whole`, `-E`      | flag       | Evaluate the whole dataset instead of the current session.                                                    || `--eval-only`, `-O`       | flag       | Don't annotate, only evaluate the current dataset.                                                            || `--show-mapping`, `-S`    | flag       | Show which models are option 1 and option 2 in the UI (for debugging).                                        |```bashprodigy sense2vec.eval-ab vectors_eval_sim /path/to/s2v_reddit_2015_md /path/to/s2v_reddit_2019_md --senses NOUN,ORG,PRODUCT```![UI preview of sense2vec.eval-ab](https://user-images.githubusercontent.com/13643239/68088514-46d21780-fe60-11e9-9b29-fe313bb2154d.png)## Pretrained vectorsThe pretrained Reddit vectors support the following &quot;senses&quot;, eitherpart-of-speech tags or entity labels. For more details, see spaCy's[annotation scheme overview](https://spacy.io/api/annotation).| Tag     | Description               | Examples                             || ------- | ------------------------- | ------------------------------------ || `ADJ`   | adjective                 | big, old, green                      || `ADP`   | adposition                | in, to, during                       || `ADV`   | adverb                    | very, tomorrow, down, where          || `AUX`   | auxiliary¬†                | is, has (done), will (do)            || `CONJ`  | conjunction               | and, or, but                         || `DET`   | determiner                | a, an, the                           || `INTJ`  | interjection              | psst, ouch, bravo, hello             || `NOUN`  | noun                      | girl, cat, tree, air, beauty         || `NUM`   | numeral                   | 1, 2017, one, seventy-seven, MMXIV   || `PART`  | particle                  | 's, not                              || `PRON`  | pronoun                   | I, you, he, she, myself, somebody    || `PROPN` | proper noun               | Mary, John, London, NATO, HBO        || `PUNCT` | punctuation               | , ? ( )                              || `SCONJ` | subordinating conjunction | if, while, that                      || `SYM`   | symbol                    | \$, %, =, :), üòù                     || `VERB`  | verb                      | run, runs, running, eat, ate, eating || Entity Label  | Description                                          || ------------- | ---------------------------------------------------- || `PERSON`      | People, including fictional.                         || `NORP`        | Nationalities or religious or political groups.      || `FACILITY`    | Buildings, airports, highways, bridges, etc.         || `ORG`         | Companies, agencies, institutions, etc.              || `GPE`         | Countries, cities, states.                           || `LOC`         | Non-GPE locations, mountain ranges, bodies of water. || `PRODUCT`     | Objects, vehicles, foods, etc. (Not services.)       || `EVENT`       | Named hurricanes, battles, wars, sports events, etc. || `WORK_OF_ART` | Titles of books, songs, etc.                         || `LANGUAGE`    | Any named language.                                  |</longdescription>
</pkgmetadata>