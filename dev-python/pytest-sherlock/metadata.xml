<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># pytest-sherlock[![Build Status](https://github.com/DKorytkin/pytest-sherlock/actions/workflows/main.yml/badge.svg?branch=master)](https://github.com/DKorytkin/pytest-sherlock/actions/workflows/main.yml?query=branch%3Amaster)[![Cov](https://codecov.io/gh/DKorytkin/pytest-sherlock/branch/master/graph/badge.svg)](https://codecov.io/gh/DKorytkin/pytest-sherlock/branch/master)[![PyPI](https://img.shields.io/pypi/v/pytest-sherlock)](https://pypi.org/project/pytest-sherlock/)[![PyPI - Python Version](https://img.shields.io/pypi/pyversions/pytest-sherlock)](https://pypi.org/project/pytest-sherlock/)[![PyPI - Wheel](https://img.shields.io/pypi/wheel/pytest-sherlock)](https://pypi.org/project/pytest-sherlock/)Pytest plugin which help to find coupled tests.Sometimes we have coupled tests which depend from orderingFor example:- **PASSES** `tests/exmaple/test_all_read.py tests/exmaple/test_b_modify.py tests/exmaple/test_c_delete.py`- **FAILED** `tests/exmaple/test_c_delete.py tests/exmaple/test_b_modify.py tests/exmaple/test_all_read.py`In this case pretty simple to detect coupled tests, but if we have &gt;=1k tests which called before it will hard## Content:- [install](#install)- [how to use](#how-to-use)- [waiting in the future](#todo)### Install```bashpip install pytest-sherlock```### how to use:```bashpytest tests/exmaple/test_c_delete.py tests/exmaple/test_b_modify.py tests/exmaple/test_all_read.py --flaky-test=&quot;test_read_params&quot; -vv```Plugin didn't run all tests, it try to find some possible guilty test and will run first```bashTry to find coupled tests in [3-4] steps__________________________ Step [1 of 4]: __________________________tests/exmaple/test_c_delete.py::test_delete_random_param PASSED                                                                                                      [ 20%]tests/exmaple/test_b_modify.py::test_modify_random_param PASSED                                                                                                      [ 40%]tests/exmaple/test_c_delete.py::test_deleted_passed PASSED                                                                                                           [ 60%]tests/exmaple/test_c_delete.py::test_do_not_delete PASSED                                                                                                            [ 80%]tests/exmaple/test_all_read.py::test_read_params FAILED                                                                                                             [100%]__________________________ Step [2 of 4]: __________________________tests/exmaple/test_c_delete.py::test_delete_random_param PASSED                                                                                                      [ 33%]tests/exmaple/test_b_modify.py::test_modify_random_param PASSED                                                                                                      [ 66%]tests/exmaple/test_all_read.py::test_read_params FAILED                                                                                                             [100%]__________________________ Step [3 of 4]: __________________________tests/exmaple/test_c_delete.py::test_delete_random_param PASSED                                                                                                      [ 50%]tests/exmaple/test_all_read.py::test_read_params PASSED                                                                                                              [100%]__________________________ Step [4 of 4]: __________________________tests/exmaple/test_b_modify.py::test_modify_random_param PASSED                                                                                                      [ 50%]tests/exmaple/test_all_read.py::test_read_params FAILED                                                                                                             [100%]============================== FAILURES ==============================__________________________ test_read_params __________________________Found coupled tests:tests/exmaple/test_b_modify.py::test_modify_random_paramtests/exmaple/test_all_read.py::test_read_paramsCommon fixtures:configHow to reproduce:pytest -l -vv tests/exmaple/test_b_modify.py::test_modify_random_param tests/exmaple/test_all_read.py::test_read_paramsAssertionError: assert 13 == 2 +  where 13 = &lt;built-in method get of dict object at 0x102664280&gt;('b') +    where &lt;built-in method get of dict object at 0x102664280&gt; = {'a': 1, 'b': 13, 'c': 3}.gettests/exmaple/test_all_read.py:8: AssertionError=================== 1 failed, 9 passed in 0.08 seconds ===================```The plugin also supports `--lf` (last failed) option to rerun found coupled tests.It allows us to make sure that coupled tests are true.```shellpytest tests/exmaple/test_c_delete.py tests/exmaple/test_b_modify.py tests/exmaple/test_all_read.py --lf``````shell=========================================================================== test session starts ============================================================================platform darwin -- Python 3.7.10, pytest-3.5.1, py-1.7.0, pluggy-0.6.0collected 10 items / 8 deselectedrun-last-failure: rerun previous 2 failurestests/exmaple/test_b_modify.py .                                                                                                                                     [ 50%]tests/exmaple/test_all_read.py F                                                                                                                                     [100%]================================================================================= FAILURES =================================================================================_____________________________________________________________________________ test_read_params _____________________________________________________________________________config = {'a': 1, 'b': 13, 'c': 3}, param = 'b'    def test_read_params(config, param):&gt;       assert config.get(param) == 2E       AssertionError: assert 13 == 2E        +  where 13 = &lt;built-in method get of dict object at 0x10c964cd0&gt;('b')E        +    where &lt;built-in method get of dict object at 0x10c964cd0&gt; = {'a': 1, 'b': 13, 'c': 3}.gettests/exmaple/test_all_read.py:6: AssertionError============================================================= 1 failed, 1 passed, 8 deselected in 0.05 seconds =============================================================```### TODOI have a couple ideas, how to improve finder coupled tests:- use **AST** for detect common peace of code *(variables, functions, etc...)*</longdescription>
</pkgmetadata>