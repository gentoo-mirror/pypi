<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># CSTL : The C++ Standard Template Library (STL) for PythonIn this `cstl` tool, we wrap several C++ STL containers to use in Python. The containers use native C++ implementation and does not have the [Copy-on-Write issue](#copy-on-Write-issue-in-python) like native `list`, and `dict` in Python (Someone refers to it as memory leakage in multiprocessing which always happens in all Python native objects with ref count). Though it is designed to solve the CoW issue, it can also be used in scenarios where a standard C++ container is needed.## InstallInstall from `pip`:```pip install cstl```Build from source:```conda install swig # You should first install swiggit clone https://github.com/fuzihaofzh/cstl.gitcd cstl./build.shpython setup.py install --single-version-externally-managed --record files.txt```## Usage ```pythonimport cstl# Directly covert containers from pythonv = cstl.frompy({&quot;1&quot;:[1,2,3], &quot;2&quot;:[4,5,6]})v[&quot;1&quot;][2] = 10pv = cstl.topy(v)print(pv)# You can also explictly specify the typevec = cstl.VecInt([1,2,3,4,5,6,7])print(vec[2])      #3vec[2] = 1print(vec[2])      #1vec.append(10)print(vec[-1])     #10# User should explictly convert std::vector into list as follows:print(list(vec))   #[1, 2, 1, 4, 5, 6, 7, 10] vmif = cstl.VecMapIntFloat([{1:3.4},{4:5.5}])print(vmif[0][1])  #3.4000000953674316```Please refer to more usage in `test/test/py`.## Supported DatatypeWe support the following data types as the elements in the containers|Python Type|C++ Type| Can be dict key||---|---|---||int|int|Yes||int|std::int64|Yes||str|std::string|Yes||float|float|No||double|double|No||bool|bool|No|## Supported ContainersThe supported containers are listed as follows|Python Structure|C++ Container| |---|---||list|std::vector||dict|std::unordered_map||set|std::unordered_set|We also support nested container, namely, structure like `std::unordered_map&lt; std::string,std::vector&lt; bool &gt; &gt; ` is supported. Currently, at most 2 nested layers are supported. If you want to support more layers, simply uncomment the line `full.update(third)` in `generate_swig.py` and compile from the source. But please note the the generated files could be very large.Please be noted that if you want to pass a Python set to set in `cstl`, you should first convert it into a list. This is a [known issue](https://stackoverflow.com/questions/73900661/using-swig-python-wrapper-argument-2-of-type-stdunordered-set-stdstring) for swig, let's see whether it will be resolved soon. ## Speed Comparison|           |   python |   numpy |   cstl |   pytorch ||:----------|---------:|--------:|-------:|----------:|| add1      |    0.19  |   0.28  |  0.911 |     4.714 || read      |    0.161 |   0.2   |  0.526 |     1.033 || sliceread |    0.327 |   0.264 |  0.683 |     1.381 || append    |    0.204 |  &gt;10    |  0.351 |    &gt;10    || pop       |   &gt;10    |  &gt;10    |  0.595 |    &gt;10    |It can be concluded from the table that cstl is slower than python native list and numpy in basic tasks. However, it is faster in some specific task. Most importantly, it sovles the CoW issue and provide more data structures than numpy.## Copy-on-Write Issue in Python[Copy-on-write](https://en.wikipedia.org/wiki/Copy-on-write) is a feature and not a bug for Python. Usually, in python multiprocessing, if we have a large data shared by each process, we will see as the program runs, the engaged memory grows gradually and finally occupy all the machine's memory and raise a Memory Error. Someone refers to it as memory leaky in the multiprocess. However, this is caused by a feature of Python. It is because, in multi-processing programs, the shared object will be copied to each process if they access the data. However, if the data is large and we use several processes, the memory cannot hold a separate copy for each process. This cannot be solved in Python as all Python's native structures with ref count have such problems (feature?). A more detailed discussion can be found at https://github.com/pytorch/pytorch/issues/13246 . Many other containers like pytorch, numpy. However, they do not support data structure like nested map.## Supported STL Containers ListWe support the following nested containers. If you need more than 2 layers of nested containers please refer to [Supported Containers](#supported-containers)|cstl name|C++ class||---|---|| VecInt | `std::vector&lt;int&gt; ` || VecStr | `std::vector&lt;std::string&gt; ` || VecFloat | `std::vector&lt;float&gt; ` || VecDouble | `std::vector&lt;double&gt; ` || VecBool | `std::vector&lt;bool&gt; ` || VecLong | `std::vector&lt;std::int64_t&gt; ` || SetInt | `std::unordered_set&lt;int&gt; ` || SetStr | `std::unordered_set&lt;std::string&gt; ` || SetLong | `std::unordered_set&lt;std::int64_t&gt; ` || MapIntInt | `std::unordered_map&lt;int, int&gt; ` || MapIntStr | `std::unordered_map&lt;int, std::string&gt; ` || MapIntFloat | `std::unordered_map&lt;int, float&gt; ` || MapIntDouble | `std::unordered_map&lt;int, double&gt; ` || MapIntBool | `std::unordered_map&lt;int, bool&gt; ` || MapIntLong | `std::unordered_map&lt;int, std::int64_t&gt; ` || MapStrInt | `std::unordered_map&lt;std::string, int&gt; ` || MapStrStr | `std::unordered_map&lt;std::string, std::string&gt; ` || MapStrFloat | `std::unordered_map&lt;std::string, float&gt; ` || MapStrDouble | `std::unordered_map&lt;std::string, double&gt; ` || MapStrBool | `std::unordered_map&lt;std::string, bool&gt; ` || MapStrLong | `std::unordered_map&lt;std::string, std::int64_t&gt; ` || MapLongInt | `std::unordered_map&lt;std::int64_t, int&gt; ` || MapLongStr | `std::unordered_map&lt;std::int64_t, std::string&gt; ` || MapLongFloat | `std::unordered_map&lt;std::int64_t, float&gt; ` || MapLongDouble | `std::unordered_map&lt;std::int64_t, double&gt; ` || MapLongBool | `std::unordered_map&lt;std::int64_t, bool&gt; ` || MapLongLong | `std::unordered_map&lt;std::int64_t, std::int64_t&gt; ` || VecVecInt | `std::vector&lt;std::vector&lt;int&gt; &gt; ` || VecVecStr | `std::vector&lt;std::vector&lt;std::string&gt; &gt; ` || VecVecFloat | `std::vector&lt;std::vector&lt;float&gt; &gt; ` || VecVecDouble | `std::vector&lt;std::vector&lt;double&gt; &gt; ` || VecVecBool | `std::vector&lt;std::vector&lt;bool&gt; &gt; ` || VecVecLong | `std::vector&lt;std::vector&lt;std::int64_t&gt; &gt; ` || VecSetInt | `std::vector&lt;std::unordered_set&lt;int&gt; &gt; ` || VecSetStr | `std::vector&lt;std::unordered_set&lt;std::string&gt; &gt; ` || VecSetLong | `std::vector&lt;std::unordered_set&lt;std::int64_t&gt; &gt; ` || VecMapIntInt | `std::vector&lt;std::unordered_map&lt;int, int&gt; &gt; ` || VecMapIntStr | `std::vector&lt;std::unordered_map&lt;int, std::string&gt; &gt; ` || VecMapIntFloat | `std::vector&lt;std::unordered_map&lt;int, float&gt; &gt; ` || VecMapIntDouble | `std::vector&lt;std::unordered_map&lt;int, double&gt; &gt; ` || VecMapIntBool | `std::vector&lt;std::unordered_map&lt;int, bool&gt; &gt; ` || VecMapIntLong | `std::vector&lt;std::unordered_map&lt;int, std::int64_t&gt; &gt; ` || VecMapStrInt | `std::vector&lt;std::unordered_map&lt;std::string, int&gt; &gt; ` || VecMapStrStr | `std::vector&lt;std::unordered_map&lt;std::string, std::string&gt; &gt; ` || VecMapStrFloat | `std::vector&lt;std::unordered_map&lt;std::string, float&gt; &gt; ` || VecMapStrDouble | `std::vector&lt;std::unordered_map&lt;std::string, double&gt; &gt; ` || VecMapStrBool | `std::vector&lt;std::unordered_map&lt;std::string, bool&gt; &gt; ` || VecMapStrLong | `std::vector&lt;std::unordered_map&lt;std::string, std::int64_t&gt; &gt; ` || VecMapLongInt | `std::vector&lt;std::unordered_map&lt;std::int64_t, int&gt; &gt; ` || VecMapLongStr | `std::vector&lt;std::unordered_map&lt;std::int64_t, std::string&gt; &gt; ` || VecMapLongFloat | `std::vector&lt;std::unordered_map&lt;std::int64_t, float&gt; &gt; ` || VecMapLongDouble | `std::vector&lt;std::unordered_map&lt;std::int64_t, double&gt; &gt; ` || VecMapLongBool | `std::vector&lt;std::unordered_map&lt;std::int64_t, bool&gt; &gt; ` || VecMapLongLong | `std::vector&lt;std::unordered_map&lt;std::int64_t, std::int64_t&gt; &gt; ` || MapIntVecInt | `std::unordered_map&lt;int, std::vector&lt;int&gt; &gt; ` || MapIntVecStr | `std::unordered_map&lt;int, std::vector&lt;std::string&gt; &gt; ` || MapIntVecFloat | `std::unordered_map&lt;int, std::vector&lt;float&gt; &gt; ` || MapIntVecDouble | `std::unordered_map&lt;int, std::vector&lt;double&gt; &gt; ` || MapIntVecBool | `std::unordered_map&lt;int, std::vector&lt;bool&gt; &gt; ` || MapIntVecLong | `std::unordered_map&lt;int, std::vector&lt;std::int64_t&gt; &gt; ` || MapIntSetInt | `std::unordered_map&lt;int, std::unordered_set&lt;int&gt; &gt; ` || MapIntSetStr | `std::unordered_map&lt;int, std::unordered_set&lt;std::string&gt; &gt; ` || MapIntSetLong | `std::unordered_map&lt;int, std::unordered_set&lt;std::int64_t&gt; &gt; ` || MapIntMapIntInt | `std::unordered_map&lt;int, std::unordered_map&lt;int, int&gt; &gt; ` || MapIntMapIntStr | `std::unordered_map&lt;int, std::unordered_map&lt;int, std::string&gt; &gt; ` || MapIntMapIntFloat | `std::unordered_map&lt;int, std::unordered_map&lt;int, float&gt; &gt; ` || MapIntMapIntDouble | `std::unordered_map&lt;int, std::unordered_map&lt;int, double&gt; &gt; ` || MapIntMapIntBool | `std::unordered_map&lt;int, std::unordered_map&lt;int, bool&gt; &gt; ` || MapIntMapIntLong | `std::unordered_map&lt;int, std::unordered_map&lt;int, std::int64_t&gt; &gt; ` || MapIntMapStrInt | `std::unordered_map&lt;int, std::unordered_map&lt;std::string, int&gt; &gt; ` || MapIntMapStrStr | `std::unordered_map&lt;int, std::unordered_map&lt;std::string, std::string&gt; &gt; ` || MapIntMapStrFloat | `std::unordered_map&lt;int, std::unordered_map&lt;std::string, float&gt; &gt; ` || MapIntMapStrDouble | `std::unordered_map&lt;int, std::unordered_map&lt;std::string, double&gt; &gt; ` || MapIntMapStrBool | `std::unordered_map&lt;int, std::unordered_map&lt;std::string, bool&gt; &gt; ` || MapIntMapStrLong | `std::unordered_map&lt;int, std::unordered_map&lt;std::string, std::int64_t&gt; &gt; ` || MapIntMapLongInt | `std::unordered_map&lt;int, std::unordered_map&lt;std::int64_t, int&gt; &gt; ` || MapIntMapLongStr | `std::unordered_map&lt;int, std::unordered_map&lt;std::int64_t, std::string&gt; &gt; ` || MapIntMapLongFloat | `std::unordered_map&lt;int, std::unordered_map&lt;std::int64_t, float&gt; &gt; ` || MapIntMapLongDouble | `std::unordered_map&lt;int, std::unordered_map&lt;std::int64_t, double&gt; &gt; ` || MapIntMapLongBool | `std::unordered_map&lt;int, std::unordered_map&lt;std::int64_t, bool&gt; &gt; ` || MapIntMapLongLong | `std::unordered_map&lt;int, std::unordered_map&lt;std::int64_t, std::int64_t&gt; &gt; ` || MapStrVecInt | `std::unordered_map&lt;std::string, std::vector&lt;int&gt; &gt; ` || MapStrVecStr | `std::unordered_map&lt;std::string, std::vector&lt;std::string&gt; &gt; ` || MapStrVecFloat | `std::unordered_map&lt;std::string, std::vector&lt;float&gt; &gt; ` || MapStrVecDouble | `std::unordered_map&lt;std::string, std::vector&lt;double&gt; &gt; ` || MapStrVecBool | `std::unordered_map&lt;std::string, std::vector&lt;bool&gt; &gt; ` || MapStrVecLong | `std::unordered_map&lt;std::string, std::vector&lt;std::int64_t&gt; &gt; ` || MapStrSetInt | `std::unordered_map&lt;std::string, std::unordered_set&lt;int&gt; &gt; ` || MapStrSetStr | `std::unordered_map&lt;std::string, std::unordered_set&lt;std::string&gt; &gt; ` || MapStrSetLong | `std::unordered_map&lt;std::string, std::unordered_set&lt;std::int64_t&gt; &gt; ` || MapStrMapIntInt | `std::unordered_map&lt;std::string, std::unordered_map&lt;int, int&gt; &gt; ` || MapStrMapIntStr | `std::unordered_map&lt;std::string, std::unordered_map&lt;int, std::string&gt; &gt; ` || MapStrMapIntFloat | `std::unordered_map&lt;std::string, std::unordered_map&lt;int, float&gt; &gt; ` || MapStrMapIntDouble | `std::unordered_map&lt;std::string, std::unordered_map&lt;int, double&gt; &gt; ` || MapStrMapIntBool | `std::unordered_map&lt;std::string, std::unordered_map&lt;int, bool&gt; &gt; ` || MapStrMapIntLong | `std::unordered_map&lt;std::string, std::unordered_map&lt;int, std::int64_t&gt; &gt; ` || MapStrMapStrInt | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::string, int&gt; &gt; ` || MapStrMapStrStr | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::string, std::string&gt; &gt; ` || MapStrMapStrFloat | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::string, float&gt; &gt; ` || MapStrMapStrDouble | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::string, double&gt; &gt; ` || MapStrMapStrBool | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::string, bool&gt; &gt; ` || MapStrMapStrLong | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::string, std::int64_t&gt; &gt; ` || MapStrMapLongInt | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::int64_t, int&gt; &gt; ` || MapStrMapLongStr | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::int64_t, std::string&gt; &gt; ` || MapStrMapLongFloat | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::int64_t, float&gt; &gt; ` || MapStrMapLongDouble | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::int64_t, double&gt; &gt; ` || MapStrMapLongBool | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::int64_t, bool&gt; &gt; ` || MapStrMapLongLong | `std::unordered_map&lt;std::string, std::unordered_map&lt;std::int64_t, std::int64_t&gt; &gt; ` || MapLongVecInt | `std::unordered_map&lt;std::int64_t, std::vector&lt;int&gt; &gt; ` || MapLongVecStr | `std::unordered_map&lt;std::int64_t, std::vector&lt;std::string&gt; &gt; ` || MapLongVecFloat | `std::unordered_map&lt;std::int64_t, std::vector&lt;float&gt; &gt; ` || MapLongVecDouble | `std::unordered_map&lt;std::int64_t, std::vector&lt;double&gt; &gt; ` || MapLongVecBool | `std::unordered_map&lt;std::int64_t, std::vector&lt;bool&gt; &gt; ` || MapLongVecLong | `std::unordered_map&lt;std::int64_t, std::vector&lt;std::int64_t&gt; &gt; ` || MapLongSetInt | `std::unordered_map&lt;std::int64_t, std::unordered_set&lt;int&gt; &gt; ` || MapLongSetStr | `std::unordered_map&lt;std::int64_t, std::unordered_set&lt;std::string&gt; &gt; ` || MapLongSetLong | `std::unordered_map&lt;std::int64_t, std::unordered_set&lt;std::int64_t&gt; &gt; ` || MapLongMapIntInt | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;int, int&gt; &gt; ` || MapLongMapIntStr | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;int, std::string&gt; &gt; ` || MapLongMapIntFloat | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;int, float&gt; &gt; ` || MapLongMapIntDouble | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;int, double&gt; &gt; ` || MapLongMapIntBool | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;int, bool&gt; &gt; ` || MapLongMapIntLong | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;int, std::int64_t&gt; &gt; ` || MapLongMapStrInt | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::string, int&gt; &gt; ` || MapLongMapStrStr | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::string, std::string&gt; &gt; ` || MapLongMapStrFloat | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::string, float&gt; &gt; ` || MapLongMapStrDouble | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::string, double&gt; &gt; ` || MapLongMapStrBool | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::string, bool&gt; &gt; ` || MapLongMapStrLong | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::string, std::int64_t&gt; &gt; ` || MapLongMapLongInt | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::int64_t, int&gt; &gt; ` || MapLongMapLongStr | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::int64_t, std::string&gt; &gt; ` || MapLongMapLongFloat | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::int64_t, float&gt; &gt; ` || MapLongMapLongDouble | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::int64_t, double&gt; &gt; ` || MapLongMapLongBool | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::int64_t, bool&gt; &gt; ` || MapLongMapLongLong | `std::unordered_map&lt;std::int64_t, std::unordered_map&lt;std::int64_t, std::int64_t&gt; &gt; ` |</longdescription>
</pkgmetadata>