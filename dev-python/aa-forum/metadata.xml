<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># AA Forum&lt;a name=&quot;aa-forum&quot;&gt;&lt;/a&gt;[![Badge: Version]][aa-forum on pypi][![Badge: License]][aa-forum license][![Badge: Supported Python Versions]][aa-forum on pypi][![Badge: Supported Django Versions]][aa-forum on pypi]![Badge: pre-commit][![Badge: Code Style: black]][black code formatter documentation][![Badge: Support Discord]][support discord][![Badge: Automated Tests]][automated tests on github][![Badge: Code Coverage]][aa-forum on codecov][![Badge: Translation Status]][weblate engage][![Badge: Contributor Covenant]][code of conduct][![Badge: Buy me a coffee]][ppfeufer on ko-fi]Simple forum app for [Alliance Auth]______________________________________________________________________&lt;!-- mdformat-toc start --slug=github --maxlevel=6 --minlevel=1 --&gt;- [AA Forum](#aa-forum)  - [⚠️ Before You Install This Module ⚠️](#%E2%9A%A0%EF%B8%8F-before-you-install-this-module-%E2%9A%A0%EF%B8%8F)  - [Overview](#overview)    - [Features](#features)    - [Screenshots](#screenshots)      - [Forum Index](#forum-index)      - [Topic Overview / Board Index](#topic-overview--board-index)      - [Topic View](#topic-view)      - [Start New Topic (ckEditor)](#start-new-topic-ckeditor)      - [Admin View](#admin-view)  - [Installation](#installation)    - [Important: Please Make Sure You Meet All Preconditions Before You Proceed:](#important-please-make-sure-you-meet-all-preconditions-before-you-proceed)    - [Step 1: Install the Package](#step-1-install-the-package)    - [Step 2: Configure Alliance Auth](#step-2-configure-alliance-auth)      - [Settings in `/home/allianceserver/myauth/myauth/settings/local.py`](#settings-in-homeallianceservermyauthmyauthsettingslocalpy)      - [Settings in `/home/allianceserver/myauth/myauth/urls.py`](#settings-in-homeallianceservermyauthmyauthurlspy)    - [Step 3: Configure Your Webserver](#step-3-configure-your-webserver)      - [Apache](#apache)      - [Nginx](#nginx)    - [Step 4: Finalizing the Installation](#step-4-finalizing-the-installation)    - [Step 5: Setting up Permissions](#step-5-setting-up-permissions)  - [Changelog](#changelog)  - [Translation Status](#translation-status)  - [Contributing](#contributing)&lt;!-- mdformat-toc end --&gt;______________________________________________________________________## ⚠️ Before You Install This Module ⚠️&lt;a name=&quot;%E2%9A%A0%EF%B8%8F-before-you-install-this-module-%E2%9A%A0%EF%B8%8F&quot;&gt;&lt;/a&gt;This module needs quite some configuration done before working properly. You need tomodify your Apache/Nginx configuration as well as the global URL config of AllianceAuth. So please only install if you know what you're doing/feel comfortable makingthese kinds of changes. For your own sanity, and mine :-)## Overview&lt;a name=&quot;overview&quot;&gt;&lt;/a&gt;### Features&lt;a name=&quot;features&quot;&gt;&lt;/a&gt;- Simple permission system. Only 2 permissions. (&quot;has_access&quot; and &quot;can_manage&quot;)- Simple administration, no maze to click through to get where you want to go.- Categories and boards are sortable via drag and drop in the admin view.- Mass creation of boards with a new category.- Boards can be restricted to 1 or more groups, boards without restrictions are  visible for everyone who has access to the forum.- Announcement boards where only certain users can start topics.- Child boards (1 Level), which inherit their access restrictions from their parent.- CKEditor with image upload.- Unread topics counter as a number on the &quot;Forum&quot; link in the left navigation.- Optional notifications about new topics in a board via Discord webhooks.- Forum profile for each user.- Personal Messages.  - Optional Discord PM for new personal messages.&lt;br&gt;    This feature is disabled by default, can be enabled by each user in their forum    profile. Needs one of the following applications installed:    - [discordproxy]    - [AA-Discordbot]### Screenshots&lt;a name=&quot;screenshots&quot;&gt;&lt;/a&gt;#### Forum Index&lt;a name=&quot;forum-index&quot;&gt;&lt;/a&gt;![Screenshot: Forum Index]#### Topic Overview / Board Index&lt;a name=&quot;topic-overview--board-index&quot;&gt;&lt;/a&gt;![Screenshot: Topic Overview / Board Index]#### Topic View&lt;a name=&quot;topic-view&quot;&gt;&lt;/a&gt;![Screenshot: Topic View]#### Start New Topic (ckEditor)&lt;a name=&quot;start-new-topic-ckeditor&quot;&gt;&lt;/a&gt;![Screenshot: Start new Topic]#### Admin View&lt;a name=&quot;admin-view&quot;&gt;&lt;/a&gt;![Screenshot: Admin View]## Installation&lt;a name=&quot;installation&quot;&gt;&lt;/a&gt;#### Important: Please Make Sure You Meet All Preconditions Before You Proceed:&lt;a name=&quot;important-please-make-sure-you-meet-all-preconditions-before-you-proceed&quot;&gt;&lt;/a&gt;- AA Forum is a plugin for Alliance Auth. If you don't have Alliance Auth running  already, please install it first before proceeding. (see the official  [AA installation guide] for details)- AA Forum needs a couple of changes made to your Webserver and Alliance Auth  configuration. So make sure you know how to do so. The steps needed will be  described in this document, but you need to understand what will be changed.### Step 1: Install the Package&lt;a name=&quot;step-1-install-the-package&quot;&gt;&lt;/a&gt;Make sure you're in the virtual environment (venv) of your Alliance Authinstallation Then install the latest release directly from PyPi.```shellpip install aa-forum```### Step 2: Configure Alliance Auth&lt;a name=&quot;step-2-configure-alliance-auth&quot;&gt;&lt;/a&gt;#### Settings in `/home/allianceserver/myauth/myauth/settings/local.py`&lt;a name=&quot;settings-in-homeallianceservermyauthmyauthsettingslocalpy&quot;&gt;&lt;/a&gt;This is fairly simple, configure your AA settings (`local.py`) as follows:```python# AA ForumINSTALLED_APPS += [    &quot;ckeditor&quot;,    &quot;ckeditor_uploader&quot;,    &quot;django_ckeditor_youtube_plugin&quot;,    &quot;aa_forum&quot;,  # https://github.com/ppfeufer/aa-forum]if &quot;ckeditor&quot; in INSTALLED_APPS:    # ckEditor    import ckeditor.configs    MEDIA_URL = &quot;/media/&quot;    MEDIA_ROOT = &quot;/var/www/myauth/media/&quot;    X_FRAME_OPTIONS = &quot;SAMEORIGIN&quot;    CKEDITOR_UPLOAD_PATH = &quot;uploads/&quot;    CKEDITOR_RESTRICT_BY_USER = True    CKEDITOR_ALLOW_NONIMAGE_FILES = False    # Editor configuration    #    # If you already have this from another app, like `aa-bulletin-board`, you don't    # need to define this again, just add it to the `CKEDITOR_CONFIGS` dict, see below    #    # You can extend and change this to your needs    # Some of the options are commented out, feel free to play around with them    ckeditor_default_config = {        &quot;width&quot;: &quot;100%&quot;,        &quot;height&quot;: &quot;45vh&quot;,        &quot;youtube_responsive&quot;: True,        &quot;youtube_privacy&quot;: True,        &quot;youtube_related&quot;: False,        &quot;youtube_width&quot;: 1920,        &quot;youtube_height&quot;: 1080,        &quot;extraPlugins&quot;: &quot;,&quot;.join(            [                &quot;uploadimage&quot;,                # &quot;div&quot;,                &quot;autolink&quot;,                # &quot;autoembed&quot;,                # &quot;embedsemantic&quot;,                &quot;clipboard&quot;,                &quot;elementspath&quot;,                # &quot;codesnippet&quot;,                &quot;youtube&quot;,            ]        ),        &quot;toolbar&quot;: [            {                &quot;name&quot;: &quot;styles&quot;,                &quot;items&quot;: [                    &quot;Styles&quot;,                    &quot;Format&quot;,                    # &quot;Font&quot;,                    # &quot;FontSize&quot;,                ],            },            {                &quot;name&quot;: &quot;basicstyles&quot;,                &quot;items&quot;: [                    &quot;Bold&quot;,                    &quot;Italic&quot;,                    &quot;Underline&quot;,                    &quot;Strike&quot;,                    # &quot;Subscript&quot;,                    # &quot;Superscript&quot;,                    # &quot;-&quot;,                    # &quot;RemoveFormat&quot;,                ],            },            {                &quot;name&quot;: &quot;clipboard&quot;,                &quot;items&quot;: [                    # &quot;Cut&quot;,                    # &quot;Copy&quot;,                    # &quot;Paste&quot;,                    # &quot;PasteText&quot;,                    # &quot;PasteFromWord&quot;,                    # &quot;-&quot;,                    &quot;Undo&quot;,                    &quot;Redo&quot;,                ],            },            {                &quot;name&quot;: &quot;links&quot;,                &quot;items&quot;: [                    &quot;Link&quot;,                    &quot;Unlink&quot;,                    &quot;Anchor&quot;,                ],            },            {                &quot;name&quot;: &quot;insert&quot;,                &quot;items&quot;: [                    &quot;Image&quot;,                    &quot;Youtube&quot;,                    &quot;Table&quot;,                    &quot;HorizontalRule&quot;,                    &quot;Smiley&quot;,                    &quot;SpecialChar&quot;,                    # &quot;PageBreak&quot;,                    # &quot;Iframe&quot;,                ],            },            {                &quot;name&quot;: &quot;colors&quot;,                &quot;items&quot;: [                    &quot;TextColor&quot;,                    &quot;BGColor&quot;,                ],            },            {                &quot;name&quot;: &quot;document&quot;,                &quot;items&quot;: [                    # &quot;Source&quot;,                    # &quot;-&quot;,                    # &quot;Save&quot;,                    # &quot;NewPage&quot;,                    # &quot;Preview&quot;,                    # &quot;Print&quot;,                    # &quot;-&quot;,                    # &quot;Templates&quot;,                ],            },        ],    }    # Add the external YouTube plugin    aa_forum__external_plugin_resources = [        (            &quot;youtube&quot;,            &quot;/static/ckeditor/ckeditor/plugins/youtube/&quot;,            &quot;plugin.min.js&quot;,        )    ]    # Put it all together    CKEDITOR_CONFIGS = {        &quot;default&quot;: ckeditor.configs.DEFAULT_CONFIG,        &quot;aa_forum&quot;: ckeditor_default_config,    }    CKEDITOR_CONFIGS[&quot;aa_forum&quot;][        &quot;external_plugin_resources&quot;    ] = aa_forum__external_plugin_resources```#### Settings in `/home/allianceserver/myauth/myauth/urls.py`&lt;a name=&quot;settings-in-homeallianceservermyauthmyauthurlspy&quot;&gt;&lt;/a&gt;Now let's move on to editing the global URL configuration of Alliance Auth. To do so,you need to open `/home/allianceserver/myauth/myauth/urls.py` and change thefollowing block right before the `handler` definitions:```python# URL configuration for cKeditorfrom django.apps import appsif apps.is_installed(&quot;ckeditor&quot;):    # Django    from django.contrib.auth.decorators import login_required    from django.views.decorators.cache import never_cache    # ckEditor    from ckeditor_uploader import views as ckeditor_views    urlpatterns = [        re_path(            r&quot;^upload/&quot;, login_required(ckeditor_views.upload), name=&quot;ckeditor_upload&quot;        ),        re_path(            r&quot;^browse/&quot;,            never_cache(login_required(ckeditor_views.browse)),            name=&quot;ckeditor_browse&quot;,        ),    ] + urlpatterns```After this, your `urls.py` should look similar to this:```pythonfrom django.urls import include, re_pathfrom allianceauth import urls# Alliance auth urlsurlpatterns = [    re_path(r&quot;&quot;, include(urls)),]# URL configuration for cKeditorfrom django.apps import appsif apps.is_installed(&quot;ckeditor&quot;):    # Django    from django.contrib.auth.decorators import login_required    from django.views.decorators.cache import never_cache    # ckEditor    from ckeditor_uploader import views as ckeditor_views    urlpatterns = [        re_path(            r&quot;^upload/&quot;, login_required(ckeditor_views.upload), name=&quot;ckeditor_upload&quot;        ),        re_path(            r&quot;^browse/&quot;,            never_cache(login_required(ckeditor_views.browse)),            name=&quot;ckeditor_browse&quot;,        ),    ] + urlpatternshandler500 = &quot;allianceauth.views.Generic500Redirect&quot;handler404 = &quot;allianceauth.views.Generic404Redirect&quot;handler403 = &quot;allianceauth.views.Generic403Redirect&quot;handler400 = &quot;allianceauth.views.Generic400Redirect&quot;```### Step 3: Configure Your Webserver&lt;a name=&quot;step-3-configure-your-webserver&quot;&gt;&lt;/a&gt;Your webserver needs to know from where to serve the uploaded images, of course, so wehave to tell it.#### Apache&lt;a name=&quot;apache&quot;&gt;&lt;/a&gt;In your vhost configuration, you have a line `ProxyPassMatch ^/static !`, which tellsthe server where to find all the static files. We're adding a similar line for themedia, right below that one.Add the following right below the static proxy match:```apacheProxyPassMatch ^/media !```Now we also need to let the server know where to find the media directory we justconfigured the proxy for. To do so, add a new Alias to your configuration. This canbe done right below the already existing Alias for `/static`:```apacheAlias &quot;/media&quot; &quot;/var/www/myauth/media/&quot;```At last, a &quot;Directory&quot; rule is needed as well. Add the following code below the alreadyexisting Directory rule for the static files:```apache&lt;Directory &quot;/var/www/myauth/media/&quot;&gt;    Require all granted&lt;/Directory&gt;```So the whole block should now look like this:```apacheProxyPassMatch ^/static !ProxyPassMatch ^/media !  # *** NEW proxy ruleProxyPass / http://127.0.0.1:8000/ProxyPassReverse / http://127.0.0.1:8000/ProxyPreserveHost OnAlias &quot;/static&quot; &quot;/var/www/myauth/static/&quot;Alias &quot;/media&quot; &quot;/var/www/myauth/media/&quot;&lt;Directory &quot;/var/www/myauth/static/&quot;&gt;    Require all granted&lt;/Directory&gt;&lt;Directory &quot;/var/www/myauth/media/&quot;&gt;    Require all granted&lt;/Directory&gt;```Restart your Apache webserver.#### Nginx&lt;a name=&quot;nginx&quot;&gt;&lt;/a&gt;In order to let Nginx know where to find the uploaded files, you need to add a newlocation rule to the configuration. Add the following right below the definition foryour &quot;static&quot; location.```nginxlocation /media {    alias /var/www/myauth/media;    autoindex off;}```Restart your Nginx webserver.### Step 4: Finalizing the Installation&lt;a name=&quot;step-4-finalizing-the-installation&quot;&gt;&lt;/a&gt;Run static files collection and migrations```shellpython manage.py collectstaticpython manage.py migrate```Restart your supervisor services for Auth### Step 5: Setting up Permissions&lt;a name=&quot;step-5-setting-up-permissions&quot;&gt;&lt;/a&gt;Now it's time to set up access permissions for your new module. You can do so inyour admin backend.| ID             | Description                                                      | Notes                                                                                                                                                                                                                                                                                                                                             || :------------- | :--------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ || `basic_access` | Can access the AA-Forum module                                   | Grants access to the forum                                                                                                                                                                                                                                                                                                                        || `manage_forum` | Can manage the AA-Forum module (Categories, topics and messages) | Users with this permission can create, edit and delete boards and categories in the &quot;Administration&quot; view. They can also modify and delete messages and topics in the &quot;Forum&quot; view. **Users with this permission are not bound by group restrictions and have access to all boards and topics, so choose wisely who is getting this permission.** |## Changelog&lt;a name=&quot;changelog&quot;&gt;&lt;/a&gt;See [CHANGELOG.md]## Translation Status&lt;a name=&quot;translation-status&quot;&gt;&lt;/a&gt;[![Translation status](https://weblate.ppfeufer.de/widget/alliance-auth-apps/aa-forum/multi-auto.svg)](https://weblate.ppfeufer.de/engage/alliance-auth-apps/)Do you want to help translate this app into your language or improve the existingtranslation? - [Join our team of translators][weblate engage]!## Contributing&lt;a name=&quot;contributing&quot;&gt;&lt;/a&gt;Do you want to contribute to this project? That's cool!Please make sure to read the [Contribution Guidelines].(I promise, it's not much, just some basics)&lt;!-- Inline Links --&gt;[aa installation guide]: https://allianceauth.readthedocs.io/en/latest/installation/allianceauth.html[aa-discordbot]: https://github.com/pvyParts/allianceauth-discordbot &quot;AA-Discordbot&quot;[aa-forum license]: https://github.com/ppfeufer/aa-forum/blob/master/LICENSE[aa-forum on codecov]: https://codecov.io/gh/ppfeufer/aa-forum[aa-forum on pypi]: https://pypi.org/project/aa-forum/[alliance auth]: https://gitlab.com/allianceauth/allianceauth[automated tests on github]: https://github.com/ppfeufer/aa-forum/actions/workflows/automated-checks.yml[badge: automated tests]: https://github.com/ppfeufer/aa-forum/actions/workflows/automated-checks.yml/badge.svg &quot;Automated Tests&quot;[badge: buy me a coffee]: https://ko-fi.com/img/githubbutton_sm.svg &quot;Buy me a coffee&quot;[badge: code coverage]: https://codecov.io/gh/ppfeufer/aa-forum/branch/master/graph/badge.svg &quot;Code Coverage&quot;[badge: code style: black]: https://img.shields.io/badge/code%20style-black-000000.svg &quot;Code Style: black&quot;[badge: contributor covenant]: https://img.shields.io/badge/Contributor%20Covenant-2.1-4baaaa.svg &quot;Contributor Covenant&quot;[badge: license]: https://img.shields.io/github/license/ppfeufer/aa-forum &quot;License&quot;[badge: pre-commit]: https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&amp;logoColor=white &quot;pre-commit&quot;[badge: support discord]: https://img.shields.io/discord/790364535294132234?label=discord &quot;Support Discord&quot;[badge: supported django versions]: https://img.shields.io/pypi/djversions/aa-forum?label=django &quot;Supported Django Versions&quot;[badge: supported python versions]: https://img.shields.io/pypi/pyversions/aa-forum &quot;Supported Python Versions&quot;[badge: translation status]: https://weblate.ppfeufer.de/widget/alliance-auth-apps/aa-forum/svg-badge.svg &quot;Translation Status&quot;[badge: version]: https://img.shields.io/pypi/v/aa-forum?label=release &quot;Version&quot;[black code formatter documentation]: http://black.readthedocs.io/en/latest/[changelog.md]: https://github.com/ppfeufer/aa-forum/blob/master/CHANGELOG.md[code of conduct]: https://github.com/ppfeufer/aa-forum/blob/master/CODE_OF_CONDUCT.md[contribution guidelines]: https://github.com/ppfeufer/aa-forum/blob/master/CONTRIBUTING.md[discordproxy]: https://gitlab.com/ErikKalkoken/discordproxy[ppfeufer on ko-fi]: https://ko-fi.com/N4N8CL1BY[screenshot: admin view]: https://raw.githubusercontent.com/ppfeufer/aa-forum/master/aa_forum/docs/images/admin-view.jpg &quot;Admin View&quot;[screenshot: forum index]: https://raw.githubusercontent.com/ppfeufer/aa-forum/master/aa_forum/docs/images/forum-index.jpg &quot;Forum Index&quot;[screenshot: start new topic]: https://raw.githubusercontent.com/ppfeufer/aa-forum/master/aa_forum/docs/images/start-new-topic.jpg &quot;Start new Topic (ckEditor)&quot;[screenshot: topic overview / board index]: https://raw.githubusercontent.com/ppfeufer/aa-forum/master/aa_forum/docs/images/topic-overview.jpg &quot;Topic Overview / Board Index&quot;[screenshot: topic view]: https://raw.githubusercontent.com/ppfeufer/aa-forum/master/aa_forum/docs/images/topic-view.jpg &quot;Topic View&quot;[support discord]: https://discord.gg/zmh52wnfvM[weblate engage]: https://weblate.ppfeufer.de/engage/alliance-auth-apps/ &quot;Weblate Translations&quot;</longdescription>
</pkgmetadata>