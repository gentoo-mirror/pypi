<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Cisco IntersightCisco Intersight is a cloud operations platform that delivers intelligent visualization, optimization, and orchestration for applications and infrastructure across your hybrid environment. With Intersight, you get all of the benefits of SaaS delivery and full lifecycle management of distributed Intersight-connected servers and third-party storage across data centers, remote sites, branch offices, and edge environments. This empowers you to analyze, update, fix, and automate your environment in ways that were not possible with prior generationsâ€™ tools. As a result, your organization can achieve significant TCO savings and deliver applications faster in support of new business initiatives.The Cisco Intersight API is a programmatic interface that uses the REST architecture to provide access to the Intersight Management Information Model. The Intersight Python SDK is generated based on the Cisco Intersight OpenAPI 3.x specification. The latest specification can be downloaded from [here](https://intersight.com/apidocs/downloads/). The Cisco Intersight Python SDK is updated frequently to be in sync with the OpenAPI version deployed at https://intersight.com# Getting Started1. [ Installation ](#installation)    1.1. [ Requirements ](#requirements)    1.2. [ Install ](#install)2. [ Authentication ](#authentication)3. [ Creating an Object ](#creating-an-object)4. [ Creating an Object from JSON ](#creating-an-object-from-json)5. [ Reading Objects ](#reading-an-object)    5.1. [ Reading Objects Using a Filter ](#reading-an-object-using-a-filter)6. [ Updating Objects ](#updating-an-object)7. [ Deleting Objects ](#deleting-an-object)8. [ Examples](#examples)    8.1. [ Example - Server Configuration ](#server-configuration)    8.2. [ Example - Firmware Upgrade ](#firmware-upgrade)    8.3. [ Example - OS Install ](#os-install)9. [ Targets ](#targets)    9.1. [ Claiming a Target ](#claiming-a-target)    9.2. [ Unclaiming a Target ](#unclaiming-a-target)    9.3. [ Claiming an Appliance ](#claiming-an-appliance)10. [ Triggering a Workflow ](#triggering-a-workflow)11. [ Monitoring a Workflow ](#monitoring-a-workflow)12. [ Debugging ](#debugging)&lt;a name=&quot;installation&quot;&gt;&lt;/a&gt;## 1. Installation&lt;a name=&quot;requirements&quot;&gt;&lt;/a&gt;### 1.1. Requirements- Python &gt;= 3.6&lt;a name=&quot;install&quot;&gt;&lt;/a&gt;### 1.2. Install- The latest intersight package can be installed using one of the following,     `pip install intersight`    `pip install git+https://github.com/CiscoDevNet/intersight-python`    `python setup.py install --user`&lt;a name=&quot;authentication&quot;&gt;&lt;/a&gt;## 2. Authentication- Start with creating an API Client object by specifying an API Key and an API Secret file path.- This method also specifies which endpoint will the client connect to.- There is no explicit login when using API Client and Secret. Every message carries the information required for authentication.```pythonimport intersightimport redef get_api_client(api_key_id, api_secret_file, endpoint=&quot;https://intersight.com&quot;):    with open(api_secret_file, 'r') as f:        api_key = f.read()    if re.search('BEGIN RSA PRIVATE KEY', api_key):        # API Key v2 format        signing_algorithm = intersight.signing.ALGORITHM_RSASSA_PKCS1v15        signing_scheme = intersight.signing.SCHEME_RSA_SHA256        hash_algorithm = intersight.signing.HASH_SHA256    elif re.search('BEGIN EC PRIVATE KEY', api_key):        # API Key v3 format        signing_algorithm = intersight.signing.ALGORITHM_ECDSA_MODE_DETERMINISTIC_RFC6979        signing_scheme = intersight.signing.SCHEME_HS2019        hash_algorithm = intersight.signing.HASH_SHA256    configuration = intersight.Configuration(        host=endpoint,        signing_info=intersight.signing.HttpSigningConfiguration(            key_id=api_key_id,            private_key_path=api_secret_file,            signing_scheme=signing_scheme,            signing_algorithm=signing_algorithm,            hash_algorithm=hash_algorithm,            signed_headers=[                intersight.signing.HEADER_REQUEST_TARGET,                intersight.signing.HEADER_HOST,                intersight.signing.HEADER_DATE,                intersight.signing.HEADER_DIGEST,            ]        )    )        # if you want to turn off certificate verification    # configuration.verify_ssl = False    return intersight.ApiClient(configuration)```Once an API Client is created, it can be used to communicate with the Intersight server.```pythonfrom intersight.api import boot_apifrom intersight.model.boot_precision_policy import BootPrecisionPolicyapi_client = get_api_client(&quot;api_key&quot;, &quot;~/api_secret_file_path&quot;)# Create an api instance of the correct API typeapi_instance = boot_api.BootApi(api_client)# Create an object locally and populate the object propertiesboot_precision_policy = BootPrecisionPolicy()# Create an object in Intersightapi_response = api_instance.create_boot_precision_policy(boot_precision_policy)    ```&lt;a name=&quot;creating-an-object&quot;&gt;&lt;/a&gt;## 3. Creating an ObjectThis step helps user to create an object with the help of python intersight SDK.In the below example we are going to create a boot precision policy.First the instance of Model: BootPrecisionPolicy is created and then all the attributesrequired to create the policy is set using the model object.```pythonfrom intersight.api import boot_apifrom intersight.model.boot_precision_policy import BootPrecisionPolicyfrom intersight.model.boot_device_base import BootDeviceBasefrom intersight.model.organization_organization_relationship import OrganizationOrganizationRelationshipfrom pprint import pprintimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)def create_boot_local_cdd():    # Creating an instance of boot_local_cdd    boot_local_cdd = BootDeviceBase(class_id=&quot;boot.LocalCdd&quot;,                                    object_type=&quot;boot.LocalCdd&quot;,                                    name=&quot;local_cdd1&quot;,                                    enabled=True)    return boot_local_cdddef create_boot_local_disk():    # Creating an instance of boot_local_disk    boot_local_disk = BootDeviceBase(class_id=&quot;boot.LocalDisk&quot;,                                     object_type=&quot;boot.LocalDisk&quot;,                                     name=&quot;local_disk1&quot;,                                     enabled=True)    return boot_local_diskdef create_organization():    # Creating an instance of organization    organization = OrganizationOrganizationRelationship(class_id=&quot;mo.MoRef&quot;,                                                        object_type=&quot;organization.Organization&quot;)    return organization# Create an instance of the API class.api_instance = boot_api.BootApi(api_client)# Create an instance of local_cdd, local_disk, organization and list of boot_devices.boot_local_cdd = create_boot_local_cdd()boot_local_disk = create_boot_local_disk()organization = create_organization()boot_devices = [    boot_local_disk,    boot_local_cdd,]# BootPrecisionPolicy | The 'boot.PrecisionPolicy' resource to create.boot_precision_policy = BootPrecisionPolicy()# Setting all the attributes for boot_precison_policy instance.boot_precision_policy.name = &quot;sample_boot_policy1&quot;boot_precision_policy.description = &quot;sample boot precision policy&quot;boot_precision_policy.boot_devices = boot_devicesboot_precision_policy.organization = organization# example passing only required values which don't have defaults settry:    # Create a 'boot.PrecisionPolicy' resource.    api_response = api_instance.create_boot_precision_policy(boot_precision_policy)    pprint(api_response)except intersight.ApiException as e:    print(&quot;Exception when calling BootApi-&gt;create_boot_precision_policy: %s\n&quot; % e)```&lt;a name=&quot;creating-an-object-from-json&quot;&gt;&lt;/a&gt;## 4. Creating an Object from JSONThis step helps user to create an object with the help of python intersight SDK.In the below example we are going to create a boot precision policy.The program will parse the input json file to fetch the json payload and use this data.The instance of Model: BootPrecisionPolicy is created using parsed json data is as a keyword arguement.Start with creating a json file contain the data which will be used to create boot precision policy.Create a file data.json with the following content:`data.json:````json{  &quot;Name&quot;:&quot;sample_boot_policy1&quot;,  &quot;ObjectType&quot;:&quot;boot.PrecisionPolicy&quot;,  &quot;ClassId&quot;:&quot;boot.PrecisionPolicy&quot;,  &quot;Description&quot;:&quot;Create boot precision policy.&quot;,  &quot;BootDevices&quot;:[     {        &quot;ClassId&quot;:&quot;boot.LocalCdd&quot;,        &quot;ObjectType&quot;:&quot;boot.LocalCdd&quot;,        &quot;Enabled&quot;:true,        &quot;Name&quot;:&quot;local_cdd&quot;     },     {        &quot;ClassId&quot;:&quot;boot.LocalDisk&quot;,        &quot;ObjectType&quot;:&quot;boot.LocalDisk&quot;,        &quot;Enabled&quot;:true,        &quot;Name&quot;:&quot;local_disk&quot;     }  ],  &quot;Organization&quot;:{     &quot;ObjectType&quot;:&quot;organization.Organization&quot;,     &quot;ClassId&quot;:&quot;mo.MoRef&quot;  }}``````pythonimport jsonfrom intersight.api import boot_apifrom intersight.model.boot_precision_policy import BootPrecisionPolicyfrom intersight.model.boot_device_base import BootDeviceBasefrom intersight.model.organization_organization_relationship import OrganizationOrganizationRelationshipfrom pprint import pprintimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)# Create an instance of the API class.api_instance = boot_api.BootApi(api_client)data_json_file_path = &quot;data.json&quot;with open(data_json_file_path, &quot;r&quot;) as json_data_file:    json_data = json_data_file.read()# Loading the json objects into python dictionary.data = json.loads(json_data)# BootPrecisionPolicy | The 'boot.PrecisionPolicy' resource to create.boot_precision_policy = BootPrecisionPolicy(**data, _spec_property_naming=True,                                            _configuration=api_client.configuration)# example passing only required values which don't have defaults settry:    # Create a 'boot.PrecisionPolicy' resource.    api_response = api_instance.create_boot_precision_policy(boot_precision_policy)    pprint(api_response)except intersight.ApiException as e:    print(&quot;Exception when calling BootApi-&gt;create_boot_precision_policy: %s\n&quot; % e)```&lt;a name=&quot;reading-an-object&quot;&gt;&lt;/a&gt;## 5. Reading ObjectsThis step helps user to read an object with the help of python intersight SDK.In the below example we are going to read all the results for boot precision policy.```pythonfrom intersight.api import boot_apifrom pprint import pprintimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)# Create an instance of the API classapi_instance = boot_api.BootApi(api_client)# example passing only required values which don't have defaults set# and optional valuestry:    # Read a 'boot.PrecisionPolicy' resource.    api_response = api_instance.get_boot_precision_policy_list()    pprint(api_response)except intersight.ApiException as e:    print(&quot;Exception when calling BootApi-&gt;get_boot_precision_policy_list: %s\n&quot; % e)```&lt;a name=&quot;reading-an-object-using-a-filter&quot;&gt;&lt;/a&gt;### 5.1. Reading Objects Using a FilterIntersight supports oData query format to return a filtered list of objects.An example is shown below. Here we filter devices that are in connected state.```pythonfrom intersight.api import asset_apiapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)asset_api = asset_api.AssetApi(api_client) kwargs = dict(filter=&quot;ConnectionStatus eq 'Connected'&quot;)# Get all device registration objects that are in connected stateapi_result= api.get_asset_device_registration_list(**kwargs)for device in api_result.results:    print(device.device_ip_address[0])```&lt;a name=&quot;updating-an-object&quot;&gt;&lt;/a&gt;## 6. Updating ObjectsThis step helps user to update an object with the help of python intersight SDK.In the below example we are going to update a boot precision policy.First the instance of Model: BootPrecisionPolicy is created and then all the attributesrequired to update the policy is set using the model object.The read object operation is performed to fetch:- Moid associated to boot precision policy.- Moid associated to organization to update the appropriate fields.In our example the first result of the response is updated i.e. first entry among all the entries for boot precision policy is updated.```pythonfrom intersight.api import boot_apifrom intersight.model.boot_precision_policy import BootPrecisionPolicyfrom intersight.model.boot_device_base import BootDeviceBasefrom intersight.model.organization_organization_relationship import OrganizationOrganizationRelationshipfrom pprint import pprintimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)def create_boot_sdcard():    # Creating an instance of boot_hdd_device    boot_sdcard = BootDeviceBase(class_id=&quot;boot.SdCard&quot;,                                 object_type=&quot;boot.SdCard&quot;,                                 name=&quot;sdcard1&quot;,                                 enabled=True)    return boot_sdcarddef create_boot_iscsi():    # Creating an instance of boot_iscsi    boot_iscsi = BootDeviceBase(class_id=&quot;boot.Iscsi&quot;,                                object_type=&quot;boot.Iscsi&quot;,                                name=&quot;iscsi1&quot;,                                enabled=True)    return boot_iscsidef create_boot_pxe():    # Creating an instance of boot_pxe    boot_pxe = BootDeviceBase(class_id=&quot;boot.Pxe&quot;,                              object_type=&quot;boot.Pxe&quot;,                              name=&quot;pxe1&quot;,                              enabled=True,                              interface_name=&quot;pxe1&quot;)    return boot_pxedef get_boot_precision_policy(api_client):    # Enter a context with an instance of the API client    with api_client:        # Create an instance of the API class        api_instance = boot_api.BootApi(api_client)        # example passing only required values which don't have defaults set        # and optional values        try:            # Read a 'boot.PrecisionPolicy' resource.            api_response = api_instance.get_boot_precision_policy_list()        except intersight.ApiException as e:            print(&quot;Exception when calling BootApi-&gt;get_boot_precision_policy_list: %s\n&quot; % e)    return api_responsedef create_organization(moid):    # Creating an instance of organization    organization = OrganizationOrganizationRelationship(class_id=&quot;mo.MoRef&quot;,                                                        object_type=&quot;organization.Organization&quot;,                                                        moid=moid)    return organization# Create an instance of the API class.api_instance = boot_api.BootApi(api_client)# Getting the response for existing object.response = get_boot_precision_policy(api_client)# Handling error scenario if get_boot_precision_policy does not return any entry.if not response.results:    raise NotFoundException(reason=&quot;The response does not contain any entry for boot precision policy. &quot;                                   &quot;Please create a boot precision policy and then update it.&quot;)# Fetch the organization Moid and boot precision policy moid from the Result's first entry.organization_moid = response.results[0].organization['moid']moid = response.results[0].moid# Create an instance of hdd_device, iscsi, pxe, organization and list of boot_devices.boot_hdd_device = create_boot_sdcard()boot_iscsi = create_boot_iscsi()boot_pxe = create_boot_pxe()organization = create_organization(organization_moid)boot_devices = [    boot_hdd_device,    boot_iscsi,    boot_pxe,]# BootPrecisionPolicy | The 'boot.PrecisionPolicy' resource to create.boot_precision_policy = BootPrecisionPolicy()# Setting all the attributes for boot_precison_policy instance.boot_precision_policy.name = &quot;updated_boot_policy1&quot;boot_precision_policy.description = &quot;Updated boot precision policy&quot;boot_precision_policy.boot_devices = boot_devicesboot_precision_policy.organization = organization# example passing only required values which don't have defaults settry:    # Update a 'boot.PrecisionPolicy' resource.    api_response = api_instance.update_boot_precision_policy(        boot_precision_policy=boot_precision_policy,        moid=moid)    pprint(api_response)except intersight.ApiException as e:    print(&quot;Exception when calling BootApi-&gt;update_boot_precision_policy: %s\n&quot; % e)```&lt;a name=&quot;deleting-an-object&quot;&gt;&lt;/a&gt;## 7. Deleting ObjectsThis step helps user to delete an object with the help of python intersight SDK.In the below example we are going to delete a boot precision policy.The read object operation is performed to fetch:- Moid associated to boot precision policy.In our example the first result of the response is deleted i.e. first entry among all the entries for boot precision policy is deleted.```pythonfrom intersight.api import boot_apifrom intersight.exceptions import NotFoundExceptionfrom pprint import pprintimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)def get_boot_precision_policy(api_client):    # Enter a context with an instance of the API client    with api_client:        # Create an instance of the API class        api_instance = boot_api.BootApi(api_client)        # example passing only required values which don't have defaults set        # and optional values        try:            # Read a 'boot.PrecisionPolicy' resource.            api_response = api_instance.get_boot_precision_policy_list()        except intersight.ApiException as e:            print(&quot;Exception when calling BootApi-&gt;get_boot_precision_policy_list: %s\n&quot; % e)    return api_response# Create an instance of the API classapi_instance = boot_api.BootApi(api_client)# Getting the response for existing object.response = get_boot_precision_policy(api_client)# Handling error scenario if get_boot_precision_policy does not return any entry.if not response.results:    raise NotFoundException(reason=&quot;The response does not contain any entry for boot precision policy. &quot;                                   &quot;Please create a boot precision policy and then delete it.&quot;)# Fetching the moid from the Result's first entry.moid = response.results[0].moid# example passing only required values which don't have defaults settry:    # Delete a 'boot.PrecisionPolicy' resource.    api_instance.delete_boot_precision_policy(moid)    print(f&quot;Deletion for moid: %s was successful&quot; % moid)except intersight.ApiException as e:    print(&quot;Exception when calling BootApi-&gt;delete_boot_precision_policy: %s\n&quot; % e)```&lt;a name=&quot;examples&quot;&gt;&lt;/a&gt;## 8. Examples&lt;a name=&quot;server-configuration&quot;&gt;&lt;/a&gt;### 8.1. Example: Server ConfigurationPlease refer [Server Configuration](https://github.com/cisco-intersight/intersight_python_examples/blob/main/examples/server_configuration/server_configuration.py)&lt;a name=&quot;firmware-upgrade&quot;&gt;&lt;/a&gt;### 8.2. Example: Firmware UpgradePlease refer [Direct Firmware Upgrade](https://github.com/cisco-intersight/intersight_python_examples/blob/main/examples/firmware_upgrade/firmware_upgrade_direct.py)Please refer [Network Firmware Upgrade](https://github.com/cisco-intersight/intersight_python_examples/blob/main/examples/firmware_upgrade/firmware_upgrade_network.py)&lt;a name=&quot;os-install&quot;&gt;&lt;/a&gt;### 8.3. Example: OS InstallPlease refer [OS Install](https://github.com/cisco-intersight/intersight_python_examples/blob/main/examples/os_install/os_install.py)&lt;a name=&quot;targets&quot;&gt;&lt;/a&gt;## 9. Targets&lt;a name=&quot;claiming-a-target&quot;&gt;&lt;/a&gt;### 9.1. Claiming a Target```pythonfrom intersight.api import asset_apifrom intersight.model.asset_device_claim import AssetDeviceClaimfrom pprint import pprintimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)api_instance = asset_api.AssetApi(api_client)# AssetTarget | The 'asset.Target' resource to create.asset_target = AssetDeviceClaim()# setting claim_code and device_idasset_target.security_token = &quot;2Nxxx-int&quot;asset_target.serial_number = &quot;WZPxxxxxFMx&quot;# Post the above payload to claim a targettry:    # Create a 'asset.Target' resource.    claim_resp = api_instance.create_asset_device_claim(asset_target)    pprint(claim_resp)except intersight.ApiException as e:    print(&quot;Exception when calling AssetApi-&gt;create_asset_device_claim: %s\n&quot; % e)```&lt;a name=&quot;unclaiming-a-target&quot;&gt;&lt;/a&gt;### 9.2. Unclaiming a Target```pythonfrom intersight.api import asset_apiimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)api_instance = asset_api.AssetApi(api_client)# To find out all the connected devices.kwargs = dict(filter=&quot;ConnectionStatus eq 'Connected'&quot;)# Get all registered target.api_result= api.get_asset_device_registration_list(**kwargs)try:    for device in api_result.results:        # You need to provide the IP address of the target, you need to unclaim        if &quot;10.10.10.10&quot; in device.device_ip_address:            # Deleting the target as the same we do through api            api_instance.delete_asset_device_claim(moid=device.device_claim.moid)except intersight.ApiException as e:    print(&quot;Exception when calling AssetApi-&gt;delete_asset_device_claim: %s\n&quot; % e)```&lt;a name=&quot;claiming-an-appliance&quot;&gt;&lt;/a&gt;### 9.3. Claiming an Appliance```pythonfrom intersight.api import asset_apifrom intersight.model.asset_target import AssetTargetfrom pprint import pprintimport intersightapi_key = &quot;api_key&quot;api_key_file = &quot;~/api_key_file_path&quot;api_client = get_api_client(api_key, api_key_file)api_instance = asset_api.AssetApi(api_client)# ApplianceDeviceClaim | The 'appliance.DeviceClaim' resource to create.appliance_device_claim = ApplianceDeviceClaim()# setting claim_code and device_idappliance_device_claim.username = &quot;user1&quot;appliance_device_claim.password = &quot;ChangeMe&quot;appliance_device_claim.hostname = &quot;host1&quot;appliance_device_claim.platform_type = &quot;UCSD&quot;# Post the above payload to claim a targettry:    # Create a 'appliance.DeviceClaim' resource.    claim_resp = api_instance.create_appliance_device_claim(appliance_device_claim)    pprint(claim_resp)except intersight.ApiException as e:    print(&quot;Exception when calling AssetApi-&gt;create_appliance_device_claim: %s\n&quot; % e)```&lt;a name=&quot;triggering-a-workflow&quot;&gt;&lt;/a&gt;## 10. Example : Triggering a WorkflowPlease refer [Triggering a Workflow](https://github.com/cisco-intersight/intersight_python_examples/blob/main/examples/workflow/triggering_workflow.py)&lt;a name=&quot;monitoring-a-workflow&quot;&gt;&lt;/a&gt;## 11. Example : Monitoring a WorkflowPlease refer [Monitoring a Workflow](https://github.com/cisco-intersight/intersight_python_examples/blob/main/examples/workflow/monitoring_workflow.py)&lt;a name=&quot;debugging&quot;&gt;&lt;/a&gt;## 12. Debugging</longdescription>
</pkgmetadata>