<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># P2G&lt;img src=&quot;/docs/pytest.svg&quot; alt=&quot;&quot;&gt;&lt;img src=&quot;/docs/mit.svg&quot; alt=&quot;&quot;&gt;&lt;img src=&quot;/docs/coverage.svg&quot; alt=&quot;&quot;&gt;## Demo.&lt;a href=&quot;https://youtu.be/PX818-iRb1Q&quot;&gt;&lt;img src=&quot;/docs/png/vicecenter1.png&quot; alt=&quot;link to youtube.&quot;&gt;&lt;/a&gt;## Introduction### Version 0.3.10P2G makes it simple to ensure that parts are in fixtures correctly, coordinate systems are adjusted to deal with stock placement and cope with movement and rotation of workpieces through multiple operations.P2G is a compiler; it takes Python code, some definitions of machine specific variables, a little glue and makes G-code, so far, Haas ideomatic.Thanks to magic it can do surprising things with python data structures, anything reasonably calculated statically during compilation can be used in the source, classes, dicts, and so on.It comes with a set of macro variable definitions for a Haas mill with NCD. And a few example settings for my own VF-3SSYT.## Install### From pypi```$ pip install p2g```### From github1.  fetch dependencies, rebuild and install with pip    ```    $ git clone https://github.com/0x5ac/attempt1 p2g    $ cd p2g    $ make install    ```2.  fetch dependencies and rebuild    ```    $ git clone https://github.com/0x5ac/attempt1 p2g    $ cd p2g    $ make    ```## Usage```python``````p2g - Turn Python into G-Code.Usage:  p2g [options]  &lt;srcfile&gt; [&lt;dstfile&gt;]  p2g help [ all | topics | maint | version | location | &lt;topic&gt; ]  p2g examples &lt;dstdir&gt;   For bare p2g:       p2g tram-rotary.py ~/_nc_/O{countdown}tr.nc        Makes an output of the form ~/_nc_/O1234tr.nc       p2g --func=thisone -        Read from stdin, look for the 'thisone' function and write to        to stdout.Arguments:  &lt;srcfile&gt;   Source python file. [default: stdin]  &lt;dstfile&gt;   Destination G-Code file. [default: stdout]               {countdown} in file name creates a decrementing prefix               for the output file which makes looking for the .nc in               a crowded directory less painful - it's at the top.               (It's the number of seconds until midnight, so clear               the directory once a day.)  &lt;topic&gt;      [ all | topics | maint | version | location | &lt;topic&gt; ]         all      Print all readme.         topics   List all topics.         maint    Print maintenance options.         version  Show version         location Show absdir of main         &lt;topic&gt;  Print from readme starting at topic.Options:     --job=&lt;jobname&gt;      Olabel for output code.     --function=&lt;fname&gt;   Function to be compiled,                           default is last one in source file.     --narrow             Emit comments on their own line,                           makes text fit more easily into                           a narrow program window.     --short-filenames    Emit just the lsb of filenames.```## Examplesfor a show:```$ p2g examples dstdir```---### Simple demoecho &quot;```pythonimport p2gdef simple_demo():  x = p2g.Var(199)  for y in range(10):    x += y```&quot; ⇨ `directly` ⇨```O0001 (simple_demo: 0.3.10)  #100= 199.                      (   x = Var[199]                )  #102= 0.                        (   for y in range[10]:         )N1000  IF [#102 GE 10.] GOTO 1002      (   for y in range[10]:         )  #100= #100 + #102               ( x += y                        )  #102= #102 + 1.  GOTO 1000N1002  M30%```---### Find largest number of flutes in tool table```pythonimport p2g# stop with alarm code showing largest# flute count in table.def maxflutes():    mx_flutes = p2g.Var(p2g.haas.TOOL_TBL_FLUTES[0])    for n_flutes in p2g.haas.TOOL_TBL_FLUTES:        if n_flutes &gt; mx_flutes:            mx_flutes = n_flutes    p2g.haas.MESSAGE.var = mx_flutes```⇨ `p2g maxflutes.py` ⇨```O0001 (maxflutes: 0.3.10)  #100= #1601                     ( mx_flutes = Var[haas.TOOL_TBL_FLUTES[0]])  #101= 1601.                     ( for n_flutes in haas.TOOL_TBL_FLUTES:)N1000  IF [#101 GE 1801.] GOTO 1002    ( for n_flutes in haas.TOOL_TBL_FLUTES:)  IF [#[#101] LE #100] GOTO 1003  (     if n_flutes &gt; mx_flutes:  )  #100= #[#101]                   (         mx_flutes = n_flutes  )  GOTO 1004N1003N1004  #101= #101 + 1.  GOTO 1000N1002  #3006= #100                     ( haas.MESSAGE.var = mx_flutes  )  M30%```---### Less trivial example```pythonfrom p2g import *from p2g.haas import *class SearchParams:    def __init__(self, name, search_depth, iota, delta):        self.name = name        self.its = 10        self.search_depth = search_depth        self.iota = iota        self.delta = delta        self.probe = goto.probe.work.feed(30).all        self.go = goto.feed(640).work.alldef search(cursor, sch):    # stick from class SearchParams  iterations into macro var    its = Var(sch.its)    while its &gt; 0:        # goto start point        sch.go(cursor)        # down until hit - or not.        sch.probe(z=sch.search_depth)        # if probe is below (+some slack) hit        # point, then done.        if SKIP_POS.z &lt; sch.search_depth + sch.iota:            break        # otherwise move to next point        cursor.xy += sch.delta        its -= 1    else:        sys.message(ALARM[0], f&quot;too far {sch.name}.&quot;)def less_trivial():    cursor = Var[3](2, 3, 4)    # searching right, look down 0.4&quot;, move    # 1.5&quot; right if nothing hit.    sch1 = SearchParams(name=&quot;right&quot;, search_depth=-0.4, iota=-0.1, delta=(1.5, 0))    search(cursor, sch1)```⇨ `p2g less_trival.py` ⇨```O0001 (less_trivial: 0.3.10)  #100= 2.                        ( cursor = Var[3][2, 3, 4]      )  #101= 3.  #102= 4.  #103= 10.                       ( its = Var[sch.its]            )N1000  IF [#103 LE 0.] GOTO 1002       ( while its &gt; 0:                )(     sch.go[cursor]            )  G90 G01 G55 F640. x#100 y#101 z#102  G90 G31 G55 F30. z-0.4          (     sch.probe[z=sch.search_depth])  IF [#5063 LT -0.5] GOTO 1001    (     if SKIP_POS.z &lt; sch.search_depth + sch.iota:)  #100= #100 + 1.5                (     cursor.xy += sch.delta    )  #103= #103 - 1.                 (     its -= 1                  )  GOTO 1000N1002  #3000 = 101 (too far right.)N1001  M30%```# Table of contents-   [Introduction](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#introduction)-   [Video](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#vdemo)-   [Install](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#install)-   [Usage](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#usage)-   [Examples](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#examples)-   [Variables](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#variables)-   [Coordinates](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#coordinates)-   [Expressions](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#expressions)-   [Goto](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#goto)-   [Axes](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#axes)-   [When](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#when)-   [DPRNT](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#dprnt)-   [Notes](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#notes)-   [Authors](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#authors)-   [Thanks](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#thanks)-   [Video](https://github.com/0x5ac/p2g/blob/main/docs/howto.md#video)1.  Copyright © 2023 Steve Chamberlain</longdescription>
</pkgmetadata>