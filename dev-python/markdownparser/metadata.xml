<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># MarkdownParser[![codecov](https://codecov.io/gh/luzhixing12345/MarkdownParser/branch/main/graph/badge.svg?)](https://codecov.io/gh/luzhixing12345/MarkdownParser)MarkdownParser 是一个 Markdown 语法解析器,用于实现md到html标签的转换## 安装```bashpip install markdownparser```## 快速使用```pythonimport MarkdownParserhtml = MarkdownParser.parse('# Hello World!')print(html)#&lt;div class='markdown-body'&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;/div&gt;```接口函数```python# 解析markdown textdef parse(text: str) -&gt; str:# 解析markdown 文件def parseFile(file_name: str) -&gt; str:# 见下方补充说明def parse_withtag(text: str) -&gt; str:def parseFile_withtag(file_name: str) -&gt; str:```第二个参数为可选项, `has_tag` 表示是否将## 测试```bashpython generate.py &lt;FILE_NAME&gt;# python generate.py ./testfiles/test1.md# python generate.py README.md```运行会生成index.html, 使用浏览器打开生成的index.html即可与您的Markdown编辑器的预期渲染结果对比![20230218202400](https://raw.githubusercontent.com/learner-lu/picbed/master/20230218202400.png)代码覆盖率```bashpip install coveragecoverage run -m unittestcoverage html```## 实现思路[Markdown解析器的代码实现](https://www.bilibili.com/video/BV1LA411X7X3)您可通过取消 [core.py](./MarkdownParser/core.py) 注释来获取树的结构```pythondef parse(self, text: str) -&gt; str:    # 去除空行/注释/html标签    lines = self.preprocess_parser(text)    # print(lines)    # 逐行解析,得到一颗未优化的树    root = self.block_parser(lines)    # root.info()    # 优化,得到正确的markdown解析树    tree = self.tree_parser(root)    # tree.info()    # 输出到屏幕 / 导出html文件    return tree.toHTML()```## 不支持- 四个空格变为代码段- [^1]的引用方式- Setext 形式的标题- 上标 / 下标 / 下划线## 补充说明- 生成的结果如下 `&lt;div class='markdown-body'&gt;markdown内容&lt;/div&gt;`- 代码段会根据语言加入一个类名便于后期高亮,例如 `class=&quot;language-cpp&quot;`, 未定义语言则为 `language-UNKNOWN`- 默认导出的HTML中层级任务列表会有显示问题,这是因为使用了ul+li+checkbox的方式,您需要添加以下css样式修正  ```css  .markdown-body &gt; ul&gt;li:has(input) {    padding-left: 0;    margin-bottom: 0;  }  .markdown-body  ul&gt;li:has(input)&gt;ul {    list-style-type: none;    padding-left: 8px;  }  ```- 您可以使用 `parse_withtag` 将 HashHeadBlock 提取出来组成目录树, 得到一个 `&lt;div class=&quot;header-navigator&quot;&gt;...&lt;/div&gt;` 并添加到返回的 HTML 元素中, 您可能还需要一些 js 相关的代码实现跳转, 具体可以参考 [template.html](./template.html)  ```js  let links = document.querySelectorAll('div a[href^=&quot;#&quot;]');    links.forEach(link =&gt; {      link.addEventListener('click', function(event) {        event.preventDefault();        let target = document.querySelector(this.getAttribute('href'));        target.scrollIntoView({ behavior: 'smooth' });      });    });  ```  以及一些样式美化  ```css  .header-navigator {    position: fixed;  }  ```- 如果您想添加对[Mermaid](https://mermaid.js.org/)的支持, 您可参考[mermaid plugin](https://mermaid.js.org/intro/n00b-gettingStarted.html#_2-using-mermaid-plugins)在您的html页面 `&lt;body&gt;` 末尾添加如下 `&lt;script&gt;`  ```html  &lt;script type=&quot;module&quot;&gt;    const codeBlocks = document.querySelectorAll('.language-mermaid');    codeBlocks.forEach(codeBlock =&gt; {        codeBlock.classList.remove('language-mermaid');        codeBlock.classList.add('mermaid');    });    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';    mermaid.initialize({ startOnLoad: true });  &lt;/script&gt;  ```  &gt; **请注意**, 由于本Markdown解析器的CodeBlock解析得到的类名为 `language-mermaid`, 而mermaid插件支持的类名格式为`mermaid`, 所以代码中手动修改了 `language-mermaid` 的类名- 如果您想添加对Latex数学公式的支持, 可以在html页面 `&lt;body&gt;` 末尾添加如下 `&lt;script&gt;`  ```html  &lt;script&gt;      MathJax = {        tex: {          inlineMath: [['$', '$'], ['\\(', '\\)']]        }      };      &lt;/script&gt;  &lt;script id=&quot;MathJax-script&quot; async  src=&quot;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js&quot;&gt;  &lt;/script&gt;  ```  注意,这里仅支持很少一部分数学公式## 相关参考- [Github Markdown CSS](https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.css)- [Mermaid API](https://mermaid.js.org/intro/#mermaid-api)- [MathJax](https://docs.mathjax.org/en/latest/web/start.html)</longdescription>
</pkgmetadata>