<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Fickle: Firewalled PicklePeople abuse pickle. Especially researchers. Pickle is [not secure](https://docs.python.org/3/library/pickle.html). Published datasets and ML training weights are often distributed as pickle files (or formats which use pickle files, such as [PyTorch checkpoint.ckpt files](https://pytorch.org/tutorials/beginner/saving_loading_models.html)). Sometimes it is the only format that they are available in.## ExamplesLoading basic types is easy:```python&gt;&gt;&gt; from fickle import DefaultFirewall&gt;&gt;&gt; import pickle&gt;&gt;&gt;&gt;&gt;&gt; my_picked_data = pickle.dumps({&quot;list&quot;: [1, 2, &quot;three&quot;, b&quot;four&quot;]})&gt;&gt;&gt;&gt;&gt;&gt; firewall = DefaultFirewall()&gt;&gt;&gt; firewall.loads(my_picked_data){'list': [1, 2, 'three', b'four']}```Safely loading PyTorch checkpoint files into numpy arrays is just as easy:```python&gt;&gt;&gt; from fickle.ext.pytorch import fake_torch_load_zipped&gt;&gt;&gt; from zipfile import ZipFile&gt;&gt;&gt;&gt;&gt;&gt; zf = ZipFile(&quot;/path/to/sd-v1-4.ckpt&quot;)&gt;&gt;&gt; ckpt = fake_torch_load_zipped(zf)&gt;&gt;&gt; tensor = ckpt[&quot;state_dict&quot;][&quot;model.diffusion_model.output_blocks.3.1.norm.weight&quot;]&gt;&gt;&gt; tensor.arrayarray([0.39097363, 0.3898967 , 0.35191917, ..., 0.41924757, 0.4031702 ,       0.37156993], dtype=float32)```You can, optionally, even use `marshmallow` for validation!## Alternatives- [picklemagic](https://github.com/CensoredUsername/picklemagic)- [pikara](https://pypi.org/project/pikara)|                                                | fickle | picklemagic | pikara ||------------------------------------------------|--------|-------------|--------|| Does not rely on `pickle._Unpickler`?          | ✅      | ❌           | ✅      || Uses `pickletools.genops`                      | yes    | no          | yes    || Can load without executing?                    | ✅      | ✅           | ?      || Forbid importing arbitrary objects?            | ✅      | ✅           | ?      || Forbid calling `list.append`/`set.add`/etc?    | ✅      | ❌           | ?      || Forbid calling all methods by default?         | ✅      | ❌           | ?      || Can create dangerous circular structures?      | ✅      | ✅           | ?      || Safe against billion laughs DoS attack?        | ?      | ?           | ?      || Full support for all pickle opcodes?           | ❌      | ✅           | ?      || Has unit tests?                                | ✅      | ❌           | ✅      || Stable API?                                    | ❌      | ✅           | ✅      |</longdescription>
</pkgmetadata>