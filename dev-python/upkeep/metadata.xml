<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Easier Gentoo system maintenance[![Python package](https://github.com/Tatsh/upkeep/workflows/Python%20package/badge.svg)](https://github.com/Tatsh/upkeep/actions?query=workflow%3A%22Python+package%22)[![Coverage Status](https://coveralls.io/repos/github/Tatsh/upkeep/badge.svg?branch=master)](https://coveralls.io/github/Tatsh/upkeep?branch=master)This is a set of commands to simplify maintaining a Gentoo system.[Documentation](https://upkeep.rtfd.io/)## esyncThis command needs `eix` installed to fully function. It runs `eix-sync`. Thisis intended for use as a cron job. I use it daily.This command can run `layman -S` for you if you pass `-l` or `--run-layman`.## emergesThis command will do the following:- Update Portage- Update `@world` with options `--with-bdeps=y`, `--update`, `--deep`,  `--newuse`- Update live installations of packages (`@live-rebuild`)- Run `emerge @preserved-rebuild`- Run `systemctl daemon-reexec` (if applicable)- Update the kernelThere are flags to disable most parts of this functionality, such as`--no-upgrade-kernel`. Pass `--help` to see all the options.## Automatic kernel update processThe automatic kernel update will only work if there are 2 kernels displayedwith the command `eselect --brief kernel list`. The first one in the list mustbe the active kernel. The second one is the one to upgrade to. After switchingto the new kernel, a `.config` must exist in `/usr/src/linux` or the commandwill not run `make`. If the configuration exists at `/proc/config.gz` it willbe used.If `emerges` fails to build the kernel because of the state of`eselect kernel list`, you can fix it and re-run the update by running`upgrade-kernel`.The old kernel data in `/boot` will be stored in `/root/.upkeep/old-kernels`.Only systemd-boot and GRUB (`grub-mkconfig`) combined with Dracut are supportedfor the kernel update. Valid configurations must be present in `/etc`.If you want to only rebuild the kernel, run `rebuild-kernel`.### systemd-boot, UEFI Secure Boot, and signingTo support signing a kernel, create a file `/etc/upkeeprc` with contents likethe following:```ini[systemd-boot]sign-key = /etc/efi/db.keysign-cert = /etc/efi/db.crt```Signing is done with `sbsign` (`app-crypt/sbsigntools`).The kernel should be built with `CONFIG_EFI_STUB=y` and the full command lineset in `CONFIG_CMDLINE`. Under Secure Boot, systemd-boot will _not_ readoptions specified in an entry configuration file.## ecleansThis command will run the following commands (or equivalents):- `emerge --depclean`- `emerge @preserved-rebuild`- `revdep-rebuild`- `eclean-dist --deep`- `rm -fR /var/tmp/portage/*`</longdescription>
</pkgmetadata>