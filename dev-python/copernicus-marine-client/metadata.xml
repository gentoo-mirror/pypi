<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>&lt;h1 align=&quot;center&quot;&gt;Copernicus Marine Service client (CLI &amp; Python)&lt;/h1&gt;&lt;div align=&quot;center&quot;&gt;  &lt;a href=&quot;https://pypi.org/project/copernicus-marine-client/&quot;&gt;&lt;img src=&quot;https://img.shields.io/pypi/v/copernicus-marine-client.svg?style=flat-square&quot; alt=&quot;PyPI&quot; /&gt;&lt;/a&gt;  &lt;a href=&quot;https://pypi.org/project/copernicus-marine-client/&quot;&gt;&lt;img src=&quot;https://img.shields.io/pypi/pyversions/copernicus-marine-client.svg?style=flat-square&quot; alt=&quot;PyPI Supported Versions&quot; /&gt;&lt;/a&gt;  &lt;a href=&quot;https://pypi.org/project/copernicus-marine-client/&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/platform-windows | linux | macos-lightgrey?style=flat-square&quot; alt=&quot;Supported Platforms&quot; /&gt;&lt;/a&gt;&lt;/div&gt;![Copernicus Marine Service and Mercator Ocean international logos](https://www.mercator-ocean.eu/wp-content/uploads/2022/05/Cartouche_CMEMS_poisson_MOi.png)## FeaturesThe `copernicus-marine-client` offers capabilities through both **Command Line Interface (CLI)** and **Python API**:- **Metadata Information**: List and retrieve metadata information on all variables, datasets, products, and their associated documentation.- **Subset Datasets**: Subset datasets to extract only the parts of interest, in preferred format, such as Analysis-Ready Cloud-Optimized (ARCO) Zarr or NetCDF file format.- **Advanced Filters**: Apply simple or advanced filters to get multiple files, in original formats like NetCDF/GeoTIFF, via direct Marine Data Store connections.- **No Quotas**: Enjoy no quotas, neither on volume size nor bandwidth.## InstallationFor installation, multiple options are available depending on your setup:### Conda|MambaThough no conda package has been created yet, these steps cover the installation in a new isolated environment (safer). Replace conda by mamba if necessary.- Create the file `copernicus-marine-client-env.yml` that contains:```yamlname: cmcchannels:  - conda-forgedependencies:  - pip  - pip:    - copernicus-marine-client```- Use the terminal or a [Conda|Mamba] Prompt to create the `cmc` environment from the `yml` file:```bashconda env create --file copernicus-marine-client-env.yml```- Open the new `cmc` environment by running:```bashconda activate cmc```- Verify that the new `cmc` environment was installed correctly:```bashconda env list```### PipOtherwise, if you already have an environment (safer to clone it), the package can be installed using the `pip` command:```bashpython -m pip install copernicus-marine-client```And to **upgrade the package** to the newest available version, run:```bashpython -m pip install copernicus-marine-client --upgrade```## User GuideFor more comprehensive details on how to use the `copernicus-marine-client`, please refer to our [Help Center](https://help.marine.copernicus.eu/en/collections/4060068-copernicus-marine-client). It ensures a smooth migration for existing users of legacy services such as MOTU, OPeNDAP, and FTP.## Command Line Interface (CLI)### The `--help` optionTo discover commands and their available options, consider appending `--help` on any command line.Example:```bashcopernicus-marine --help```Returns:```bashUsage: copernicus-marine [OPTIONS] COMMAND [ARGS]...Options:  -V, --version  Show the version and exit.  --help         Show this message and exit.Commands:  describe  Print Copernicus Marine catalog as JSON  login     This command check the copernicus-marine credentials provided...  get       Download originally produced data files  subset    Downloads subsets of datasets as NetCDF files or Zarr stores```### Command `describe`Retrieve metadata information about all products/datasets and display as JSON output:```bashcopernicus-marine describe --include-datasets```The JSON output can also be saved like follows:```bashcopernicus-marine describe --include-datasets &gt; all_datasets_copernicus-marine.json```### Command `login`Create a single configuration file `.copernicus-marine-credentials` allowing to access all Marine Data Store data services. By default, it saves file in user's home directory.Example:```bash&gt; copernicus-marine loginusername : johndoepassword :INFO - Configuration files stored in /Users/foo/.copernicus-marine-client```If `.copernicus-marine-credentials` already exists, the user is asked for confirmation to overwrite (`--overwrite`/`--overwrite-configuration-file`).#### Access points migration and evolutionIf you already have a configuration for current services (e.g. `~/motuclient/motuclient-python.ini`, `~/.netrc` or `~/_netrc`) in your home directory, it will automatically be taken into account with commands `get` and `subset` without the need for running the `login` command.If the configuration files are already available in another directory, when running commands `subset` or `get`, you can use the `--credentials-file` option to point to the file.### Command `subset`Remotely subset a dataset, based on variable names, geographical and temporal parameters.Example:```bashcopernicus-marine subset --dataset-id cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m --variable thetao --variable so --start-datetime 2021-01-01 --end-datetime 2021-01-03 --minimal-longitude 0.0 --maximal-longitude 0.1 --minimal-latitude 28.0 --maximal-latitude 28.1```Returns:```bashINFO     - Download through S3&lt;xarray.Dataset&gt;Dimensions:    (depth: 50, latitude: 2, longitude: 1, time: 1)Coordinates:  * depth      (depth) float32 0.5058 1.556 2.668 ... 5.292e+03 5.698e+03  * latitude   (latitude) float32 28.0 28.08  * longitude  (longitude) float32 0.08333  * time       (time) datetime64[ns] 2021-01-01Data variables:    thetao     (time, depth, latitude, longitude) float32 dask.array&lt;chunksize=(1, 50, 2, 1), meta=np.ndarray&gt;    so         (time, depth, latitude, longitude) float32 dask.array&lt;chunksize=(1, 50, 2, 1), meta=np.ndarray&gt;Attributes: (12/19)    Conventions:    CF-1.0    bulletin_date:  2022-11-01    ...             ...    title:          CMEMS IBI REANALYSIS: YEARLY PHYSICAL PRODUCTSDo you want to proceed with download? [Y/n]:```By default, after the display of the summary of the dataset subset, a download confirmation is asked. To skip this user's action, call option `--force-download`.#### Note about longitude rangeOptions `--minimal-longitude` and `--maximal-longitude` work as follows:- If the result of the substraction ( `--maximal-longitude` minus `--minimal-longitude` ) is superior or equal to 360, then return the full dataset.- If the requested longitude range:  - **does not cross** the antemeridian, then return the dataset between range -180° and 180°.  - **does cross** the antemeridian, then return the dataset between range 0° and 360°.Note that you can request any longitudes you want. A modulus is applied to bring the result between -180° and 360°. For example, if you request [530°, 560°], the result dataset will be in [170°, 200°].#### Access point migration and evolutionThe copernicus marine client will download the data in the most efficient way according to your request:- if the target dataset **is available** in ARCO version, then files are downloaded in a fresh new `data.zarr` folder in the current working directory.- if the target dataset **is not yet available** in ARCO version, then a `data.nc` file is downloaded in the current working directory.However, the output directory and filename can be specified using `-o`/`--output-directory` and `-f`/`--output-filename` respectively. If the later ends with `.nc`, it will be written as a NetCDF file.You can force the use of a specific data access service with option `--force-service`.### Command `get`Download the dataset file(s) as originally produced, based on the datasetID or the path to files.Example:```bashcopernicus-marine get --dataset-url ftp://my.cmems-du.eu/Core/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m --force-service original-files```Returns:```bashINFO     - You forced selection of service: original-filesINFO     - Downloading using service original-files...INFO     - You requested the download of the following files:s3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_19930101_19931231_R20221101_RE01.nc - 8.83 MB[... truncated for brevity..]s3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_20120101_20121231_R20221101_RE01.nc - 8.62 MBPrinted 20 out of 29 filesTotal size of the download: 252.94 MBDo you want to proceed with download? [Y/n]```You can force the use of a specific data access service with option `--force-service`.By default:- after the header displays a summary of the request, a download confirmation is asked. To skip this user's action, add option `--force-download`.- files are downloaded to the current directory applying the original folder structure. To avoid this behavior, add `--no-directories` and specify a destination with the `--output-directory` option.Option `--show-outputnames` displays the full paths of the output files, if required.#### Note about filtering optionsOption `--filter` allows to specify a Unix shell-style wildcard pattern (see [fnmatch — Unix filename pattern matching](https://docs.python.org/3/library/fnmatch.html)) and select specific files:```bashcopernicus-marine get --dataset-id cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m --filter &quot;*01yav_200[0-2]*&quot;```Returns:```bashINFO     - Downloading using service files...INFO     - You requested the download of the following files:s3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_20000101_20001231_R20221101_RE01.nc - 8.93 MBs3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_20010101_20011231_R20221101_RE01.nc - 8.91 MBs3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_20020101_20021231_R20221101_RE01.nc - 8.75 MBTotal size of the download: 26.59 MBDo you want to proceed with download? [Y/n]:```Option `--regex` allows to specify a regular expression for more advanced files selection:```bashcopernicus-marine get -i cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m --regex &quot;.*01yav_20(00|01|02).*.nc&quot;```Returns:```bashINFO     - Downloading using service files...INFO     - You requested the download of the following files:s3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_20000101_20001231_R20221101_RE01.nc - 8.93 MBs3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_20010101_20011231_R20221101_RE01.nc - 8.91 MBs3://mdl-native/native/IBI_MULTIYEAR_PHY_005_002/cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m_202211/CMEMS_v5r1_IBI_PHY_MY_NL_01yav_20020101_20021231_R20221101_RE01.nc - 8.75 MBTotal size of the download: 26.59 MBDo you want to proceed with download? [Y/n]:```### Shared optionsBoth `subset` and `get` commands provide these options:#### Option `--overwrite-output-data`When specified, the existing files will be overwritten.Otherwise, if the files already exist on destination, new ones with a unique index will be created once the download has been accepted (or once `--force-download` is provided).#### Option `--request-file`This option allows to specify CLI options but in a provided JSON file, useful for batch processing.- Template for `subset` data request:```json{&quot;dataset_id&quot;: &quot;cmems_mod_glo_phy-thetao_anfc_0.083deg_P1D-m&quot;,&quot;start_datetime&quot;: &quot;2022-04-11&quot;,&quot;end_datetime&quot;: &quot;2023-08-11&quot;,&quot;minimal_longitude&quot;: -182.79,&quot;maximal_longitude&quot;: -179.69,&quot;minimal_latitude&quot;: -40,&quot;maximal_latitude&quot;: -36,&quot;minimal_depth&quot;: 0,&quot;maximal_depth&quot;: 0,&quot;variables&quot;: [&quot;thetao&quot;],&quot;output_directory&quot;: &quot;./data/&quot;,&quot;output_filename&quot;: &quot;temperature_small_pacific_2022208-202308.zarr&quot;,&quot;force_download&quot;: false}```Example:```bashcopernicus-marine subset --request-file template_subset_data_request.json```- Template for `get` data request:```json{    &quot;dataset_id&quot;: &quot;cmems_mod_ibi_phy_my_0.083deg-3D_P1Y-m&quot;,    &quot;filter&quot;: &quot;*01yav_200[0-2]*&quot;,    &quot;force_download&quot;: false,    &quot;force_service&quot;: &quot;files&quot;,    &quot;log_level&quot;: &quot;INFO&quot;,    &quot;no_directories&quot;: false,    &quot;no_metadata_cache&quot;: false,    &quot;output_directory&quot;: &quot;./data/&quot;,    &quot;overwrite_output_data&quot;: false,    &quot;overwrite_metadata_cache&quot;: false,    &quot;show_outputnames&quot;: true}```Example:```bashcopernicus-marine get --request-file template_get_data_request.json```#### Option `--credentials-file`You can use the `--credentials-file` option to point to a credentials file. The file can be either `.copernicus-marine-credentials`, `motuclient-python.ini`, `.netrc` or `_netrc`.## Python package (API)The `copernicus-marine-client` exposes a Python interface to allow you to [call commands as functions](https://marine.copernicus.eu/python-interface).## DocumentationSee the [Help Center](https://help.marine.copernicus.eu/en/collections/4060068-copernicus-marine-client). A detailed standalone API documentation is under construction and will come at a later stage.## ContributionWe welcome contributions from the community to enhance this package. If you find any issues or have suggestions for improvements, please check out our [Report Template](https://help.marine.copernicus.eu/en/articles/8218546-how-to-report-a-bug-or-suggest-new-features).## Future improvements &amp; Roadmap- [ ] Make available the currently not managed Analysis-Ready Cloud-Optimized (ARCO) versions of Ocean Monitoring Indicator (OMI), in situ and static datasets.- [ ] Allow to specify the compression level when downloading your subset as NetCDF file.- [ ] Allow to subset variables using their `standard_name(s)` and not only their `name(s)`.To keep up to date with the most recent and planned advancements, including revisions, corrections, and feature requests generated from users' feedback, please refer to our [Roadmap](https://help.marine.copernicus.eu/en/articles/8218641-what-are-the-next-milestones).## Join the communityGet in touch!- Create your [Copernicus Marine Account](https://data.marine.copernicus.eu/register)- [Log in](https://data.marine.copernicus.eu/login?redirect=%2Fproducts) and chat with us (bottom right corner of [Copernicus Marine Service](https://marine.copernicus.eu/))- Join our [training workshops](https://marine.copernicus.eu/services/user-learning-services)- Network y/our [Copernicus Stories](https://twitter.com/cmems_eu)- Watch [our videos](https://www.youtube.com/channel/UC71ceOVy7WtVC7F04BKoEew)</longdescription>
</pkgmetadata>