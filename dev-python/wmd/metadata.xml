<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>Fast Word Mover's Distance [![Build Status](https://travis-ci.com/src-d/wmd-relax.svg?branch=master)](https://travis-ci.com/src-d/wmd-relax) [![PyPI](https://img.shields.io/pypi/v/wmd.svg)](https://pypi.python.org/pypi/wmd) [![codecov](https://codecov.io/github/src-d/wmd-relax/coverage.svg)](https://codecov.io/gh/src-d/wmd-relax)==========================Calculates Word Mover's Distance as described in[From Word Embeddings To Document Distances](http://www.cs.cornell.edu/~kilian/papers/wmd_metric.pdf)by Matt Kusner, Yu Sun, Nicholas Kolkin and Kilian Weinberger.&lt;img src=&quot;doc/wmd.png&quot; alt=&quot;Word Mover's Distance&quot; width=&quot;200&quot;/&gt;The high level logic is written in Python, the low level functions related tolinear programming are offloaded to the bundled native extension. The nativeextension can be built as a generic shared library not related to Python at all.**Python 2.7 and older are not supported.** The heavy-lifting is done by[google/or-tools](https://github.com/google/or-tools).### Installation```pip3 install wmd```Tested on Linux and macOS.### UsageYou should have the embeddings numpy array and the nbow model - that is,every sample is a weighted set of items, and every item is embedded.```pythonimport numpyfrom wmd import WMDembeddings = numpy.array([[0.1, 1], [1, 0.1]], dtype=numpy.float32)nbow = {&quot;first&quot;:  (&quot;#1&quot;, [0, 1], numpy.array([1.5, 0.5], dtype=numpy.float32)),        &quot;second&quot;: (&quot;#2&quot;, [0, 1], numpy.array([0.75, 0.15], dtype=numpy.float32))}calc = WMD(embeddings, nbow, vocabulary_min=2)print(calc.nearest_neighbors(&quot;first&quot;))``````[('second', 0.10606599599123001)]````embeddings` must support `__getitem__` which returns an item by it'sidentifier; particularly, `numpy.ndarray` matches that interface.`nbow` must be iterable - returns sample identifiers - and support`__getitem__` by those identifiers which returns tuples of length 3.The first element is the human-readable name of the sample, thesecond is an iterable with item identifiers and the third is `numpy.ndarray`with the corresponding weights. All numpy arrays must be float32. The returnformat is the list of tuples with sample identifiers and relevancyindices (lower the better).It is possible to use this package with [spaCy](https://github.com/explosion/spaCy):```pythonimport spacyimport wmdnlp = spacy.load('en_core_web_md')nlp.add_pipe(wmd.WMD.SpacySimilarityHook(nlp), last=True)doc1 = nlp(&quot;Politician speaks to the media in Illinois.&quot;)doc2 = nlp(&quot;The president greets the press in Chicago.&quot;)print(doc1.similarity(doc2))```Besides, see another [example](spacy_example.py) which finds similar Wikipediapages.### Building from sourceEither build it as a Python package:```pip3 install git+https://github.com/src-d/wmd-relax```or use CMake:```git clone --recursive https://github.com/src-d/wmd-relaxcmake -D CMAKE_BUILD_TYPE=Release .make -j```Please note the `--recursive` flag for `git clone`. This project uses source{d}'sfork of [google/or-tools](https://github.com/google/or-tools) as the git submodule.### TestsTests are in `test.py` and use the stock `unittest` package.### Documentation```cd docmake html```The files are in `doc/doxyhtml` and `doc/html` directories.### Contributions...are welcome! See [CONTRIBUTING](CONTRIBUTING.md) and [code of conduct](CODE_OF_CONDUCT.md).### License[Apache 2.0](LICENSE.md)#### README {#ignore_this_doxygen_anchor}</longdescription>
</pkgmetadata>