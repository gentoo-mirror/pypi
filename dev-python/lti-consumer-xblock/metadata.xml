<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>###################LTI Consumer XBlock###################| |status-badge| |license-badge| |ci-badge| |codecov-badge| |pypi-badge|Purpose*******This XBlock implements the consumer side of the LTI specification enablingintegration of third-party LTI provider tools.Getting Started***************Installation============For details regarding how to deploy this or any other XBlock in the lms instance, see the `installing-the-xblock`_ documentation... _installing-the-xblock: https://edx.readthedocs.io/projects/xblock-tutorial/en/latest/edx_platform/devstack.html#installing-the-xblockInstalling in Docker Devstack-----------------------------Assuming that your ``devstack`` repo lives at ``~/code/devstack``and that ``edx-platform`` lives right alongside that directory, you'll wantto checkout ``xblock-lti-consumer`` and have it live in ``~/code/src/xblock-lti-consumer``.This will make it so that you can access it inside an LMS container shelland easily make modifications for local testing.**You will have to run the below instructions twice, once for the LMS and once for Studio.Otherwise you will be using different versions of the xblock in the two containers.**Run ``make dev.shell.lms`` or ``make dev.shell.studio`` from your ``devstack`` directory to enter a running container.Once in there, you can do the following to have your devstack pointing at a local developmentversion of ``xblock-lti-consumer``:.. code:: bash    $ pushd /edx/src/xblock-lti-consumer    $ virtualenv venv/    $ source venv/bin/activate    $ make install    $ make test  # optional, if you want to see that everything works    $ deactivate    $ pushd  # should take you back to /edx/app/edxapp/edx-platform    $ pip uninstall -y lti_consumer_xblock    $ pip install -e /edx/src/xblock-lti-consumerEnabling in Studio------------------You can enable the LTI Consumer XBlock in Studio through theadvanced settings.1. From the main page of a specific course, navigate to   ``Settings -&gt;    Advanced Settings`` from the top menu.2. Check for the ``advanced_modules`` policy key, and add   ``&quot;lti_consumer&quot;`` to the policy value list.3. Click the &quot;Save changes&quot; button.Developing===========One Time Setup--------------.. code:: bash  # Clone the repository  git clone git@github.com:openedx/xblock-lti-consumer.git  cd xblock-lti-consumer  # Set up a virtualenv using virtualenvwrapper with the same name as the repo and activate it  mkvirtualenv -p python3.8 xblock-lti-consumerEvery time you develop something in this repo---------------------------------------------.. code:: bash  # Activate the virtualenv  workon xblock-lti-consumer  # Grab the latest code  git checkout master  git pull  # Install/update the dev requirements  make install  # Run the tests (to verify the status before you make any changes)  make test  # Make a new branch for your changes  git checkout -b &lt;your_github_username&gt;/&lt;short_description&gt;  # Using your favorite editor, edit the code to make your change.  vim ...  # Changes to style rules should be made to the Sass files, compiled to CSS,  # and committed to the git repository.  make compile-sass  # Run your new tests  pytest ./path/to/new/tests  # Run quality checks  make quality  # Add a changelog entry to CHANGELOG.rst  # Commit all your changes  git commit ...  git push  # Open a PR and ask for review.Package Requirements--------------------setup.py contains a list of package dependencies which are required for this XBlock package.This list is what is used to resolve dependencies when an upstream project is consumingthis XBlock package. requirements.txt is used to install the same dependencies when runningthe tests for this package.Downloading translations from Transifex---------------------------------------If you want to download translations from Transifex install`transifex client &lt;https://docs.transifex.com/client/installing-the-client/&gt;`_ and run this command whileinside project root directory:.. code:: bash    $ tx pull -f --mode=reviewed -l en,ar,es_419,fr,he,hi,ko_KR,pt_BR,ru,zh_CNFurther Development Info------------------------See the `developer guide`_ for implementation details and other developer concerns... _developer guide: ./docs/developing.rstTesting*******Testing Against an LTI Provider===============================LTI 1.1-------http://lti.tools/saltire/ provides a &quot;Test Tool Provider&quot; service that allowsyou to see messages sent by an LTI consumer.We have some useful documentation on how to set this up here:http://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/exercises_tools/lti_component.html#lti-authentication-information1. In Studio Advanced settings, set the value of the &quot;LTI Passports&quot; field to &quot;test:test:secret&quot; -   this will set the OAuth client key and secret used to send a message to the test LTI provider.2. Create an LTI Consumer problem in a course in Studio (after enabling it in &quot;advanced_modules&quot;   as seen above).  Make a unit, select &quot;Advanced&quot;, then &quot;LTI Consumer&quot;.3. Click edit and fill in the following fields:   ``LTI ID``: &quot;test&quot;   ``LTI URL``: &quot;https://lti.tools/saltire/tp&quot;4. Click save.  The unit should refresh and you should see &quot;Passed&quot; in the &quot;Verification&quot; field of   the message tab in the LTI Tool Provider emulator.5. Click the &quot;Publish&quot; button.6. View the unit in your local LMS.  If you get an ``ImportError: No module named lti_consumer``, you   should ``docker-compose restart lms`` (since we previously uninstalled the lti_consumer to get the   tests for this repo running inside an LMS container).  From here, you can see the contents of the   messages that we are sending as an LTI Consumer in the &quot;Message Parameters&quot; part of the &quot;Message&quot; tab.LTI 1.3-------IMS Global provides a reference implementation of LTI 1.3 that can be used to test the XBlock.On LTI 1.3 the authentication mechanism used is OAuth2 using the Client Credentials grant, this meansthat to configure the tool, the LMS needs to know the keyset URL or public key of the tool, and the toolneeds to know the LMS's one.Instructions:#. Set up a local tunnel (using `ngrok` or a similar tool) to get a URL accessible from the internet.#. Add the following settings to `edx-platform/lms/envs/private.py` and `edx-platform/cms/envs/private.py`:    * LTI_BASE=&quot;http://localhost:18000&quot;    * LTI_API_BASE=&quot;http://&lt;your_ngrok&gt;.ngrok.io&quot;#. Create a new course, and add the `lti_consumer` block to the advanced modules list.#. In the course, create a new unit and add the LTI block.   * Set ``LTI Version`` to ``LTI 1.3``.   * Set the ``Tool Launch URL`` to ``https://lti-ri.imsglobal.org/lti/tools/``#. In Studio, you'll see a few parameters being displayed in the preview:.. code::    Client ID: f0532860-cb34-47a9-b16c-53deb077d4de    Deployment ID: 1    # Note that these are LMS URLS    Keyset URL: http://1234.ngrok.io/api/lti_consumer/v1/public_keysets/88e45ecbd-7cce-4fa0-9537-23e9f7288ad9    Access Token URL: http://1234.ngrok.io/api/lti_consumer/v1/token/8e45ecbd-7cce-4fa0-9537-23e9f7288ad9    OIDC Callback URL: http://localhost:18000/api/lti_consumer/v1/launch/#. Set up a tool in the IMS Global reference implementation (https://lti-ri.imsglobal.org/lti/tools/).   * Click on ``Add tool`` at the top of the page (https://lti-ri.imsglobal.org/lti/tools).   * Add the parameters and URLs provided by the block, and generate a private key on https://lti-ri.imsglobal.org/keygen/index and paste it there (don't close the tab, you'll need the public key later).#. Go back to Studio, and edit the block adding its settings (you'll find them by scrolling down https://lti-ri.imsglobal.org/lti/tools/ until you find the tool you just created):.. code::    Tool Launch URL: https://lti-ri.imsglobal.org/lti/tools/[tool_id]/launches    Tool Initiate Login URL: https://lti-ri.imsglobal.org/lti/tools/[tool_id]/login_initiations    Tool Public key: Public key from key page.#. Publish block, log into LMS and navigate to the LTI block page.#. Click ``Send Request`` and verify that the LTI launch was successful.LTI Advantage Features----------------------This XBlock supports LTI 1.3 and the following LTI Avantage services:* Deep Linking (LTI-DL)* Assignments and Grades services (LTI-AGS)* Names and Roles Provisioning services (LTI-NRP)To enable LTI-AGS, you need to set **LTI Assignment and Grades Service** in Studio toallow tools to send back grades. There's two grade interaction models implemented:* **Allow tools to submit grades only (declarative)(Default)**: enables LTI-AGS and  creates a single fixed LineItem that the tools can send grades too.* **Allow tools to manage and submit grades (programmatic)**: enables LTI-AGS and  enables full access to LTI-AGS endpoints. Tools will be able to create, manage and  delete multiple LineItems, and set multiple grades per student per problem.  *In this implementation, the tool is responsible for managing grades and linking them in the LMS.*To enable LTI-DL and its capabilities, you need to set these settings in the block:1. Locate the **Deep linking** setting and set it to **True (enabled)**.2. Set **Deep Linking Launch URL** setting. You can retrieve it from the tool you’re integrating with.   If it’s not provided, try using the same value as in the LTI 1.3 Tool Launch URL.To enable LTI-NRPS, you set **Enable LTI NRPS** to **True** in the block settings on Studio.LTI 1.1/1.2 Basic Outcomes Service 1.1--------------------------------------This XBlock supports `LTI 1.1/1.2 Basic Outcomes Service 1.0 &lt;http://www.imsglobal.org/spec/lti-bo/v1p1/&gt;`_. Please see these`LTI 1.1/1.2 Basic Outcomes Service 1.0 instructions &lt;https://github.com/openedx/xblock-lti-consumer/tree/master/docs/basic_outcomes_service.rst&gt;`_for testing the LTI 1.1/1.2 Basic Outcomes Service 1.1 implementation.LTI 2.0 Result Service 2.0--------------------------This XBlock supports `LTI 2.0 Result Service 2.0 &lt;https://www.imsglobal.org/lti/model/uml/purl.imsglobal.org/vocab/lis/v2/outcomes/Result/service.html&gt;`_.Please see the `LTI 2.0 Result Service 2.0 instructions &lt;https://github.com/openedx/xblock-lti-consumer/tree/master/docs/result_service.rst&gt;`_for testing the LTI 2.0 Result Service 2.0 implementation.Getting Help************If you're having trouble, we have discussion forums athttps://discuss.openedx.org where you can connect with others in thecommunity.Our real-time conversations are on Slack. You can request a `Slackinvitation`_, then join our `community Slack workspace`_.For anything non-trivial, the best path is to open an issue in thisrepository with as many details about the issue you are facing as youcan provide.https://github.com/openedx/xblock-lti-consumer/issuesFor more information about these options, see the `Getting Help`_ page... _Slack invitation: https://openedx.org/slack.. _community Slack workspace: https://openedx.slack.com/.. _Getting Help: https://openedx.org/getting-helpLicense*******The code in this repository is licensed under the AGPL v3 License unlessotherwise noted.Please see `LICENSE.txt &lt;LICENSE.txt&gt;`_ for details.Contributing************Contributions are very welcome.Please read `How To Contribute &lt;https://openedx.org/r/how-to-contribute&gt;`_ for details.This project is currently accepting all types of contributions, bug fixes,security fixes, maintenance work, or new features.  However, please make sureto have a discussion about your new feature idea with the maintainers prior tobeginning development to maximize the chances of your change being accepted.You can start a conversation by creating a new issue on this repo summarizingyour idea.The Open edX Code of Conduct****************************All community members are expected to follow the `Open edX Code of Conduct`_... _Open edX Code of Conduct: https://openedx.org/code-of-conduct/People******The assigned maintainers for this component and other project details may befound in `Backstage`_. Backstage pulls this data from the ``catalog-info.yaml``file in this repo... _Backstage: https://backstage.openedx.org/catalog/default/component/xblock-lti-consumerReporting Security Issues*************************Please do not report security issues in public. Please email security@tcril.org... |ci-badge| image:: https://github.com/openedx/xblock-lti-consumer/workflows/Python%20CI/badge.svg?branch=master    :target: https://github.com/openedx/xblock-lti-consumer/actions?query=workflow%3A%22Python+CI%22    :alt: Test suite status.. |codecov-badge| image:: https://codecov.io/github/openedx/xblock-lti-consumer/coverage.svg?branch=master    :target: https://codecov.io/github/openedx/xblock-lti-consumer?branch=master    :alt: Code coverage.. |status-badge| image:: https://img.shields.io/badge/Status-Maintained-brightgreen    :alt: Maintained.. |license-badge| image:: https://img.shields.io/github/license/openedx/xblock-lti-consumer.svg    :target: https://github.com/openedx/edx-rest-api-client/blob/master/LICENSE    :alt: License.. |pypi-badge| image:: https://img.shields.io/pypi/v/lti-consumer-xblock.svg    :target: https://pypi.python.org/pypi/lti-consumer-xblock/    :alt: PyPI</longdescription>
</pkgmetadata>