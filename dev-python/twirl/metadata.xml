<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># twirl&lt;p align=&quot;center&quot;&gt;    &lt;img src=&quot;https://github.com/lgrcia/twirl/blob/main/docs/_static/twirl.png&quot; height=&quot;270&quot;&gt;&lt;/p&gt;&lt;p align=&quot;center&quot;&gt;  Python package for astrometric plate solving  &lt;br&gt;  &lt;p align=&quot;center&quot;&gt;    &lt;a href=&quot;https://github.com/lgrcia/twirl&quot;&gt;      &lt;img src=&quot;https://img.shields.io/badge/github-lgrcia/twirl-blue.svg?style=flat&quot; alt=&quot;github&quot;/&gt;    &lt;/a&gt;    &lt;a href=&quot;&quot;&gt;      &lt;img src=&quot;https://img.shields.io/badge/license-MIT-lightgray.svg?style=flat&quot; alt=&quot;license&quot;/&gt;    &lt;/a&gt;    &lt;a href=&quot;https://ui.adsabs.harvard.edu/abs/2022MNRAS.509.4817G&quot;&gt;      &lt;img src=&quot;https://img.shields.io/badge/paper-gray.svg?style=flat&quot; alt=&quot;paper&quot;/&gt;    &lt;/a&gt;    &lt;a href=&quot;https://twirl.readthedocs.io&quot;&gt;      &lt;img src=&quot;https://img.shields.io/badge/documentation-black.svg?style=flat&quot; alt=&quot;documentation&quot;/&gt;    &lt;/a&gt;  &lt;/p&gt;&lt;/p&gt;twirl is an astrometric plate solving package for Python. It is suited for cases where the Right Ascension and Declination (RA, dec) coordinates of the image center and the field of view is known, computing a World Coordinate System (WCS) based on GAIA reference stars.twirl compute a WCS following these steps:1. detection of stars in the image if not provided2. catalog query using image known center3. asterisms building and matching4. image recombination and wcs fit using astropy.wcsAstersisms are made of 3 or 4 points. 4 points asterisms are built following Lang et al. 2009 while 3 points asterims are based on an original algorithm.## Installationtwirl can be installed using pip:```shellpip install twirl```or using poetry:```shellpoetry add twirl```## Example Usage*twirl* is designed to be complementary to the *astropy* package. It is used to compute a WCS by matching an image detected stars with catalog stars. To query the catalog stars, the center coordinates of the image must be known, as well as the size of the field of view. If not available, the latter can be computed using the known pixel scale of the detector.Hence, the process starts by extracting the image RA-DEC center equatorial coordinate and compute the instrument field of view```pythonimport numpy as npfrom astropy.io import fitsfrom astropy import units as ufrom astropy.coordinates import SkyCoord# Open some FITS imagehdu = fits.open(&quot;...&quot;)[0]# get the center of the imagera, dec = hdu.header[&quot;RA&quot;], hdu.header[&quot;DEC&quot;]center = SkyCoord(ra, dec, unit=[&quot;deg&quot;, &quot;deg&quot;])# and the size of its field of viewpixel = 0.66 * u.arcsec  # known pixel scaleshape = hdu.data.shapefov = np.max(shape) * pixel.to(u.deg)```We can then query the gaia stars in the field using this information```pythonimport twirlsky_coords = twirl.gaia_radecs(center, 1.2 * fov)[0:12]```and match the queried stars to stars detected in the image```python# detect stars in the imagepixel_coords = twirl.find_peaks(hdu.data)[0:12]# compute the World Coordinate Systemwcs = twirl.compute_wcs(pixel_coords, sky_coords)```leading to a World Coordinate System object.A more complete example is provided in [docs/ipynb/wcs.ipynb](https://twirl.readthedocs.io/en/latest/ipynb/wcs.html)## Development### Project Requirements- [Python](https://www.python.org/) 3.11.*- [Poetry](https://python-poetry.org/) for Python package and environment management.### Installing DependenciesThe twirl project manages Python package dependencies using [Poetry](https://python-poetry.org/). You'll need to follow the instructions for installation there.Then you can start a shell session with the new environment with:```console$ poetry shell```**N.B.** For development with vscode you will need to run the following command:```console$ poetry config virtualenvs.in-project true```This will installed the poetry `.venv` in the root of the project and allow vscode to setup the environment correctly for development.To start development, install all of the dependencies as:```console$ poetry install```**N.B.** _Ensure that any dependency changes are committed to source control, so everyone has a consistenct package dependecy list._## AcknowledgementsThis package has made use of the algorithm fromLang, D. et al. (2010). _Astrometry.net: Blind Astrometric Calibration of Arbitrary Astronomical Images_. The Astronomical Journal, 139(5), pp.1782–1800. [doi:10.1088/0004-6256/139/5/1782](https://iopscience.iop.org/article/10.1088/0004-6256/139/5/1782).implemented inGarcia, L. J. et al. (2022). prose: a Python framework for modular astronomical images processing. MNRAS, vol. 509, no. 4, pp. 4817–4828, 2022. [doi:10.1093/mnras/stab3113](https://academic.oup.com/mnras/article-abstract/509/4/4817/6414007).See this [documentation page](https://twirl.readthedocs.io/en/latest/md/acknowledgement.html) for the BibTeX entries.</longdescription>
</pkgmetadata>