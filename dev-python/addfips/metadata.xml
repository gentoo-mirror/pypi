<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># AddFIPSAddFIPS is a tool for adding state or county FIPS codes to files that contain just the names of those geographies.FIPS codes are the official ID numbers of places in the US. They're invaluable for matching data from different sources.Say you have a CSV file like this:```state,county,statisticIL,Cook,123California,Los Angeles County,321New York,Kings,137LA,Orleans,99Alaska,Kusilvak,12```AddFIPS lets you do this:```&gt; addfips --county-field=county input.csvcountyfp,state,county,statistic17031,IL,Cook,12306037,California,Los Angeles County,32136047,New York,Kings,13722071,LA,Orleans,9902270,Alaska,Kusilvak,12```## InstallingAddFIPS is a Python package compatible with versions 3.7+.If you've used Python packages before:```pip install addfips# orpip install --user addfips```If you haven't used Python packages before, [get pip](http://pip.readthedocs.org/en/stable/installing/), then come back.## Features* Use full names or postal abbrevations for states* Works with all states, territories, and the District of Columbia* Slightly fuzzy matching allows for missing diacretic marks and different name formats (&quot;Nye County&quot; or &quot;Nye', &quot;Saint Louis&quot; or &quot;St. Louis&quot;, &quot;Prince George's&quot; or &quot;Prince Georges&quot;)* Includes up-to-date 2015 geographies (shout out to Kusilvak Census Area, AK, and Oglala Lakota Co., SD)Note that some states have counties and county-equivalent independent cities with the same names (e.g. Baltimore city &amp; County, MD, Richmond city &amp; County, VA). AddFIPS's behavior may pick the wrong geography if just the name (&quot;Baltimore&quot;) is passed.## Command line tool````usage: addfips [-h] [-V] [-d CHAR] (-s FIELD | -n NAME) [-c FIELD]               [-v VINTAGE] [--no-header]               [input]AddFIPS codes to a CSV with state and/or county namespositional arguments:  input                 Input file. default: stdinoptional arguments:  -h, --help            show this help message and exit  -V, --version         show program's version number and exit  -d CHAR, --delimiter CHAR                        field delimiter. default: ,  -s FIELD, --state-field FIELD                        Read state name or FIPS code from this field  -n NAME, --state-name NAME                        Use this state for all rows  -c FIELD, --county-field FIELD                        Read county name from this field. If blank, only state                        FIPS code will be added  -v VINTAGE, --vintage VINTAGE                        2000, 2010, or 2015. default: 2015  --no-header           Input has no header now, interpret fields as integers  -u, --err-unmatched   Print rows that addfips cannot match to stderr````Options and flags:* `input`: (positional argument) The name of the file. If blank, `addfips` reads from stdin.* `--delimiter`: Field delimiter, defaults to ','.* `--state-field`: Name of the field containing state name* `--state-name`: Name, postal abbreviation or state FIPS code to use for all rows.* `--county-field`: Name of the field containing county name. If this is blank, the output will contain the two-character state FIPS code.* `--vintage`: Use earlier county names and FIPS codes. For instance, Clifton Forge city, VA, is not included in 2010 or later vintages.* `--no-header`: Indicates that the input file has no header. `--state-field` and `--county-field` are parsed as field indices.* `--err-unmatched`: Rows that `addfips` cannot match will be printed to stderr, rather than stdoutThe output is a CSV with a new column, &quot;fips&quot;, appended to the front. When `addfips` cannot make a match, the fips column will have an empty value.### ExamplesAdd state FIPS codes:````addfips data.csv --state-field fieldName &gt; data_with_fips.csv````Add state and county FIPS codes:````addfips data.csv --state-field fieldName --county-field countyName &gt; data_with_fips.csv````For files with no header row, use a number to refer to the columns with state and/or county names:```addfips --no-header-row --state-field 1 --county-field 2 data_no_header.csv &gt; data_no_header_fips.csv```Column numbers are one-indexed.AddFIPS for counties from a specific state. These are equivalent:```addfips ny_data.csv -c county --state-name NY &gt; ny_data_fips.csvaddfips ny_data.csv -c county --state-name 'New York' &gt; ny_data_fips.csvaddfips ny_data.csv -c county --state-name 36 &gt; ny_data_fips.csv```Use an alternate delimiter:```addfips -d'|' -s state pipe_delimited.dsv &gt; result.csvaddfips -d';' -s state semicolon_delimited.dsv &gt; result.csv```Print unmatched rows to another file:```addfips --err-unmatched -s state state_data.csv &gt; state_data_fips.csv 2&gt; state_unmatched.csvaddfips -u -s STATE -c COUNTY county_data.csv &gt; county_data_fips.csv 2&gt; county_unmatched.csv```Pipe from other programs:````curl http://example.com/data.csv | addfips -s stateFieldName -c countyField &gt; data_with_fips.csvcsvkit -c state,county,important huge_file.csv | addfips -s state -c county &gt; small_file.csv````Pipe to other programs. In files with extensive text, filtering with the FIPS code is safer than using county names, which may be common words (e.g. cook):````addfips culinary_data.csv -s stateFieldName -c countyField | grep -e &quot;^17031&quot; &gt; culinary_data_cook_county.csvaddfips -s StateName -c CountyName data.csv | csvsort -c fips &gt; sorted_by_fips.csv````## APIAddFIPS is available for use in your Python scripts:````python&gt;&gt;&gt; import addfips&gt;&gt;&gt; af = addfips.AddFIPS()&gt;&gt;&gt; af.get_state_fips('Puerto Rico')'72'&gt;&gt;&gt; af.get_county_fips('Nye', state='Nevada')'32023'&gt;&gt;&gt; row = {'county': 'Cook County', 'state': 'IL'}&gt;&gt;&gt; af.add_county_fips(row, county_field=&quot;county&quot;, state_field=&quot;state&quot;){'county': 'Cook County', 'state': 'IL', 'fips': '17031'}````The results of `AddFIPS.get_state_fips` and `AddFIPS.get_county_fips` are strings, since FIPS codes may have leading zeros.### Classes#### AddFIPS(vintage=None)The AddFIPS class takes one keyword argument, `vintage`, which may be either `2000`, `2010` or `2015`. Any other value will use the most recent vintage. Other vintages may be added in the future.__get_state_fips(self, state)__Returns two-digit FIPS code based on  a state name or postal code.__get_county_fips(self, county, state)__Returns five-digit FIPS code based on county name and state name/abbreviation/FIPS.__add_state_fips(self, row, state_field='state')__Returns the input row with a two-figit state FIPS code added.Input row may be either a `dict` or a `list`. If a `dict`, the 'fips' key is added. If a `list`, the FIPS code is added at the start of the list.__add_county_fips(self, row, county_field='county', state_field='state', state=None)__Returns the input row with a five-figit county FIPS code added.Input row may be either a `dict` or a `list`. If a `dict`, the 'fips' key is added. If a `list`, the FIPS code is added at the start of the list.### LicenseDistributed under the GNU General Public License, version 3. See LICENSE for more information.</longdescription>
</pkgmetadata>