<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># pytest-mini&gt; 微信小程序自动化测试pytest插件/工具&gt; &gt; 基于[MiniTest](https://minitest.weixin.qq.com/)进行pytest改造## 使用方法### 准备测试小程序根据[miniprogram-demo](https://github.com/wechat-miniprogram/miniprogram-demo)项目介绍运行一次项目成功运行后关闭### 安装&amp;更新```shellpip install pytest-mini --upgrade```### 引入插件新建`conftest.py`文件```pythonfrom pytest_mini import pluginspytest_plugins = plugins(    &quot;待测试的小程序项目路径&quot;,    &quot;微信开发者工具路径&quot;)```例如`demo/cases/conftest.py````pythonfrom pytest_mini import pluginspytest_plugins = plugins(    &quot;/Users/zhongxin/github/miniprogram-demo&quot;,  # 待测试的小程序项目路径    &quot;/Applications/wechatwebdevtools.app/Contents/MacOS/cli&quot;  # 微信开发者工具路径)```### 编写页面对象在`demo/pages/components_page.py`编写元素定位```pythonfrom pytest_mini import Mini, Locatorclass ComponentsPage(Mini):    view_container = Locator('view', inner_text='视图容器', desc='组件页-视图容器')```在`conftest.py`中添加```pythonimport pytestfrom pages.components_page import ComponentsPage@pytest.fixture(scope=&quot;session&quot;)def components_page(mini):    yield ComponentsPage(driver=mini.driver)```### 编写测试代码`demo/cases/test_home.py````pythonimport allurefrom pytest_mini import compose@compose(feature=&quot;小程序官方组件展示&quot;, story=&quot;组件&quot;, title='容器视图操作')def test_view_container(components_page):    with allure.step(&quot;点击容器视图&quot;):        components_page.click(components_page.view_container)        assert False, &quot;故意失败,查看报告截图&quot;```### 编写执行&amp;报告展示脚本`demo/cases/allure_debug.py````pythonimport osimport pytestfrom pytest_mini.constant import Constanttest_cases = [&quot;test_home.py&quot;]  # 执行的脚本main_list = [    '-s', '-v',    *test_cases,    '--durations=0', '--clean-alluredir',    '--alluredir', f'{Constant().REPORT_PATH}/allure_results']pytest.main(main_list)if not os.getenv(&quot;BUILD_URL&quot;):    os.system(f&quot;{Constant.ALLURE_TOOL} serve {Constant().REPORT_PATH}/allure_results&quot;)  # 本地执行```### 执行测试运行`allure_debug.py`文件### 查看报告![报告截图](imgs/报告截图.png)![实际项目报告截图](imgs/实际项目.png)</longdescription>
</pkgmetadata>