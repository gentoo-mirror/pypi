<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>![Django Pictures Logo](https://repository-images.githubusercontent.com/455480246/daaa7870-d28c-4fce-8296-d3e3af487a64)# Django PicturesResponsive cross-browser image library using modern codes like AVIF &amp; WebP.* responsive web images using the [picture](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture) tag* native grid system support* serve files with or without a CDN* placeholders for local development* migration support* async image processing for [Celery] or [Dramatiq]* [DRF] support[![PyPi Version](https://img.shields.io/pypi/v/django-pictures.svg)](https://pypi.python.org/pypi/django-pictures/)[![Test Coverage](https://codecov.io/gh/codingjoe/django-pictures/branch/main/graph/badge.svg)](https://codecov.io/gh/codingjoe/django-pictures)[![GitHub License](https://img.shields.io/github/license/codingjoe/django-pictures)](https://raw.githubusercontent.com/codingjoe/django-pictures/master/LICENSE)## UsageBefore you start, it can be a good idea to understand the fundamentals of[responsive images](https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images).Once you get a feeling how complicated things can get with all device types, you'll probably finda new appreciation for this package and are ready to adopt in you project :)```python# models.pyfrom django.db import modelsfrom pictures.models import PictureFieldclass Profile(models.Model):    title = models.CharField(max_length=255)    picture = PictureField(upload_to=&quot;avatars&quot;)``````html&lt;!-- template.html --&gt;{% load pictures %}{% picture profile.picture img_alt=&quot;Spiderman&quot; img_loading=&quot;lazy&quot; picture_class=&quot;my-picture&quot; m=6 l=4 %}```The template above will render into:```html&lt;picture class=&quot;my-picture&quot;&gt;  &lt;source type=&quot;image/webp&quot;          srcset=&quot;/media/testapp/profile/image/800w.webp 800w, /media/testapp/profile/image/100w.webp 100w, /media/testapp/profile/image/200w.webp 200w, /media/testapp/profile/image/300w.webp 300w, /media/testapp/profile/image/400w.webp 400w, /media/testapp/profile/image/500w.webp 500w, /media/testapp/profile/image/600w.webp 600w, /media/testapp/profile/image/700w.webp 700w&quot;          sizes=&quot;(min-width: 0px) and (max-width: 991px) 100vw, (min-width: 992px) and (max-width: 1199px) 33vw, 600px&quot;&gt;  &lt;img src=&quot;/media/testapp/profile/image.jpg&quot; alt=&quot;Spiderman&quot; width=&quot;800&quot; height=&quot;800&quot; loading=&quot;lazy&quot;&gt;&lt;/picture&gt;```Note that arbitrary attributes can be passedto either the `&lt;picture&gt;` or `&lt;img&gt;` elementby prefixing parameters to the `{% picture %}` tagwith `picture_` or `img_` respectively.## Setup### Installation```shellpython3 -m pip install django-pictures```### Settings```python# settings.pyINSTALLED_APPS = [    # ...    'pictures',]# the following are defaults, but you can override themPICTURES = {    &quot;BREAKPOINTS&quot;: {        &quot;xs&quot;: 576,        &quot;s&quot;: 768,        &quot;m&quot;: 992,        &quot;l&quot;: 1200,        &quot;xl&quot;: 1400,    },    &quot;GRID_COLUMNS&quot;: 12,    &quot;CONTAINER_WIDTH&quot;: 1200,    &quot;FILE_TYPES&quot;: [&quot;WEBP&quot;],    &quot;PIXEL_DENSITIES&quot;: [1, 2],    &quot;USE_PLACEHOLDERS&quot;: True,    &quot;QUEUE_NAME&quot;: &quot;pictures&quot;,    &quot;PROCESSOR&quot;: &quot;pictures.tasks.process_picture&quot;,}```If you have either Dramatiq or Celery installed, we will default to asyncimage processing. You will need workers to listen to the `pictures` queue.### PlaceholdersThis library comes with dynamically created placeholders to simplify localdevelopment. To enable them, add the following to enable the`PICTURES[&quot;USE_PLACEHOLDERS&quot;]` setting and add the following URL configuration:```python# urls.pyfrom django.urls import include, pathfrom pictures.conf import get_settingsurlpatterns = [    # ...]if get_settings().USE_PLACEHOLDERS:    urlpatterns += [        path(&quot;_pictures/&quot;, include(&quot;pictures.urls&quot;)),    ]```### Legacy use-cases (email)Although the `picture`-tag is [adequate for most use-cases][caniuse-picture],some remain, where a single `img` tag is necessary. Notably in email, where[most clients do support WebP][caniemail-webp] but not [srcset][caniemail-srcset].The template tag `img_url` returns a single size image URL.In addition to the ratio you will need to define the `file_type`as well as the `width` (absolute width in pixels).```html{% load pictures %}&lt;img src=&quot;{% img_url profile.picture ratio=&quot;3/2&quot; file_type=&quot;webp&quot; width=800 %}&quot; alt=&quot;profile picture&quot;&gt;```[caniuse-picture]: https://caniuse.com/picture[caniemail-webp]: https://www.caniemail.com/features/image-webp/[caniemail-srcset]: https://www.caniemail.com/features/html-srcset/## Config### Aspect ratiosYou can specify the aspect ratios of your images. Images will be cropped to thespecified aspect ratio. Aspect ratios are specified as a string with a slashbetween the width and height. For example, `16/9` will crop the image to 16:9.```python# models.pyfrom django.db import modelsfrom pictures.models import PictureFieldclass Profile(models.Model):    title = models.CharField(max_length=255)    picture = PictureField(      upload_to=&quot;avatars&quot;,      aspect_ratios=[None, &quot;1/1&quot;, &quot;3/2&quot;, &quot;16/9&quot;],    )``````html# template.html{% load pictures %}{% picture profile.picture img_alt=&quot;Spiderman&quot; ratio=&quot;16/9&quot; m=6 l=4 %}```If you don't specify an aspect ratio or None in your template, the image will beserved with the original aspect ratio of the file.You may only use aspect ratios in templates, that have been defined on the model.The model `aspect_ratios` will default to `[None]`, if other value is provided.### BreakpointsYou may define your own breakpoints, they should be identical to the ones usedin your css library. Simply override the `PICTURES[&quot;BREAKPOINTS&quot;]` setting.### Grid columnsGrids are so common in web design, that they even made it into CSS.We default to 12 columns, but you can override this setting, via the`PICTURES[&quot;GRID_COLUMNS&quot;]` setting.### Container widthContainers are commonly used to limit the maximum width of layouts,to promote better readability on larger screens. We default to `1200px`,but you can override this setting, via the `PICTURES[&quot;CONTAINER_WIDTH&quot;]` setting.You may also set it to `None`, should you not use a container.### File typesUnless you still services IE11 clients, you should be fine serving just[WebP](https://caniuse.com/webp). Sadly, [AVIF](https://caniuse.com/avif)(WebP's successor) is[not yet supported by Pillow](https://github.com/python-pillow/Pillow/pull/5201).If you are serving IE11 use add `JPEG` to the list. Beware though, that this maydrastically increase you storage needs.### Pixel densitiesUnless you really care that your images hold of if you hold your UHD phone veryclose to your eyeballs, you should be fine, serving at the default `1x` and `2x`densities.### Async image processingIf you have either Dramatiq or Celery installed, we will default to asyncimage processing. You will need workers to listen to the `pictures` queue.You can override the queue name, via the `PICTURES[&quot;QUEUE_NAME&quot;]` setting.You can also override the processor, via the `PICTURES[&quot;PROCESSOR&quot;]` setting.The default processor is `pictures.tasks.process_picture`. It takes a singleargument, the `PictureFileFile` instance. You can use this to override theprocessor, should you need to do some custom processing.## MigrationsDjango doesn't support file field migrations, but we do.You can simply auto create the migration and replace Django's`AlterField` operation with `AlterPictureField`. That's it.You can follow [the example][migration] in our test app, to see how it works.[migration]: tests/testapp/migrations/0002_alter_profile_picture.py## Contrib### Django Rest Framework ([DRF])We do ship with a read-only `PictureField` that can be used to include allavailable picture sizes in a DRF serializer.```pythonfrom rest_framework import serializersfrom pictures.contrib.rest_framework import PictureFieldclass PictureSerializer(serializers.Serializer):    picture = PictureField()```You may provide optional GET parameters to the serializer, to specify the aspectratio and breakpoints you want to include in the response. The parameters areprefixed with the `fieldname_` to avoid conflicts with other fields.```bashcurl http://localhost:8000/api/path/?picture_ratio=16%2F9&amp;picture_m=6&amp;picture_l=4# %2F is the url encoded slash``````json{  &quot;other_fields&quot;: &quot;…&quot;,  &quot;picture&quot;: {    &quot;url&quot;: &quot;/path/to/image.jpg&quot;,    &quot;width&quot;: 800,    &quot;height&quot;: 800,    &quot;ratios&quot;: {      &quot;1/1&quot;: {        &quot;sources&quot;: {          &quot;image/webp&quot;: {            &quot;100&quot;: &quot;/path/to/image/1/100w.webp&quot;,            &quot;200&quot;: &quot;…&quot;          }        },        &quot;media&quot;: &quot;(min-width: 0px) and (max-width: 991px) 100vw, (min-width: 992px) and (max-width: 1199px) 33vw, 25vw&quot;      }    }  }}```Note that the `media` keys are only included, if you have specified breakpoints.### Django Cleanup`PictureField` is compatible with [Django Cleanup](https://github.com/un1t/django-cleanup),which automatically deletes its file and corresponding `SimplePicture` files.[drf]: https://www.django-rest-framework.org/[celery]: https://docs.celeryproject.org/en/stable/[dramatiq]: https://dramatiq.io/</longdescription>
</pkgmetadata>