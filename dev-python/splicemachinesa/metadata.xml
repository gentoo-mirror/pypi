<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># Splice Machine SQLAlchemy Adapter[![PyPI version](https://badge.fury.io/py/splicemachinesa.svg)](https://badge.fury.io/py/splicemachinesa)## Description:* This python package allows users to integrate new and existing SQLAlchemy applications with Splice Machine* SQLAlchemy exposes a uniform API for database-backed applications,which can be easily used with Splice Machine via this adaptor* Supported on Splice Machine Versions &gt;= 2.8.0.1920* Requires Python 3.6+## Installation:There are two ways to install this Driver. With and without ODBC Driver custom installation. We recommend without. When running these commands, you must either use sudo or have root access.### Without ODBC Driver Custom Installation#### Mac`brew install unixodbc``pip install splicemachinesa`#### LinuxFirst ensure you have the following packages installed. They are necessary for pyodbc.&lt;br&gt;Ubuntu:* build-essential* libssl-dev* libffi-dev* unixodbc* unixodbc-dev* python3-dev* curl* unzip* iodbc`sudo apt -y update &amp;&amp; sudo apt -y upgrade &amp;&amp; sudo apt -y install build-essential libssl-dev libffi-dev unixodbc unixodbc-dev python3-dev curl unzip iodbc`Centos:* unzip* gcc* openssl-devel* gcc-c++* unixODBC-devel* unixODBC* python3-devel`sudo yum -y update &amp;&amp; sudo yum -y install unzip gcc openssl-devel gcc-c++ unixODBC-devel unixODBC python3-devel`Then run `pip install splicemachinesa`&lt;br&gt;**Note:** If you have an error during installation, it is likely with the installation of PyODBC. When searching the error, reference PyODBC in the search.### With Custom ODBC Driver Installation#### ODBC Driver:First, download the appropriate [Splice Machine ODBC](https://doc.splicemachine.com/tutorials_connect_odbcinstall.html) driver for your system.&lt;hr&gt;&lt;br&gt;Mac OSX 64 bit Driver: &lt;a href=&quot;https://splice-releases.s3.amazonaws.com/odbc-driver/MacOSX64/splice_odbc_macosx64-2.8.73.0.tar.gz&quot;&gt;Download&lt;/a&gt;&lt;br&gt;Linux 64 bit Driver: &lt;a href=&quot;https://splice-releases.s3.amazonaws.com/odbc-driver/Linux64/splice_odbc_linux64-2.8.73.0.tar.gz&quot;&gt;Download&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;Note: Windows is not currently supported for Splice Machine SQLAlchemy ODBC&lt;/b&gt;&lt;br&gt;&lt;hr&gt;&lt;br&gt;Then, follow the instructions &lt;a href=&quot;https://doc.splicemachine.com/tutorials_connect_odbcinstall.html&quot;&gt;here&lt;/a&gt; to finish the installation, but use the download links above to retrieve the Driver tarball&lt;br&gt;&lt;hr&gt;Once the Driver is installed, you can pip install splicemachinesa.&lt;b&gt;NOTE: If you are on Mac, you must install unixODBC&lt;/b&gt;&lt;br&gt;`brew install unixodbc````pip install splicemachinesa```### UsageYou can use this package for SqlAlchemy usage or raw ODBC usage#### ODBC Connection Only (Basic Auth)```from splicemachinesa.pyodbc import splice_connectODBC_CONNECTION = splice_connect(URL=[URL], UID=[UID], PWD=[PWD], SSL=[SSL])```Filling in `UID`, `PWD`, `URL`, and `SSL` with the proper values for your database. SSL defaults to 'basic' If you are connecting to the Splice Database _inside_ the same network (ie standalone splice) you will set `SSL=None`#### ODBC Connection Only (JWT Connection)```from splicemachinesa.pyodbc import splice_connectODBC_CONNECTION = splice_connect(URL=[URL], JWT_TOKEN=[JWT_TOKEN], JWT_TYPE=[JWT_TYPE], SSL=[SSL])```Filling in `JWT_TOKEN`, `JWT_TYPE`, `URL`, and `SSL` with the proper values for your database. SSL defaults to 'basic' If you are connecting to the Splice Database _inside_ the same network (ie standalone splice) you will set `SSL=None`&lt;br&gt;You must set the JWT_TYPE to use this format. Available options are ('SPLICE_JWT', 'SPLICE_JWT_PUB', 'OKTA_OAUTH', 'SPLICE_OAUTH')#### SqlAlchemyThere are three URL formats that can be used to access SpliceMachine via ODBC through SQLAlchemy. The first will suffice in most cases.&lt;hr&gt;#### 1: Standard URL format&lt;br&gt;Format: `splicemachinesa://[user]:[password]@[host]:[port]/[database]`&lt;br&gt;&lt;br&gt;The Driver Name defaults to `SpliceODBCDriver`, which is the default name when the driver is installed (specified in `odbc.ini`). However, this name can be overridden through the `SPLICE_ODBC_DRIVER_NAME` environment variable.Example:```from sqlalchemy import create_engineurl = 'splicemachinesa://splice:admin@127.0.0.1:1527/splicedb'engine = create_engine(url)```#### 2. Custom Configuration Without DriverFormat: `splicemachinesa://?DRIVER=[driver]&amp;URL=[URL]&amp;PORT=[PORT]&amp;UID=[USER]&amp;PWD=[PASSWORD]`&lt;br&gt;&lt;br&gt;You can use this SQLAlchemy driver without an ODBC configuration (meaning running the installation from Splice Machine docs)by manually specifying the driver path.* On OSX (given installation with `sudo` ), the Driver is found in `/Library/ODBC/SpliceMachine/libsplice_odbc64.dylib`* On OSX, Without `sudo` this driver is located at `$HOME/Library/ODBC/SpliceMachine/libsplice_odbc64.dylib`* On Linux (given ODBC Driver installation with `sudo`), this is found in `/usr/local/splice/libsplice_odbc.so`* On Linux, Without `sudo` it is found in `$HOME/splice`.&lt;br&gt;We provide a utility function for simplifying the URL building process. &lt;br&gt;This method is easier for an automated driver configuration (e.g. inside Docker) because you only needto copy to Driver binary. &lt;br&gt;&lt;br&gt;Note: Error messages will not be rendered properly with this approach.Example Linux:```from sqlalchemy import create_enginefrom splicemachinesa.utilities import url_builderurl = url_builder('/usr/local/splice/lib/libsplice_odbc.so', host='localhost', port=1527,user='splice', password='admin') engine = create_engine(url) ```Example Mac:```from sqlalchemy import create_enginefrom splicemachinesa.utilities import url_builderurl = url_builder('/Library/ODBC/SpliceMachine/libsplice_odbc64.dylib', host='localhost', port=1527, user='splice', password='admin') engine = create_engine(url) ```#### 3. DSN ConfigurationFormat: `splicemachinesa://[dsn]`Splice Machine SQLAlchemy also supports ODBC DSNs for Driver configuration. This means that rather than explicitly specifyingconfiguration options in the URL string, they are rendered from the odbc.ini file. This is also the only method that supports Kerberos Authentication for Splice Clusters. You can see how to use Kerberos &lt;a href=&quot;https://doc.splicemachine.com/developers_fundamentals_haproxy.html&quot;&gt;here&lt;/a&gt;. The `odbc.ini` file is located at these locations depending on whether or not the installer was run as root.&lt;br&gt;&lt;br&gt;With/without `sudo` installation- Mac OSX: `$HOME/.odbc.ini`&lt;br&gt;With `sudo` Linux: `/etc/odbc.ini`&lt;br&gt;Without `sudo` Linux: `$HOME/.odbc.ini`. In this file, if you have a key named `USER`,rename this to `UID`. &lt;br&gt;&lt;br&gt;The default DSN is `SpliceODBC64`.Example:```from sqlalchemy import create_engineurl = 'splicemachinesa://SpliceODBC64'engine = create_engine(url)```#### Testing1) First make sure you have a freshinstallation of Splice Machinerunning (either Standalone or Cloud/Bespoke/On-Prem)with an appropriate SQLAlchemy Splice Machine connectionstring for accessing it```# register any changes for testingcd /path/to/splice_sqlalchemysudo pip install .sudo pip install pytestpytest -vv --db-url 'splicemachinesa://[...]'```#### Features not yet supported- Common Table Expressions- Indices Reflection- Check + Unicode Reflection- Nullable Reflection- ORDER BY COLLATE- Empty Set Insertion- Unicode String Support- Reflector for Order by Foreign Key- limit_offset_in_unions_from_alias</longdescription>
</pkgmetadata>