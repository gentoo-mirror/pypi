<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># opentelem-python_Note: This package is part of the [Runtime Insights Early Access Program](https://about.codecov.io/product/feature/runtime-insights/)._## PurposeThis package allows Python projects to leverage Codecov's [Runtime Insights](https://about.codecov.io/product/feature/runtime-insights/) feature.More information about Runtime Insights can be found [in Codecov's public documentation](https://docs.codecov.com/docs/runtime-insights).## Requirements and Pre-requisites1. A repository that is active on [Codecov](https://codecov.io)2. A profiling token for that repository, obtainable from Codecov.3. Python version &gt;=3.6## InstallationFirst, install the package:```pip install codecovopentelem```Second, include the following snippet in your application. Where this is snippet is placed varies depending on the application, see _Integration Examples_ below.The snippet:```pythonfrom opentelemetry.sdk.trace import TracerProviderfrom opentelemetry.sdk.trace.export import (    ConsoleSpanExporter,    BatchSpanProcessor,    SimpleSpanProcessor,)from opentelemetry import tracefrom codecovopentelem import (    CoverageSpanFilter,    get_codecov_opentelemetry_instances,)from utils.time import format_timeprovider = TracerProvider()trace.set_tracer_provider(provider)&quot;&quot;&quot;CONFIGURATION&quot;&quot;&quot;current_version = &quot;your-application-version&quot;current_env = &quot;your-application-envrionment&quot;code=f&quot;{current_version}:{current_env}&quot;export_rate = 0.01repository_token=&quot;your-repository-profiling-token&quot;untracked_export_rate = 0generator, exporter = get_codecov_opentelemetry_instances(    repository_token=repository_token,    version_identifier=current_version,    sample_rate=export_rate,    filters={        CoverageSpanFilter.span_kind_filter: [            trace.SpanKind.SERVER,            trace.SpanKind.CONSUMER,        ],    },    code=code,    untracked_export_rate=untracked_export_rate,    environment=current_env,)provider.add_span_processor(generator)provider.add_span_processor(BatchSpanProcessor(exporter))```### Integration ExamplesThe specifics of how this library is integrated into your project depends on the project itself. This section contains a few common, framework specific, integration approaches along with the general integration approach at the end.Note that these examples demonstrate _possible_ ways to incorporate this package into your project. As always, your specific needs may vary.#### FlaskIn a Flask application, you could place the code snippet in your application's `app.py` file _before_ the call to initialize your Flask app, like so:```pythonfrom opentelemetry.instrumentation.flask import FlaskInstrumentor# Snippet Code ...# Other Startup Code ...app = Flask(    __name__,    static_url_path='',    static_folder='',    template_folder='templates',)FlaskInstrumentor().instrument_app(app)# app.route(...)# ...app.run(host='0.0.0.0', port=8080)```#### DjangoIn Django, you can place this snippet in your application's `&lt;application_name&gt;/wsgi.py` file:```pythonimport osfrom django.core.wsgi import get_wsgi_applicationfrom utils.config import get_settings_moduleos.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, get_settings_module())#... Other Startup Codefrom opentelemetry.instrumentation.django import DjangoInstrumentortry:    # Snippet Codeexcept UnableToStartProcessorException:    # Handle the Exception...DjangoInstrumentor().instrument()application = get_wsgi_application()```Note that this example also demonstrates how to integrate using a `try/except`.#### General IntegrationIf you are not using Django or Flask integration is still possible using the above code snippet. How to do this may vary greatly depending on your use case. In general, though, the code snippet should be placed wherever you would put your application's OpenTelemetry startup code. In lieu of that, this code should be incorporated in such a way that it is part of your application's startup process.## Configuration- `current_version` -- _(Required)_ The current version of the application. This can be semver, a commit SHA, or whatever is meaningful to you, but it should uniquely identify the particular version of the code.- `current_env` -- _(Required)_ The environment in which the application is currently running. Typically &quot;production&quot;, but can be other values as well (e.g., &quot;local&quot; / &quot;dev&quot; for testing during setup of the package, &quot;test&quot; for instrumenting in your test environment, etc.)- `code` -- A unique identifier for the current deployment across all environments where it may be deployed. Conventionally, this is a combination of version number and environment name, but can be anything as long as it is unique in each environment for the version being deployed.- `export_rate` -- _(Required. Min: 0, Max: 1)_ The percentage of your application's calls that are instrumented using this package. Using this package does incur some performance overhead, and instrumenting 100% of calls is not required. Therefore, for most applications, it is recommended to use 0.01 to 0.05 as the default value. However, low traffic applications may want to use a larger number (such as 0.1 or more).- `repository_token` -- _(Required)_ The identifying token for this repository. Currently only obtainable by being selected for Codecov's [Runtime Insights Early Access Program](https://about.codecov.io/product/feature/runtime-insights/). It should be treated as a sensitive credential (e.g., not committed to source control, etc.)- `untracked_export_rate` -- Currently unused, should remain at 0.If desired, the `filters` parameter can also be changed to provide different filtering on any valid OpenTelemetry `SpanKind` as [defined by the specification](https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/trace/api.md#spankind).## Codecov.yml ChangesYou will need to update your `codecov.yml` as follows:```comment:  layout: 'reach,diff,flags,tree,betaprofiling'  show_critical_paths: true```[You can read more about the codecov.yml in Codecov's public documentation](https://docs.codecov.com/docs/codecov-yaml). If you do not have a `codecov.yml` in your project, you can create the file in the root of your project and add the above configuration.</longdescription>
</pkgmetadata>