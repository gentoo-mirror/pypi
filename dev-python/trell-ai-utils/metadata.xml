<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>&lt;img src=&quot;https://i.ibb.co/5jF4CyY/Trell-Logo.png&quot; alt=&quot;TRELL&quot; width=&quot;200&quot;/&gt;&lt;h1&gt;Trell Pip Package&lt;/h1&gt;  ***&lt;p float=&quot;left&quot;&gt;  &lt;img src=https://img.shields.io/pypi/v/trell-ai-utils /&gt;  &lt;img src=https://img.shields.io/pypi/dm/trell-ai-utils?logo=Python&amp;style=social /&gt; &lt;/p&gt;## Table of Contents- [Prerequisites](#Prerequisites)- [Slack Alerter](#Slack_Alerter)- [Log Formatter](#Log_Formatter)- [S3 Connector](#S3_Connector)- [Profile Decorator](#Profile_Decorator)- [MySQL Connector](#MySQL_Connector)- [BigQuery Connector](#BigQuery_Connector)- [MongoDB Connector](#MongoDB_Connector)***## 1.  Prerequisites&lt;a id=&quot;Prerequisites&quot; name=&quot;Prerequisites&quot;&gt;    - **Installation** (Any one)          `pip install trell-ai-utils`      `pip install git+https://gitlab.com/trell/trell-ai-util.git`      `pip install git+https://gitlab.com/trell/trell-ai-util.git@&lt;tag_no&gt;`      `pip install git+https://gitlab.com/trell/trell-ai-util.git@&lt;branch_name&gt;`    - *Trell-ai-utils pip package can be utilized if any of the following conditions are met.*   - Trell-ai-utils pip package can be used in any Trell AWS EC2 instance with **ds-general-ec2** IAM role attached.  - Trell-ai-utils pip package can be used  if AWS-CLI is locally configured.        - AWS CLI configuration steps :           `sudo apt install awscli`         `aws_access_key_id = *********`         `aws_secret_access_key = *********`![AWS-CLI Configured](https://i.ibb.co/6Xk6Ckm/aws-cli.gif)  - Trell-ai-utils pip package can be used without locally configuring AWS by following ways : -     - Manually configure from pip package utility functions :  ```python  from trell.utils import Credential`Credential.set(ACCESS_KEY=&quot;*********&quot;, SECRET_KEY=&quot;*********&quot;)```      - Or just export these two environment variables int the terminal via :           `export ACCESS_KEY=&quot;*********&quot;`        `export SECRET_KEY=&quot;*********&quot;`  ![AWS Configured via environment Variables](https://i.ibb.co/Q9SzqZ8/aws-env.gif)---##  2.  Slack Alerter&lt;a id=&quot;Slack_Alerter&quot; name=&quot;Slack_Alerter&quot;&gt;  **Code Snippet Sample :**```pythonfrom trell.Alerter import Alertertry:    &quot;&quot;&quot;Write your code&quot;&quot;&quot;except:    &quot;&quot;&quot;Catch exceptions&quot;&quot;&quot;    Alerter.send_alert(message=message, url=url, userId=userId, send_error=True) ```**Alerter Documentation :**```pythonclass Alerter:    &quot;&quot;&quot;Class for sending alerts and monitoring stats to a slack channel&quot;&quot;&quot;    def send_alert(message:str, url=url, userId:str=None, send_error:bool=False):        &quot;&quot;&quot;        This function send alert to a target channel tagging a user with a alert message and traceback error.        :param: str message : Message to be displayed in the channel        :param: str url : Webhook of target channel (if nothing is passed then #tesing channel will be alerted)        :param: str userId : Slack userId of user who needs to be tagged (format of userid = 'Z0172K2PD5K')        :param: bool send_error : This should be set True, if slack_alert is called while catching exception        returns:         &quot;&quot;&quot;```---##  3.  Log Formatter&lt;a id=&quot;Log_Formatter&quot; name=&quot;Log_Formatter&quot;&gt;**Code Snippet Sample :**```pythonfrom trell.utils import LogFormatterLogFormatter.apply()```**Log Formatter Documentation**```pythonclass LogFormatter(logging.Formatter):    &quot;&quot;&quot;Log Formatter class for trell ai usage&quot;&quot;&quot;    __date_format = '%d/%b/%Y:%H:%M:%S %Z'    @staticmethod    def apply(level=logging.INFO):        &quot;&quot;&quot;        Start logging in json format.        :return:        &quot;&quot;&quot;```---## 4. S3 Connector&lt;a id=&quot;S3_Connector&quot; name=&quot;S3_Connector&quot;&gt;     **Code Snippet Sample :**```pythonfrom trell.S3 import S3# Uplaoding data to S3demo = {&quot;Name&quot;: &quot;Trell&quot;, &quot;Age&quot;: 4}S3.write_to_s3_bucket(python_data_object=demo,                             bucket='data-science-datas',                             sub_bucket='models/', file_name=&quot;demo.pickle&quot;)# Doownlaoding data from S3demo = S3.read_from_s3_bucket(bucket='data-science-datas',                                                   sub_bucket='models/',                                         file_name=&quot;demo.pickle&quot;)```**S3 Connector Documentation**```pythonclass S3:    &quot;&quot;&quot;AWS S3 utility functions&quot;&quot;&quot;    @staticmethod    def read_from_s3_bucket(bucket='data-science-datas', sub_bucket='tests/', file_name='test.pkl'):        &quot;&quot;&quot;        read data stored in S3 bucket        :param string bucket: bucket name        :param string sub_bucket: sub-bucket name        :param string file_name: name of the file to be read        :return old_data : python object stored in the S3        &quot;&quot;&quot;    @staticmethod    def write_to_s3_bucket(python_data_object=None, bucket='data-science-datas', sub_bucket='tests/', file_name='test.pkl'):        &quot;&quot;&quot;        write python objects/variables etc  into S3 bucket        :param string bucket: bucket name        :param string sub_bucket: sub-bucket name        :param string file_name: name of the file to be written        :return None        &quot;&quot;&quot;    @staticmethod    def upload_data_from_local_to_s3(model_file_name, bucket='', sub_bucket=''):        &quot;&quot;&quot;        write data stored in local machine into S3 bucket from         :param string bucket: bucket name        :param string sub_bucket: sub-bucket name        :param string file_name: name of the file to be written        :return None        &quot;&quot;&quot;```---## 5. Profile Decorator&lt;a id=&quot;Profile_Decorator&quot; name=&quot;Profile_Decorator&quot;&gt;    **Code Snippet Sample :**  ```pythonfrom trell.profiler import profiler@profiler(sort_by='cumulative', lines_to_print=10, strip_dirs=True)def product_counter_v3():    return [1, 2, 3, 4, 5]```**Profiler Documentaion**```pythondef profiler(output_file=None, sort_by='cumulative', lines_to_print=None, strip_dirs=False):    &quot;&quot;&quot;    A time profiler decorator    :param str output_file: Path of the output file. If only name of the file is given, it's saved in the current    directory. If it's None, the name of the decorated function is used.    :param str sort_by: SortKey enum or tuple/list of str/SortKey enum Sorting criteria for the Stats object. For a list    of valid string and SortKey refer to: https://docs.python.org/3/library/profile.html#pstats.Stats.sort_stats    :param int lines_to_print: Number of lines to print. Default (None) is for all the lines. This is useful in reducing    the size of the printout, especially that sorting by 'cumulative', the time consuming operations are printed toward    the top of the file.    :param bool strip_dirs: Whether to remove the leading path info from file names. This is also useful in reducing the    size of the printout    :return: Profile of the decorated function    &quot;&quot;&quot;```---## 6. MySQL Connector&lt;a id=&quot;MySQL_Connector&quot; name=&quot;MySQL_Connector&quot;&gt;  **Code Snippet Sample :**  ```python# Query from Production MySQL trellDb databasefrom trell.MySQL import MySQL query = &quot;select languageId from trellDb.userLanguages where userId = 61668931&quot;df = MySQL.get_prod_data(query)# Query from Custom MySQL Databasefrom trell.MySQL import MySQL user = &quot;***&quot;password = &quot;***&quot;host = &quot;***&quot;port = &quot;***&quot;database = &quot;***&quot;db_string = f&quot;mysql+mysqlconnector://{user}:{password}@{host}:{port}/{database}&quot;query = &quot;select * from table_name limit 10&quot;mysql = MySQL(db_string=db_string)df = mysql.get_data(query = query) ```**MySQL Connector Documentaion**```pythonclass MySQL:    &quot;&quot;&quot;MySQL database utility functions&quot;&quot;&quot;    def __init__(self, db_string):        &quot;&quot;&quot;        initialisation method for MySQL connector        :param string db_string: mysql database connection string        &quot;&quot;&quot;    def get_data(self, query):        &quot;&quot;&quot;        Fetch data from mysql as a dataframe.        :param string query: query for fetching data from table        :return pd.DataFrame data        &quot;&quot;&quot;    def execute_query(self, query):        &quot;&quot;&quot;        Execute a query in the mysql table        :param string query: query for execution in the table        :return None        &quot;&quot;&quot;    def dump_data(self, data, table_name, mode=&quot;append&quot;):        &quot;&quot;&quot;        Execute a query in the mysql table        :param string query: query for execution in the table        :param string table_name: name of the the target table        :param string mode: it can be either replace or append        :return None        &quot;&quot;&quot;    @staticmethod    def get_prod_data_from_local(query):        &quot;&quot;&quot;        Fetch data from production mysql from local machine via SSH tunnelling (or local port forwarding).        :param string query: query for execution in the table         :return:        &quot;&quot;&quot;    @staticmethod    def get_prod_data(query):        &quot;&quot;&quot;        Fetch data from production mysql as a dataframe.        :param string query: query for fetching data from table        :return pd.DataFrame data        &quot;&quot;&quot;    @staticmethod    def execute_query_in_prod(query):        &quot;&quot;&quot;        Execute a query in the production mysql table        :param string query: query for execution in the table        :return:        &quot;&quot;&quot;    @staticmethod    def dump_into_prod(data, table_name, mode=&quot;append&quot;):        &quot;&quot;&quot;        Push data into production mysql table        :param pd.DataFrame data: dataframe to be appended or replaced        :param string table_name: name of the the target table        :param string mode: it can be either replace or append        :return:        &quot;&quot;&quot;```---## 7.  BigQuery Connector&lt;a id=&quot;BigQuery_Connector&quot; name=&quot;BigQuery_Connector&quot;&gt;**Code Snippet Sample :**  ```python# Fetching data from BigQueryfrom trell.BigQuery import BigQuerybq = BigQuery(read_big_query_project = &quot;****&quot;,                    service_account_file_path=&quot;***.json&quot;)query = &quot;select * from `trellatale.trellDbDump.userLanguages` limit 2&quot;# Use one of the following methoddf = bq.fetch_data(query)  # this uses bigQuery official api for pulling datadf = bq.get_data(query)  # this uses pandas_gbq library for pulling data# Dumping Dataframe in BigQuerybq.dump_data(database=&quot;rahul_temp&quot;, table=&quot;demo&quot;, dataframe=df, mode=&quot;append&quot;)# Executing any query in BigQueryquery = &quot;INSERT rahul_temp.Demo (id, userId) VALUES(1,1),(1,1)&quot;BigQuery.execute_query(query)# Streaming insert in BigQueryrow_to_insert = [{&quot;id&quot;: 1, &quot;userid&quot;: 1, &quot;languageId&quot;: 58,             &quot;mode&quot;:0,&quot;active&quot;:1}]BigQuery.insert_rows_in_bigquery(dataset=&quot;rahul_temp&quot;, table=&quot;Demo&quot;, rows_to_insert=row_to_insert)```**BigQuery Connector Documentaion**```pythonclass BigQuery:    &quot;&quot;&quot;BigQuery database utility functions&quot;&quot;&quot;    def __init__(self, read_big_query_project = config.READ_BIG_QUERY_PROJECT,                       write_big_query_project = config.WRITE_BIG_QUERY_PROJECT,                       service_account_file_path=config.BIG_QUERY_SERVICE_ACCOUNT_FILE_PATH):        &quot;&quot;&quot;        initialisation method for BigQuery Connector        :param str read_big_query_project : project used while reading from BigQuery        :param str write_big_query_project: project used while writing into BigQuery        :param str service_account_file_path: project specific BigQuery Credential        &quot;&quot;&quot;    def get_data(self, query=None, query_config=None, max_retries=0, time_interval=5):        &quot;&quot;&quot;        Fetches data from from BigQuery's PandasGBQ API        :param string query: query for fetching data from table        :param string query_cofig: config for parameterised query        :param string max_retries: maximum retries if data is not fetched        :param integer time_interval : time interval between retries        &quot;&quot;&quot;    def fetch_data(self, query=None, query_config=None, max_retries=0, time_interval=5):        &quot;&quot;&quot;        Fetches data from from BigQuery Official API        :param string query: query for fetching data from table        :param string job_cofig: config for parameterised query        :param string max_retries: maximum retries if data is not fetched        :param integer time_interval : time interval between retries        &quot;&quot;&quot;    def execute_query(self, query, query_config=None, timeout=900, max_retries=0, time_interval=5):        &quot;&quot;&quot;        Executes query from from BigQuery table        :param string query: query for execution        :param string query_cofig: config for parameterised query        :param integer timeout : maximum bigquery execution timeout        :param string max_retries: maximum retries if data is not fetched        :param integer time_interval : time interval between retries        &quot;&quot;&quot;    def dump_data(self, database=None, table=None, dataframe=None, mode=&quot;append&quot;):        &quot;&quot;&quot;        Dumps data into from BigQuery        :param string database: target bigquery database        :param string table: target table name        :param pd.DataFrame dataframe: pandas dataframe for dumping into bigquery        :param string mode: it can be either append or replace        &quot;&quot;&quot;    def insert_rows_array(self, dataset=None, table=None, rows_to_insert=None):        &quot;&quot;&quot;        Streaming insert into from BigQuery        :param string dataset: target bigquery database        :param string table: target table name        :param list rows_to_insert: list of dictionaries where each dictionary is a row with keys as column names        &quot;&quot;&quot;    def insert_rows_in_bigquery(self, dataset=None, table=None, rows_to_insert=None):        &quot;&quot;&quot;        Streaming insert into from BigQuery        :param string dataset: target bigquery database        :param string table: target table name        :param list rows_to_insert: list of dictionaries where each dictionary is a row with keys as column names        &quot;&quot;&quot;```---## 8.  MongoDB Connector&lt;a id=&quot;MongoDB_Connector&quot; name=&quot;MongoDB_Connector&quot;&gt;**Code Snippet Sample :**  ```pythonuri = &quot;****&quot;db = &quot;***&quot;collection = &quot;****&quot;mongo = MongoAdapter(uri = uri, db = db)#Reading with pull methoddata =  mongo.pull_data(collection=collection, list_dict=list_dict)# Reading with fetch methodquery = {'id': {'$in': [1,2]}}data = mongo.fetch_data(collection, query=query, only_include_keys=[&quot;name&quot;])#Writing inot MongoDBmongo.push_data(collection = collection, data = data)#Updating valueid_dict = {&quot;id&quot;:&quot;2&quot;}set_dict = {&quot;$set&quot;: {&quot;name&quot;:&quot;ram&quot;}}mongo.update_value(id_dict, set_dict,collection=collection, upsert=True)# Deleting datamongo.delete_data(collection=collection, overall=False, condition_dict= {&quot;id&quot;:None})``` **MongoDB Connector Documentaion**```pythonclass MongoDB:    &quot;&quot;&quot;    MongoDB utility functions.    &quot;&quot;&quot;    def __init__(self, db=None, uri=None):        &quot;&quot;&quot;        initialisation method for MongoDB connector        :param str db: database name        :param str uri: mongo uri string for establishing connection        &quot;&quot;&quot;    def push_data(self, data, collection, db=None):        &quot;&quot;&quot;        Function for inserting data into db        :param str db : database name        :param str collection : collection name        :param list/pd.DataFrame data : data to be inserted in the form of dataframe or list of dictionaries        :return:        &quot;&quot;&quot;    def pull_data(self, list_dict, collection, db=None):        &quot;&quot;&quot;        Function for inserting data into db        :param str db : database name        :param str collection : collection name        :param list list_dict : query for fetching data        :return: pd.DataFrame         &quot;&quot;&quot;    def update_value(self, id_dict, set_dict, collection, db=None, upsert=None):        &quot;&quot;&quot;        Function for updating data into db        :param str db : database name        :param str collection : collection name        :param dict id_dict : query for updation        :param dict set_dict : key and value dictionary to be updated        :param bool upsert : whether to upsert or just update        :return:        &quot;&quot;&quot;    def upsert_json(self, output_json, upsert_keys, collection, db=None):        &quot;&quot;&quot;        Function for inserting data into db        :param str db : database name        :param str collection : collection name        :param dict output_json : list of dictionaries where each dictionary is a row with keys as column names        :param list upsert_keys : keys to be upserted        :return:        &quot;&quot;&quot;    def delete_data(self,collection, db=None, overall=False, condition_dict=None):        &quot;&quot;&quot;        Function for inserting data into db        :param str db : database name        :param str collection : collection name        :param bool overall : delete whole collection if True        :param dict condition_dict : query for deletion        :return:         &quot;&quot;&quot;    def fetch_data(self, collection, db=None, query={}, only_include_keys=[]):        &quot;&quot;&quot;        function to fetch data from the given database and collection on given query        :param str db: db_name in mongo        :param str collection: collection name in mongo for database db        :param dict query: execution query statement; default is {} which means fetch all without any filters        :param list only_include_keys: list of keys to be included while fetching rows        :return: pd.DataFrame         &quot;&quot;&quot;    def fetch_data_sorted(self, collection, db=None, pipeline=[]):        &quot;&quot;&quot;        function to fetch data from the given database and collection on given query        :param str db: db_name in mongo        :param str collection: collection name in mongo for database db        :param list pipeline: pipeline required to aggregate        :return: pd.DataFrame         &quot;&quot;&quot;```---## 9.  Cold-Vector Index&lt;a id=&quot;Cold vector Index&quot; name=&quot;Cold vector Index&quot;&gt;**Code Snippet Sample :**  ```python# Fetching data from BigQueryfrom trell.Uservector import Uservector# If null/not-available pass Nonestate = &quot;maharastra&quot;tier = &quot;1&quot;gender = &quot;1&quot;age_group = &quot;2&quot;languageId = &quot;38&quot;obj = Uservector(state=state,tier=tier,gender=gender,age_group=age_group,languageId=languageId)s = obj.cold_vector_title()print(s) #9911238```**User-vector Documentation :**```pythonclass Uservector:  def __init__(self,state=None,tier=None,gender=None,age_group=None,languageId=None ):    '''return embeddings based on input data    :param string state: Name of the state    :param string tier: one of the following(tier1,tier2,tier3,no tier)    :param string gender: one of the following (1,2,3)    :param string age_group: one of the following (0,1,2,3,4)    :param string languageId: language    All inputs will be taken in string. In case you have missing values /null send None --&gt; &quot;&quot;    '''  def cold_vector_title(self):    &quot;&quot;&quot;Returns index for a particular cold-user.&quot;&quot;&quot;```---</longdescription>
</pkgmetadata>