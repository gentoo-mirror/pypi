<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>|pypi| |actions| |codecov| |downloads|edc-sites---------Site definitions to work with Django's `Sites Framework`__ and django_multisite_.Define a ``sites.py``. This is usually in a separate project module. For example, for project ``meta`` there is a module ``meta_sites`` that contains a ``sites.py``... code-block:: python    # sites.py    from edc_sites.single_site import SingleSitefqdn = &quot;example.clinicedc.org&quot;all_sites = (    SingleSite(        10,        &quot;hindu_mandal&quot;,        title=&quot;Hindu Mandal Hospital&quot;,        country=&quot;tanzania&quot;,        country_code=&quot;tz&quot;,        domain=f&quot;hindu_mandal.tz.{fqdn}&quot;,    ),    SingleSite(        20,        &quot;amana&quot;,        title=&quot;Amana Hospital&quot;,        country=&quot;tanzania&quot;,        country_code=&quot;tz&quot;,        domain=f&quot;hindu_mandal.tz.{fqdn}&quot;,    ),)Register a ``post_migrate`` signal in ``apps.py`` to update the django model ``Site`` and the EDC model ``SiteProfile`` on the next migration:.. code-block:: python# apps.pyfrom .sites import all_sites, fqdndef post_migrate_update_sites(sender=None, **kwargs):    from edc_sites.add_or_update_django_sites import add_or_update_django_sites    sys.stdout.write(style.MIGRATE_HEADING(&quot;Updating sites:\n&quot;))    add_or_update_django_sites(        apps=django_apps, sites=all_sites, fqdn=fqdn, verbose=True    )    sys.stdout.write(&quot;Done.\n&quot;)    sys.stdout.flush()For another deployment, we have alot of sites spread out over a few countries. In this case we pass a dictionary andseparate the lists of sites by country.For example:.. code-block:: python    fqdn = &quot;inte.clinicedc.org&quot;    all_sites = {        &quot;tanzania&quot;:(            SingleSite(                101,                &quot;hindu_mandal&quot;,                title=&quot;Hindu Mandal Hospital&quot;,                country=&quot;tanzania&quot;,                country_code=&quot;tz&quot;,                domain=f&quot;hindu_mandal.tz.{fqdn}&quot;,            ),            SingleSite(                102,                &quot;amana&quot;,                title=&quot;Amana Hospital&quot;,                country=&quot;tanzania&quot;,                country_code=&quot;tz&quot;,                domain=f&quot;hindu_mandal.tz.{fqdn}&quot;,            ),        ),        &quot;uganda&quot;:(            SingleSite(                201,                &quot;kojja&quot;,                country=&quot;uganda&quot;,                country_code=&quot;ug&quot;,                domain=f&quot;kojja.ug.{fqdn}&quot;,            ),            SingleSite(                202,                &quot;mbarara&quot;,                country=&quot;uganda&quot;,                country_code=&quot;ug&quot;,                domain=f&quot;mbarara.ug.{fqdn}&quot;,            ),        ),    }In a multisite, multi-country deployment, managing the SITE_ID is complicated. We use django_multisite_ which nicely readsthe SITE_ID from the url. django_multisite will extract `kojja` from https://kojja.ug.example.clinicedc.org to do a model lookupto get the SITE_ID... |pypi| image:: https://img.shields.io/pypi/v/edc-sites.svg    :target: https://pypi.python.org/pypi/edc-sites.. |actions| image:: https://github.com/clinicedc/edc-sites/workflows/build/badge.svg?branch=develop  :target: https://github.com/clinicedc/edc-sites/actions?query=workflow:build.. |codecov| image:: https://codecov.io/gh/clinicedc/edc-sites/branch/develop/graph/badge.svg  :target: https://codecov.io/gh/clinicedc/edc-sites.. |downloads| image:: https://pepy.tech/badge/edc-sites   :target: https://pepy.tech/project/edc-sites.. _django_multisite: https://github.com/ecometrica/django-multisite.git.. _sites_framework: https://docs.djangoproject.com/en/dev/ref/contrib/sites/__ sites_framework_</longdescription>
</pkgmetadata>